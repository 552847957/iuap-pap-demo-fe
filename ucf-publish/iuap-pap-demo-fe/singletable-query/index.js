/*! build:ucf hash:5803c2015c68b190fd14, chunkhash:fcfb4f21405ccb6f0b3a, name:singletable-query/index, filebase:index.js, query:, file:singletable-query/index.js */!function(e){function t(t){for(var n,o,i=t[0],c=t[1],u=t[2],m=0,d=[];m<i.length;m++)o=i[m],r[o]&&d.push(r[o][0]),r[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);for(s&&s(t);d.length;)d.shift()();return l.push.apply(l,u||[]),a()}function a(){for(var e,t=0;t<l.length;t++){for(var a=l[t],n=!0,i=1;i<a.length;i++){var c=a[i];0!==r[c]&&(n=!1)}n&&(l.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},r={6:0},l=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var i=window.webpackJsonp=window.webpackJsonp||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var s=c;l.push([1810,0]),a()}({1797:function(e,t,a){},1798:function(e,t,a){},1799:function(e,t,a){},1800:function(e,t,a){},1810:function(e,t,a){"use strict";a.r(t);a(148);var n=a(0),r=a.n(n),l=a(2),o=a.n(l),i=a(69),c=a.n(i),u=a(11),s=a.n(u),m=a(12),d=a.n(m),p=a(13),f=a.n(p),h=a(14),y=a.n(h),v=a(15),E=a.n(v),b=a(4),w=a(107),g=a.n(w),k=a(3),x=a.n(k),S=a(66),P=a(58),F=a(19),q=a(80),O=a(8),I=a.n(O),D=a(28),j=a(83),N=a.n(j),Y=a(65),T=a(119),C=a(146),L=a(6),M=a(56),V=a.n(M),_=(a(1797),D.a.Item),R=b.Select.Option,A=N.a.YearPicker,H=function(e){function t(e){var a;return s()(this,t),(a=f()(this,y()(t).call(this,e))).search=function(){a.props.form.validateFields(function(e,t){t.year&&(t.year=t.year.format("YYYY"));var n=t.dept;if(n){var r=JSON.parse(n).refpk;t.dept=r}var o=Object(L.e)(a.props.queryParam);o.pageParams.pageIndex=0;var i=a.getSearchPanel(t);o.whereParams=i,l.actions.query.updateState({cacheFilter:i}),l.actions.query.loadList(o),a.props.clearRowFilter()})},a.reset=function(){a.props.form.resetFields(),a.props.form.validateFields(function(e,t){var n=Object(L.e)(a.props.queryParam),r=n.whereParams,o=[];for(var i in t)o.push({key:i});n.whereParams=Object(L.f)(r,o,"key"),l.actions.query.updateState({queryParam:n})})},a.getSearchPanel=function(e){var t=[];for(var a in e)if(e[a]||"number"==typeof e[a]){var n="LIKE";["code","month"].includes(a)&&(n="EQ"),["serviceYearsCompany"].includes(a)&&(n="GTEQ"),t.push({key:a,value:e[a],condition:n})}return t},a.state={},a}return E()(t,e),d()(t,[{key:"render",value:function(){var e=this.props,t=e.form,a=e.onCallback,n=t.getFieldProps;return r.a.createElement(T.a,{reset:this.reset,onCallback:a,search:this.search},r.a.createElement(D.a,{size:"sm"},r.a.createElement(_,{label:"员工编号"},r.a.createElement(b.FormControl,I()({placeholder:"精确查询"},n("code",{initialValue:""})))),r.a.createElement(_,{label:"员工姓名"},r.a.createElement(b.FormControl,I()({placeholder:"模糊查询"},n("name",{initialValue:""})))),r.a.createElement(_,{label:"部门"},r.a.createElement(Y.a,n("dept",{initialValue:""}))),r.a.createElement(_,{label:"司龄"},r.a.createElement(b.InputNumber,I()({min:0,iconStyle:"one"},n("serviceYearsCompany",{initialValue:""})))),r.a.createElement(_,{label:"年份"},r.a.createElement(A,I()({},n("year",{initialValue:null}),{format:"YYYY",locale:V.a,placeholder:"选择年"}))),r.a.createElement(_,{label:"月份"},r.a.createElement(C.a,n("month",{initialValue:""}))),r.a.createElement(_,{label:"是否超标"},r.a.createElement(b.Select,n("exdeeds",{initialValue:""}),r.a.createElement(R,{value:""},"请选择"),r.a.createElement(R,{value:"0"},"未超标"),r.a.createElement(R,{value:"1"},"超标")))))}}]),t}(n.Component),B=D.a.createForm()(H),G=a(304),z=a.n(G),K=(a(1798),b.Menu.Item),J="YYYY-MM-DD HH:mm:ss",Q="YYYY-MM-DD 00:00:00",W="YYYY-MM-DD 23:59:59",U=function(e){function t(e){var a;return s()(this,t),(a=f()(this,y()(t).call(this,e))).onRelevance=function(e,t){var n=e.name;if("name"===t&&window.open("https://baike.baidu.com/item/"+n,"_blank"),"code"===t&&a.setState({record:e,showModal:!0}),"year"===t){var r=e.code,o=e.name,i=e.sexEnumValue,c=e.levelName;l.actions.routing.push({pathname:"/employee",search:g.a.stringify({code:r,name:o,sexEnumValue:i,levelName:c})})}},a.sortFun=function(e){var t=a.props.queryParam;t.sortMap=Object(L.k)(e),l.actions.query.loadList(t)},a.onFilterChange=function(e,t,n){var r=!0,o=Object(L.e)(a.props.queryParam),i=o.whereParams;o.pageParams.pageIndex=0;var u=!0,s=!1,m=void 0;try{for(var d,p=i.entries()[Symbol.iterator]();!(u=(d=p.next()).done);u=!0){var f=c()(d.value,2),h=f[0];f[1].key===e&&(i[h]=a.handleFilterData(e,t,n),r=!1)}}catch(e){s=!0,m=e}finally{try{u||null==p.return||p.return()}finally{if(s)throw m}}if(r){var y=a.handleFilterData(e,t,n);i.push(y)}l.actions.query.loadList(o)},a.handleFilterData=function(e,t,n){var r={key:e,value:t,condition:n};return Array.isArray(t)&&(r.value=a.handleDateFormat(t),r.condition="RANGE"),r},a.onFilterClear=function(e){var t=Object(L.e)(a.props.queryParam),n=t.whereParams,r=t.pageParams,o=!0,i=!1,u=void 0;try{for(var s,m=n.entries()[Symbol.iterator]();!(o=(s=m.next()).done);o=!0){var d=c()(s.value,2),p=d[0];if(d[1].key===e){n.splice(p,1),r.pageIndex=0;break}}}catch(e){i=!0,u=e}finally{try{o||null==m.return||m.return()}finally{if(i)throw u}}l.actions.query.loadList(t)},a.handleDateFormat=function(e){return e.map(function(e,t){return 0===t?e.format(Q):e.format(W)})},a.freshData=function(e){a.onPageSelect(e,0)},a.onDataNumSelect=function(e,t){a.onPageSelect(t,1)},a.onPageSelect=function(e,t){var n=Object(L.e)(a.props.queryParam),r=n.pageParams,o=r.pageIndex,i=r.pageSize;0===t?o=e-1:(i=e,o=0),e&&"all"===e.toString().toLowerCase()&&(i=1),n.pageParams={pageIndex:o,pageSize:i},l.actions.query.loadList(n)},a.afterRowFilter=function(e){if(!e){var t=Object(L.e)(a.props),n=t.queryParam,r=t.cacheFilter;n.whereParams=r,l.actions.query.updateState({queryParam:n})}a.setState({filterable:e})},a.clearRowFilter=function(){a.setState({filterable:!1})},a.close=function(){a.setState({showModal:!1})},a.export=function(){a.grid.exportExcel()},a.resetTableHeight=function(e){var t=0;t=e?Object(L.i)()-470:Object(L.i)()-270,a.setState({tableHeight:t})},a.gridColumn=[{title:"数据",width:80,dataIndex:"k",key:"k",fixed:"left",className:"data-cls ",exportHidden:!0,render:function(e,t,n){var l=r.a.createElement(b.Menu,{onClick:function(e){return a.onRelevance(t,e.key)}},r.a.createElement(K,{key:"code"},"模态弹出"),r.a.createElement(K,{key:"year"},"链接跳转"),r.a.createElement(K,{key:"name"},"打开新页"));return r.a.createElement("div",{className:"table-menu"},r.a.createElement(z.a,{trigger:["click"],overlay:l,animation:"slide-up"},r.a.createElement(b.Icon,{type:"uf-link",style:{color:"#004898"}})))}},{title:"员工编号",dataIndex:"code",key:"code",width:160},{title:"员工姓名",dataIndex:"name",key:"name",width:120,filterType:"text",filterDropdownType:"string",filterDropdown:"show",sorter:!0,render:function(e,t,a){return r.a.createElement(b.Tooltip,{inverse:!0,overlay:e},r.a.createElement("span",null,e))}},{title:"员工性别",dataIndex:"sex",key:"sex",exportKey:"sexEnumValue",width:120,filterType:"dropdown",filterDropdown:"hide",filterDropdownAuto:"manual",filterDropdownData:[{key:"男",value:"1"},{key:"女",value:"0"}],render:function(e,t,a){return r.a.createElement("span",null,t.sexEnumValue)}},{title:"部门",dataIndex:"dept",key:"dept",exportKey:"deptName",width:150,filterType:"dropdown",filterDropdown:"hide",filterDropdownAuto:"manual",filterDropdownData:a.props.colFilterSelectdept,filterDropdownFocus:function(){if(!a.props.colFilterSelectdept){l.actions.query.getListByCol({distinctParams:["dept"]})}},render:function(e,t,a){return r.a.createElement("span",null,t.deptName)}},{title:"职级",dataIndex:"levelName",key:"levelName",width:120},{title:"工龄",dataIndex:"serviceYears",key:"serviceYears",width:180,filterType:"number",filterDropdownType:"number",className:"column-number-right ",filterInputNumberOptions:{max:100,min:0,step:1,precision:0},sorter:!0},{title:"司龄",dataIndex:"serviceYearsCompany",key:"serviceYearsCompany",width:130,className:"column-number-right ",sorter:!0},{title:"年份",dataIndex:"year",key:"year",width:100,render:function(e,t,a){return r.a.createElement("div",null,e?x()(e).format("YYYY"):"")}},{title:"月份",dataIndex:"monthEnumValue",key:"monthEnumValue",width:100,className:"column-number-right ",sorter:!0},{title:"补贴类别",dataIndex:"allowanceTypeEnumValue",key:"allowanceTypeEnumValue",width:120},{title:"补贴标准",dataIndex:"allowanceStandard",key:"allowanceStandard",width:120,className:"column-number-right ",render:function(e,t,a){return r.a.createElement("span",null,"number"==typeof e?e.toFixed(2):"")}},{title:"实际补贴",dataIndex:"allowanceActual",key:"allowanceActual",width:120,className:"column-number-right ",render:function(e,t,a){return r.a.createElement("span",null,"number"==typeof e?e.toFixed(2):"")}},{title:"是否超标",dataIndex:"exdeedsEnumValue",key:"exdeedsEnumValue",width:120},{title:"申请时间",dataIndex:"applyTime",key:"applyTime",width:300,filterDropdown:"hide",filterType:"daterange",filterDropdownType:"daterange",render:function(e,t,a){return r.a.createElement("div",null,e?x()(e).format(J):"")}},{title:"领取方式",dataIndex:"pickTypeEnumValue",key:"pickTypeEnumValue",width:120},{title:"领取时间",dataIndex:"pickTime",key:"pickTime",width:150,render:function(e,t,a){return r.a.createElement("div",null,e?x()(e).format(J):"")}},{title:"备注",dataIndex:"remark",key:"remark",width:100}],a.state={tableHeight:0,filterable:!1,showModal:!1,record:{}},a}return E()(t,e),d()(t,[{key:"componentWillMount",value:function(){this.resetTableHeight(!0)}},{key:"componentDidMount",value:function(){l.actions.query.loadList(this.props.queryParam)}},{key:"componentWillReceiveProps",value:function(e){if(!this.props.colFilterSelectdept&&e.colFilterSelectdept)for(var t=0,a=this.gridColumn.length;t<a;t++){var n=this.gridColumn[t];if("dept"===n.key){n.filterDropdownData=e.colFilterSelectdept;break}}}},{key:"render",value:function(){var e=this,t=this.props,a=t.queryObj,n=t.showLoading,l=t.queryParam,o=a.pageIndex,i=a.total,c=a.totalPages,u=this.state,s=u.filterable,m=u.record,d=u.tableHeight,p={activePage:o,total:i,items:c,freshData:this.freshData,onDataNumSelect:this.onDataNumSelect},f={mode:"multiple",backSource:!0,sortFun:this.sortFun};return r.a.createElement("div",{className:"single-table-query"},r.a.createElement(b.Loading,{showBackDrop:!0,show:n,fullScreen:!0}),r.a.createElement(P.a,{title:"A1单表查询示例"}),r.a.createElement(B,{queryParam:l,clearRowFilter:this.clearRowFilter,onCallback:this.resetTableHeight}),r.a.createElement("div",{className:"table-header"},r.a.createElement(F.a,{className:"ml8",colors:"primary",onClick:this.export},"导出")),r.a.createElement("div",{className:"gird-parent"},r.a.createElement(S.a,{ref:function(t){return e.grid=t},columns:this.gridColumn,data:a.list,rowKey:function(e,t){return t},paginationObj:p,multiSelect:!1,showFilterMenu:!0,filterable:s,onFilterChange:this.onFilterChange,onFilterClear:this.onFilterClear,afterRowFilter:this.afterRowFilter,sort:f,scroll:{y:d},sheetHeader:{height:30,ifshow:!1}})),r.a.createElement(q.a,{show:this.state.showModal,title:"模态弹出",close:this.close,btns:[]},r.a.createElement("div",null,r.a.createElement("span",null,"员工编号："),r.a.createElement("span",null,m.code)),r.a.createElement("div",null,r.a.createElement("span",null,"员工姓名："),r.a.createElement("span",null,m.name)),r.a.createElement("div",null,r.a.createElement("span",null,"员工性别："),r.a.createElement("span",null,m.sexEnumValue)),r.a.createElement("div",null,r.a.createElement("span",null,"职级："),r.a.createElement("span",null,m.levelName))))}}]),t}(n.Component),X=a(29),Z=a.n(X),$=a(9),ee=a.n($),te=a(18),ae=a.n(te),ne=a(35),re=a.n(ne),le=a(22),oe={GET_LIST:"".concat("/iuap-pap-demo-be","/query_allowances/list"),GET_LIST_BY_COL:"".concat("/iuap-pap-demo-be","/query_allowances/distinct")},ie=function(e){var t=Object.assign({},e),a=Object(L.e)(t.pageParams);return delete t.pageParams,Object(le.a)(oe.GET_LIST,{method:"post",data:t,param:a})},ce=function(e){return Object(le.a)(oe.GET_LIST_BY_COL,{method:"post",data:e})},ue={name:"query",initialState:{showLoading:!1,cacheFilter:[],queryParam:{pageParams:{pageIndex:0,pageSize:25},sortMap:[],whereParams:[]},queryObj:{list:[],pageIndex:0,pageSize:25,totalPages:1,total:0}},reducers:{updateState:function(e,t){return re()({},e,Object(L.e)(t))}},effects:{loadList:function(){var e=ae()(ee.a.mark(function e(){var t,a,n,r,o,i,c,u,s,m=arguments;return ee.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},a=m.length>1?m[1]:void 0,l.actions.query.updateState({showLoading:!0}),e.t0=L.n,e.next=6,ie(t);case 6:e.t1=e.sent,n=(0,e.t0)(e.t1),r=n.result,o=r.data,i={showLoading:!1},o?(c=t.pageParams,u=Object(L.o)(o,c),i.queryObj=u,i.queryParam=t):(s=a().query.queryObj,i.queryObj=Object(L.m)(s)),l.actions.query.updateState(i);case 13:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),getListByCol:function(){var e=ae()(ee.a.mark(function e(t,a){var n,r,o,i,c,u,s;return ee.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=L.n,e.next=3,ce(t);case 3:e.t1=e.sent,n=(0,e.t0)(e.t1),r=n.result,o=r.data,i=void 0===o?[]:o,c=t.distinctParams,u=c[0],s=i.map(function(e){return{key:e.deptName,value:e.dept}}),l.actions.query.updateState(Z()({},"colFilterSelect"+u,s));case 10:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()}};o.a.model(ue);var se=Object(l.connect)(function(e){return e.query},null)(U),me=(a(1799),function(e){function t(){var e,a;s()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=f()(this,(e=y()(t)).call.apply(e,[this].concat(r)))).onBack=function(){l.actions.routing.goBack()},a}return E()(t,e),d()(t,[{key:"render",value:function(){var e=g.a.parse(this.props.location.search),t=e.code,a=e.name,n=e.sexEnumValue,l=e.levelName;return r.a.createElement("div",{className:"employee"},r.a.createElement(P.a,{title:"A1单表查询示例",back:!0}),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"item"},r.a.createElement("span",null,"员工编号："),r.a.createElement("span",null,t)),r.a.createElement("div",{className:"item"},r.a.createElement("span",null,"员工姓名："),r.a.createElement("span",null,a)),r.a.createElement("div",{className:"item"},r.a.createElement("span",null,"员工性别："),r.a.createElement("span",null,n)),r.a.createElement("div",{className:"item"},r.a.createElement("span",null,"       职级："),r.a.createElement("span",null,l))))}}]),t}(n.Component)),de=Object(l.connect)(function(e){return e.query},null)(me);a(1800);o.a.defaults({historyMode:"hash",middlewares:[]}),Object(l.render)(r.a.createElement(l.Router,null,r.a.createElement(function(){return r.a.createElement("div",{className:"route-content"},r.a.createElement(l.Route,{exact:!0,path:"/",component:se}),r.a.createElement(l.Route,{exact:!0,path:"/employee",component:de}))},null)),document.querySelector("#app"))}});
//# sourceMappingURL=index.js.map