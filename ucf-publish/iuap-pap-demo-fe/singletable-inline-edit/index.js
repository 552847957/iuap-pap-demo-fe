/*! build:ucf hash:e68ba93b8d9f266f6dde, chunkhash:629b58aae0f9d303a53f, name:singletable-inline-edit/index, filebase:index.js, query:, file:singletable-inline-edit/index.js */!function(e){function a(a){for(var n,l,o=a[0],c=a[1],s=a[2],u=0,p=[];u<o.length;u++)l=o[u],r[l]&&p.push(r[l][0]),r[l]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);for(d&&d(a);p.length;)p.shift()();return i.push.apply(i,s||[]),t()}function t(){for(var e,a=0;a<i.length;a++){for(var t=i[a],n=!0,o=1;o<t.length;o++){var c=t[o];0!==r[c]&&(n=!1)}n&&(i.splice(a--,1),e=l(l.s=t[0]))}return e}var n={},r={4:0},i=[];function l(a){if(n[a])return n[a].exports;var t=n[a]={i:a,l:!1,exports:{}};return e[a].call(t.exports,t,t.exports,l),t.l=!0,t.exports}l.m=e,l.c=n,l.d=function(e,a,t){l.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:t})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,a){if(1&a&&(e=l(e)),8&a)return e;if(4&a&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(l.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var n in e)l.d(t,n,function(a){return e[a]}.bind(null,n));return t},l.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(a,"a",a),a},l.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},l.p="";var o=window.webpackJsonp=window.webpackJsonp||[],c=o.push.bind(o);o.push=a,o=o.slice();for(var s=0;s<o.length;s++)a(o[s]);var d=c;i.push([1575,0]),t()}({1557:function(e,a,t){},1558:function(e,a,t){},1575:function(e,a,t){"use strict";t.r(a);t(161);var n=t(0),r=t.n(n),i=t(2),l=t.n(i),o=t(8),c=t.n(o),s=t(17),d=t.n(s),u=t(29),p=t.n(u),m=t(10),f=t.n(m),h=t(11),v=t.n(h),y=t(12),g=t.n(y),k=t(13),b=t.n(k),E=t(14),w=t.n(E),x=t(3),C=t(4),S=t.n(C),D=t(5),P=t(54),V=t(50),O=t(18),T=t(55),_=t(76),N=t(6),q=t.n(N),L=t(58),Y=t.n(L),j=t(25),I=t(62),A=t.n(I),F=t(47),G=t.n(F),M=t(53),U=t(105),H=t(131),R=j.a.Item,J=x.Select.Option,K=A.a.YearPicker,z=function(e){function a(e){var t;return f()(this,a),(t=g()(this,b()(a).call(this,e))).search=function(){var e=t.props,a=e.status;(0,e.form.validateFields)(function(e,n){n.year&&(n.year=n.year.format("YYYY")),n.dept&&(n.dept=JSON.parse(n.dept).refpk),"view"!=a?t.setState({show:!0,values:n}):t.getQuery(n,0)})},t.reset=function(){t.props.form.resetFields()},t.onClickGo=function(){t.getQuery(t.state.values,0),t.setState({show:!1}),i.actions.inlineEdit.updateState({status:"view",rowEditStatus:!0})},t.onClickCancel=function(){t.setState({show:!1})},t.getQuery=function(e,a){var n=Object(D.f)(t.props.queryParam),r=n.pageParams,l=n.whereParams;for(var o in l=Object(D.f)(l),r.pageIndex=0,e){var c=!0,s=!1,d=void 0;try{for(var u,p=l.entries()[Symbol.iterator]();!(c=(u=p.next()).done);c=!0){var m=Y()(u.value,2),f=m[0];if(o===m[1].key){l.splice(f,1);break}}}catch(e){s=!0,d=e}finally{try{c||null==p.return||p.return()}finally{if(s)throw d}}if((e[o]||0===e[o])&&0===a){var h="LIKE";["code","month"].includes(o)&&(h="EQ"),["serviceYearsCompany"].includes(o)&&(h="GTEQ"),l.push({key:o,value:e[o],condition:h})}}n.whereParams=l,0===a&&i.actions.inlineEdit.loadList(n)},t.state={show:!1},t}return w()(a,e),v()(a,[{key:"render",value:function(){var e=this.props,a=e.form.getFieldProps,t=e.searchOpen,n=e.onCallback;return r.a.createElement(U.a,{searchOpen:t,reset:this.reset,onCallback:n,search:this.search},r.a.createElement(j.a,{size:"sm"},r.a.createElement(R,{label:"员工编号"},r.a.createElement(x.FormControl,q()({placeholder:"精确查询"},a("code",{initialValue:""})))),r.a.createElement(R,{label:"员工姓名"},r.a.createElement(x.FormControl,q()({placeholder:"模糊查询"},a("name",{initialValue:""})))),r.a.createElement(R,{label:"部门"},r.a.createElement(M.a,a("dept",{initialValue:""}))),r.a.createElement(R,{label:"年份"},r.a.createElement(K,q()({},a("year",{initialValue:null}),{format:"YYYY",locale:G.a,placeholder:"选择年"}))),r.a.createElement(R,{label:"月份"},r.a.createElement(H.a,a("month",{initialValue:""}))),r.a.createElement(R,{label:"是否超标"},r.a.createElement(x.Select,a("exdeeds",{initialValue:""}),r.a.createElement(J,{value:""},"请选择"),r.a.createElement(J,{value:"0"},"未超标"),r.a.createElement(J,{value:"1"},"超标")))),r.a.createElement(T.a,{show:this.state.show,context:"数据未保存，确定查询 ?",confirmFn:this.onClickGo,cancelFn:this.onClickCancel}))}}]),a}(n.Component),Q=j.a.createForm()(z),W=t(186),B=t(26),X=t.n(B),Z=t(1),$=t.n(Z),ee=t(68),ae=t(67),te=(t(155),{value:$.a.any,onChange:$.a.func,className:$.a.string,field:$.a.string,index:$.a.number,message:$.a.string,data:$.a.array,required:$.a.bool,onValidate:$.a.func,isFlag:$.a.bool,validate:$.a.bool}),ne=function(e){function a(e){var t;return f()(this,a),(t=g()(this,b()(a).call(this,e))).handlerChange=function(e){var a=t.props,n=a.onChange,r=a.field,i=a.index,l=a.status;t.setState({value:e,flag:"edit"==l},function(){t.validate()}),n&&n(r,e,i)},t.validate=function(){var e=t.props,a=e.required,n=e.field,r=e.index,i=e.onValidate,l=t.state.value,o=X()({},n,{type:"number",required:a});new ee.a(o).validate(X()({},n,l),function(e,a){e?t.setState({error:!0}):t.setState({error:!1}),i&&i(n,a,r)})},t.state={value:e.value,flag:!1,error:!1},t}return w()(a,e),v()(a,[{key:"componentWillReceiveProps",value:function(e,a){1==e.validate&&this.validate()}},{key:"render",value:function(){var e=this.state,a=e.value,t=e.error,n=e.flag,i=this.props,l=i.className,o=i.message,c=i.required,s=i.data;return r.a.createElement(ae.a,{required:c,error:t,message:o,flag:n},r.a.createElement(x.Select,{className:l,value:a,onChange:this.handlerChange,data:s}))}}]),a}(n.Component);ne.propTypes=te,ne.defaultProps={field:"",index:"",message:"请选择此字段",data:[],required:!1,isFlag:!1,validate:!1,className:""};var re=ne,ie=t(160),le=t(183),oe=t.n(le).a.YearPicker,ce={value:$.a.any,onChange:$.a.func,className:$.a.string,field:$.a.string,index:$.a.number,message:$.a.string,data:$.a.array,required:$.a.bool,onValidate:$.a.func,isFlag:$.a.bool,validate:$.a.bool},se=function(e){function a(e){var t;return f()(this,a),(t=g()(this,b()(a).call(this,e))).handlerChange=function(e){var a=t.props,n=a.onChange,r=a.field,i=a.index,l=a.status;t.setState({value:e,flag:"edit"==l},function(){t.validate()}),n&&n(r,S()(e).format("YYYY"),i)},t.validate=function(){var e=t.props,a=e.required,n=e.field,r=e.index,i=e.onValidate,l=t.state.value,o=X()({},n,{type:"object",required:a});new ee.a(o).validate(X()({},n,l),function(e,a){e?t.setState({error:!0}):t.setState({error:!1}),i&&i(n,a,r)})},t.state={value:S()(e.value),flag:!1,error:!1},t}return w()(a,e),v()(a,[{key:"componentWillReceiveProps",value:function(e){1==e.validate&&this.validate()}},{key:"render",value:function(){var e=this.state,a=e.value,t=e.error,n=e.flag,i=this.props,l=i.className,o=i.message,c=i.required;return r.a.createElement(ae.a,{required:c,error:t,message:o,flag:n},r.a.createElement(oe,{className:l,value:a,onChange:this.handlerChange,format:"YYYY",locale:G.a,placeholder:"选择年"}))}}]),a}(n.Component);se.propTypes=ce,se.defaultProps={field:"",index:"",message:"请输入此字段",data:[],required:!1,isFlag:!1,validate:!1};var de=se,ue={value:$.a.any,onChange:$.a.func,className:$.a.string,field:$.a.string,index:$.a.number,message:$.a.string,data:$.a.array,required:$.a.bool,onValidate:$.a.func,isFlag:$.a.bool,validate:$.a.bool},pe=function(e){function a(e){var t;return f()(this,a),(t=g()(this,b()(a).call(this,e))).handlerChange=function(e){var a=t.props,n=a.onChange,r=a.field,i=a.index,l=a.status,o=JSON.parse(e).refpk;t.setState({value:e,flag:"edit"==l},function(){t.validate()}),n&&n(r,o,i)},t.validate=function(){var e=t.props,a=e.required,n=e.field,r=e.index,i=e.onValidate,l=t.state.value,o=X()({},n,{type:"string",required:a,pattern:/[^({"refname":"","refpk":""}|{"refpk":"","refname":""})]/});new ee.a(o).validate(X()({},n,l),function(e,a){e?t.setState({error:!0}):t.setState({error:!1}),i&&i(n,a,r)})},t.state={value:e.record.deptName?JSON.stringify({refpk:e.record.dept,refname:e.record.deptName}):"",flag:!1,error:!1},t}return w()(a,e),v()(a,[{key:"componentWillReceiveProps",value:function(e){1==e.validate&&this.validate()}},{key:"render",value:function(){var e=this.state,a=e.value,t=e.error,n=e.flag,i=this.props,l=i.className,o=i.message,c=i.required;return r.a.createElement(ae.a,{required:c,error:t,message:o,flag:n},r.a.createElement(M.a,{style:{width:"100%"},className:l,value:a,onChange:this.handlerChange}))}}]),a}(n.Component);pe.propTypes=ue,pe.defaultProps={field:"",index:"",message:"请选择部门参照",data:[],required:!1,isFlag:!1,validate:!1};var me=pe,fe={value:$.a.any,onChange:$.a.func,className:$.a.string,field:$.a.string,index:$.a.number,message:$.a.string,data:$.a.array,required:$.a.bool,onValidate:$.a.func,isFlag:$.a.bool,validate:$.a.bool},he=function(e){function a(e){var t;return f()(this,a),(t=g()(this,b()(a).call(this,e))).handlerChange=function(e){var a=t.props,n=a.onChange,r=a.field,i=a.index,l=a.status,o=JSON.parse(e).refpk;t.setState({value:e,flag:"edit"==l},function(){t.validate()}),n&&n(r,o,i)},t.validate=function(){var e=t.props,a=e.required,n=e.field,r=e.index,i=e.onValidate,l=t.state.value,o=X()({},n,{type:"string",required:a,pattern:/[^({"refname":"","refpk":""}|{"refpk":"","refname":""})]/});new ee.a(o).validate(X()({},n,l),function(e,a){e?t.setState({error:!0}):t.setState({error:!1}),i&&i(n,a,r)})},t.state={value:e.record.levelName?JSON.stringify({refpk:e.record.postLevel,refname:e.record.levelName}):"",flag:!1,error:!1},t}return w()(a,e),v()(a,[{key:"componentWillReceiveProps",value:function(e){1==e.validate&&this.validate()}},{key:"render",value:function(){var e=this.state,a=e.value,t=e.error,n=e.flag,i=this.props,l=i.className,o=i.message,c=i.required;return r.a.createElement(ae.a,{required:c,error:t,message:o,flag:n},r.a.createElement(M.b,{style:{width:"100%"},className:l,value:a,onChange:this.handlerChange}))}}]),a}(n.Component);he.propTypes=fe,he.defaultProps={field:"",index:"",message:"请选择职级参照",data:[],required:!1,isFlag:!1,validate:!1};var ve=he,ye=t(271),ge={name:{component:W.a,type:"text"},sex:{component:re,selectList:[{key:"请选择",value:"",disabled:!0},{key:"男",value:1},{key:"女",value:0}],type:"select"},serviceYears:{component:ie.a,props:{iconStyle:"one",max:99,min:0,step:1},type:"number"},serviceYearsCompany:{component:ie.a,props:{iconStyle:"one",max:99,min:0,step:1},type:"number"},month:{component:re,selectList:[{key:"请选择",value:"",disabled:!0},{key:"一月",value:1},{key:"二月",value:2},{key:"三月",value:3},{key:"四月",value:4},{key:"五月",value:5},{key:"六月",value:6},{key:"七月",value:7},{key:"八月",value:8},{key:"九月",value:9},{key:"十月",value:10},{key:"十一月",value:11},{key:"十二月",value:12}],type:"select"},allowanceType:{component:re,selectList:[{key:"请选择",value:"",disabled:!0},{key:"电脑补助",value:1},{key:"住宿补助",value:2},{key:"交通补助",value:3}],type:"select"},allowanceStandard:{component:ie.a,props:{max:999999,min:0,step:1,precision:2},type:"number"},allowanceActual:{component:ie.a,props:{max:999999,min:0,step:1,precision:2},type:"number"},exdeeds:{component:re,selectList:[{key:"请选择",value:"",disabled:!0},{key:"未超标",value:0},{key:"超标",value:1}],type:"select"},pickType:{component:re,selectList:[{key:"请选择",value:"",disabled:!0},{key:"转账",value:1},{key:"现金",value:2}],type:"select"},remark:{component:W.a,type:"text"},year:{component:de,type:"dateYear"},date:{component:ye.a,type:"date"},dept:{component:me,type:"ref",valueKey:"deptName"},level:{component:ve,type:"ref",valueKey:"levelName"}},ke=function(e){function a(e){var t;return f()(this,a),(t=g()(this,b()(a).call(this,e))).renderComp=function(){var e=t.props,a=e.type,n=e.value,i=e.record,l=ge[a];if(l){var o,c=l.component,s=l.type,d=l.props,u=d||{},p=i._edit,m=i._status,f=i._validate;switch(s){case"dateYear":case"date":case"text":o=n;break;case"number":o=d.precision&&d.precision>0?"number"==typeof n?n.toFixed(d.precision):"":n;break;case"select":var h=l.selectList.find(function(e){return e.value===n});o=h?h.key:"";break;case"ref":o=i[l.valueKey];break;default:o=""}return p?r.a.createElement(c,q()({status:m,validate:f},u,t.props,{data:l.selectList})):r.a.createElement("div",null,o)}return r.a.createElement("div",null,"组件类型错误")},t}return w()(a,e),v()(a,[{key:"render",value:function(){return r.a.createElement("div",null,this.renderComp())}}]),a}(n.Component),be=(t(1557),function(e){function a(e){var t;return f()(this,a),(t=g()(this,b()(a).call(this,e))).oldData=[],t.column=[{title:"员工编号",dataIndex:"code",key:"code",width:150},{title:"员工姓名",dataIndex:"name",key:"name",width:120,render:function(e,a,n){return r.a.createElement(ke,{type:"name",value:e,field:"name",index:n,required:!0,record:a,onChange:t.changeAllData,onValidate:t.onValidate})}},{title:"员工性别",dataIndex:"sexEnumValue",key:"sexEnumValue",width:120,render:function(e,a,n){return r.a.createElement(ke,{type:"sex",value:a.sex,field:"sex",index:n,required:!0,record:a,onChange:t.changeAllData,onValidate:t.onValidate})}},{title:"所属部门",dataIndex:"deptName",key:"deptName",width:120,render:function(e,a,n){return r.a.createElement(ke,{type:"dept",field:"dept",index:n,required:!0,record:a,onChange:t.changeAllData,onValidate:t.onValidate})}},{title:"职级",dataIndex:"levelName",key:"levelName",width:120,render:function(e,a,n){return r.a.createElement(ke,{type:"level",field:"postLevel",index:n,required:!0,record:a,onChange:t.changeAllData,onValidate:t.onValidate})}},{title:"工龄",dataIndex:"serviceYears",key:"serviceYears",width:130,className:"column-number-right ",render:function(e,a,n){return r.a.createElement(ke,{type:"serviceYears",value:e,field:"serviceYears",index:n,required:!0,record:a,onChange:t.changeAllData,onValidate:t.onValidate})}},{title:"司龄",dataIndex:"serviceYearsCompany",key:"serviceYearsCompany",width:130,className:"column-number-right ",render:function(e,a,n){return r.a.createElement(ke,{type:"serviceYearsCompany",value:e,field:"serviceYearsCompany",index:n,required:!0,record:a,onChange:t.changeAllData,onValidate:t.onValidate})}},{title:"年份",dataIndex:"year",key:"year",width:100,render:function(e,a,n){return r.a.createElement(ke,{type:"year",value:e,field:"year",index:n,required:!0,record:a,onChange:t.changeAllData,onValidate:t.onValidate})}},{title:"月份",dataIndex:"monthEnumValue",key:"monthEnumValue",width:120,render:function(e,a,n){return r.a.createElement(ke,{type:"month",value:a.month,field:"month",index:n,required:!0,record:a,onChange:t.changeAllData,onValidate:t.onValidate})}},{title:"补贴类别",dataIndex:"allowanceTypeEnumValue",key:"allowanceTypeEnumValue",width:120,render:function(e,a,n){return r.a.createElement(ke,{type:"allowanceType",value:a.allowanceType,field:"allowanceType",index:n,required:!0,record:a,onChange:t.changeAllData,onValidate:t.onValidate})}},{title:"补贴标准",dataIndex:"allowanceStandard",key:"allowanceStandard",width:120,className:"column-number-right ",render:function(e,a,n){return r.a.createElement(ke,{type:"allowanceStandard",value:e,field:"allowanceStandard",index:n,required:!0,record:a,onChange:t.changeAllData,onValidate:t.onValidate})}},{title:"实际补贴",dataIndex:"allowanceActual",key:"allowanceActual",width:120,className:"column-number-right ",render:function(e,a,n){return r.a.createElement(ke,{type:"allowanceActual",value:e,field:"allowanceActual",index:n,required:!0,record:a,onChange:t.changeAllData,onValidate:t.onValidate})}},{title:"是否超标",dataIndex:"exdeedsEnumValue",key:"exdeedsEnumValue",width:120,render:function(e,a,n){return r.a.createElement(ke,{type:"exdeeds",value:a.exdeeds,field:"exdeeds",index:n,required:!0,record:a,onChange:t.changeAllData,onValidate:t.onValidate})}},{title:"申请时间",dataIndex:"applyTime",key:"applyTime",width:200,render:function(e,a,t){return""!==e&&void 0!==e?r.a.createElement("div",null,S()(e).format("YYYY-MM-DD hh:mm:ss")):r.a.createElement("div",null)}},{title:"领取方式",dataIndex:"pickTypeEnumValue",key:"pickTypeEnumValue",width:120,render:function(e,a,n){return r.a.createElement(ke,{type:"pickType",value:a.pickType,field:"pickType",index:n,required:!0,record:a,onChange:t.changeAllData,onValidate:t.onValidate})}},{title:"领取时间",dataIndex:"pickTime",key:"pickTime",width:200,render:function(e,a,t){return""!==e&&void 0!==e?r.a.createElement("div",null,S()(e).format("YYYY-MM-DD hh:mm:ss")):r.a.createElement("div",null)}},{title:"备注",dataIndex:"remark",key:"remark",width:100,render:function(e,a,n){return r.a.createElement(ke,{type:"remark",value:e,field:"remark",index:n,required:!1,record:a,onChange:t.changeAllData,onValidate:t.onValidate})}}],t.changeAllData=function(e,a,n){var r=t.oldData,l=Object(D.f)(t.props.list);r[n][e]=a,l[n]._checked||(l[n]._checked=!0,i.actions.inlineEdit.updateState({list:l})),r[n]._checked=!0,t.oldData=r},t.onValidate=function(e,a,n){t.oldData.length>0&&(t.oldData[n]["_".concat(e,"Validate")]=null==a)},t.getSelectedDataFunc=function(e,a,n){var r=t.props.list,l=Object(D.f)(r);null!=n?l[n]._checked=!l[n]._checked:e.length>0?l.map(function(e){e._disabled||(e._checked=!0)}):l.map(function(e){e._disabled||(e._checked=!1)}),i.actions.inlineEdit.updateState({selectData:e,list:l})},t.freshData=function(e){t.onPageSelect(e,0)},t.onDataNumSelect=function(e,a){t.onPageSelect(a,1)},t.onPageSelect=function(e,a){var n=Object(D.f)(t.props.queryParam),r=Object(D.k)(e,a,n.pageParams),l=r.pageIndex,o=r.pageSize;n.pageParams={pageIndex:l,pageSize:o},i.actions.inlineEdit.updateState(n),i.actions.inlineEdit.loadList(n)},t.filterArrayNull=function(e){return e.filter(function(e){return null!=e})},t.hasCheck=function(){var e=t.props,a=e.selectData,n=e.list,r=!1;return a.forEach(function(e){1==e._checked&&(r=!0)}),n.forEach(function(e){1==e._checked&&(r=!0)}),r},t.newDataTmp={_edit:!0,_isNew:!0,_checked:!1,_disabled:!1,_flag:!1,code:"",name:"",sex:"",sexEnumValue:"",deptName:"",levelName:"",serviceYears:0,serviceYearsCompany:0,year:S()().format("YYYY"),month:"",monthEnumValue:"",allowanceType:"",allowanceTypeEnumValue:"",allowanceStandard:0,allowanceActual:0,exdeeds:"",exdeedsEnumValue:"",pickType:"",pickTypeEnumValue:"",remark:""},t.handlerNew=function(){var e=Object(D.f)(t.props.list),a=p()({key:Object(D.r)()},t.newDataTmp);t.oldData.length<=0&&(e.forEach(function(e){e._disabled=!0,e._checked=!1}),t.grid.resetColumns(t.column)),t.oldData.unshift(a),e.unshift(a),i.actions.inlineEdit.updateState({list:e,status:"new",rowEditStatus:!1,selectData:[]})},t.onClickUpdate=function(){var e=t.props.list.map(function(e){return e._edit=!0,e._checked=!1,e._status="edit",e});t.grid.resetColumns(t.column),t.oldData=Object(D.f)(e),i.actions.inlineEdit.updateState({list:e,status:"edit",rowEditStatus:!1})},t.onClickDownloadTemplate=function(){window.open("".concat("/iuap-pap-demo-be","/inline_allowances/excelTemplateDownload"))},t.filterList=function(e,a,t){var n=a.slice(),r=[];return e.forEach(function(e){n.forEach(function(a,n){e[t]===a[t]&&a._checked&&(a._validate=!0,r.push(e))})}),{newList:n,selectList:r}},t.isVerifyData=function(e){var a=!0,t=/Validate\b/;return e.forEach(function(n,r){var i=Object.keys(n);if(a)for(var l=0;l<i.length;l++)if(t.test(i[l])){if(!e[r][i[l]]){a=!1;break}a=!0}}),a},t.onClickSave=d()(c.a.mark(function e(){var a,n,r,l,o,s;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.props,n=a.status,r=a.list,l=null,o=null,s="请勾选数据后再新增",e.t0=n,e.next="new"===e.t0?7:"edit"===e.t0?10:14;break;case 7:return l=t.filterList(t.oldData,r,"key"),o=i.actions.inlineEdit.adds,e.abrupt("break",15);case 10:return l=t.filterList(t.oldData,r,"id"),o=i.actions.inlineEdit.updates,s="请勾选数据后再更新",e.abrupt("break",15);case 14:return e.abrupt("break",15);case 15:if(!(l.selectList.length>0)){e.next=28;break}return e.next=18,i.actions.inlineEdit.updateState({list:l.newList});case 18:if(!t.isVerifyData(l.selectList)){e.next=25;break}return e.next=21,o(l.selectList);case 21:e.sent&&(t.oldData=[]),e.next=26;break;case 25:Object(D.b)("数据填写不完整");case 26:e.next=29;break;case 28:Object(D.b)(s);case 29:case"end":return e.stop()}},e)})),t.onClickDelConfirm=function(){t.props.selectData.length>0?t.setState({showPop:!0}):Object(D.b)("请勾选数据后再删除")},t.onClickDel=d()(c.a.mark(function e(){var a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.props.selectData,e.next=3,i.actions.inlineEdit.removes(a);case 3:e.sent&&(t.oldData=[]),t.setState({showPop:!1});case 6:case"end":return e.stop()}},e)})),t.onClickPopCancel=function(){t.setState({showPop:!1})},t.onClickCancel=function(){t.hasCheck()?t.setState({showPopCancel:!0}):(t.oldData=[],i.actions.inlineEdit.resetData(!0),i.actions.inlineEdit.updateState({selectData:[],rowEditStatus:!0}))},t.onClickPopUnSaveOK=function(){i.actions.inlineEdit.resetData(!0),i.actions.inlineEdit.updateState({selectData:[],rowEditStatus:!0}),t.setState({showPopCancel:!1}),t.oldData=[]},t.onClickPopUnSaveCancel=function(){t.setState({showPopCancel:!1})},t.onClickExport=function(){t.grid.exportExcel()},t.resetTableHeight=function(e){var a=0;a=e?Object(D.j)()-420:Object(D.j)()-270,t.setState({tableHeight:a})},t.state={tableHeight:0,showPop:!1,showPopCancel:!1,validate:!1},t}return w()(a,e),v()(a,[{key:"componentWillMount",value:function(){this.resetTableHeight(!0)}},{key:"componentDidMount",value:function(){i.actions.inlineEdit.loadList(this.props.queryParam)}},{key:"render",value:function(){var e=this,a=this.state,t=a.showPop,n=a.showPopCancel,i=a.tableHeight,l=this.props,o=l.list,c=l.showLoading,s=l.pageIndex,d=l.pageSize,u=l.totalPages,p=l.total,m=l.status,f=l.rowEditStatus,h=l.queryParam,v={activePage:s,total:p,items:u,freshData:this.freshData,onDataNumSelect:this.onDataNumSelect,disabled:"view"!==m};return r.a.createElement("div",{className:"inline-edit"},r.a.createElement(V.a,{title:"A2单表行内编辑示例"}),r.a.createElement(Q,{queryParam:h,status:m,pageSize:d,searchOpen:!0,onCallback:this.resetTableHeight}),r.a.createElement("div",{className:"table-header"},r.a.createElement(_.a,{funcCode:"singletable-inlineEdit",onComplete:function(){return console.log("按钮权限加载完成")}},r.a.createElement(O.a,{role:"add",disabled:Object(D.h)("add",m),className:"ml8",colors:"primary",onClick:this.handlerNew},"新增"),r.a.createElement(O.a,{role:"update",shape:"border",disabled:Object(D.h)("edit",m),className:"ml8",onClick:this.onClickUpdate},"修改"),r.a.createElement(O.a,{role:"delete",shape:"border",disabled:Object(D.h)("del",m),className:"ml8",onClick:this.onClickDelConfirm},"删除"),r.a.createElement(O.a,{shape:"border",disabled:Object(D.h)("export",m),className:"ml8",onClick:this.onClickExport},"导出"),r.a.createElement(O.a,{shape:"border",disabled:Object(D.h)("save",m),className:"ml8",onClick:this.onClickSave},"保存"),r.a.createElement(O.a,{shape:"border",disabled:Object(D.h)("cancel",m),className:"ml8",onClick:this.onClickCancel},"取消"),r.a.createElement(T.a,{show:n,context:"数据未保存，确定离开 ?",confirmFn:this.onClickPopUnSaveOK,cancelFn:this.onClickPopUnSaveCancel}))),r.a.createElement("div",{className:"grid-parent"},r.a.createElement(P.a,{ref:function(a){return e.grid=a},data:o,rowKey:function(e){return e.id?e.id:e.key},columns:this.column,paginationObj:v,columnFilterAble:f,showHeaderMenu:f,dragborder:f,draggable:f,syncHover:f,getSelectedDataFunc:this.getSelectedDataFunc,scroll:{y:i}})),r.a.createElement(T.a,{show:t,context:"是否要删除 ?",confirmFn:this.onClickDel,cancelFn:this.onClickPopCancel}),r.a.createElement(x.Loading,{fullScreen:!0,show:c}))}}]),a}(n.Component)),Ee=t(21),we=(t(104),{GET_LIST:"".concat("/iuap-pap-demo-be","/inline_allowances/list"),GET_ADD:"".concat("/iuap-pap-demo-be","/inline_allowances/saveMultiple"),GET_UPDATE:"".concat("/iuap-pap-demo-be","/inline_allowances/updateMultiple"),GET_DELETE:"".concat("/iuap-pap-demo-be","/inline_allowances/deleteBatch"),GET_LIST_BY_COL:"".concat("/iuap-pap-demo-be","/inline_allowances/listByColumn"),GET_TOEXPORTEXCEL:"".concat("/iuap-pap-demo-be","/inline_allowances/toExportExcel")}),xe=function(e){var a=Object.assign({},e),t=Object(D.f)(a.pageParams);return delete a.pageParams,Object(Ee.a)(we.GET_LIST,{method:"post",data:a,param:t})},Ce=(window[window.webkitURL?"webkitURL":"URL"],{name:"inlineEdit",initialState:{cacheData:[],tableData:[],selectData:[],status:"view",rowEditStatus:!0,showLoading:!1,list:[],totalPages:1,total:0,queryParam:{pageParams:{pageIndex:0,pageSize:25},whereParams:[]}},reducers:{updateState:function(e,a){return p()({},e,a)}},effects:{loadList:function(){var e=d()(c.a.mark(function e(a,t){var n,r,l,o,s,d,u,p,m,f,h,v;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.actions.inlineEdit.updateState({showLoading:!0,status:"view",rowEditStatus:!0,selectData:[]}),n=t().inlineEdit,r=a||n.queryParam,e.t0=D.o,e.next=6,xe(r);case 6:e.t1=e.sent,l=(0,e.t0)(e.t1),o=l.result,s=o.data,d={showLoading:!1},u=null,s?(p=s.content,m=s.number,f=s.totalPages,h=s.totalElements,v=m+1,u=Object.assign({},d,{list:p,pageIndex:v,totalPages:f,total:h,queryParam:r,cacheData:p})):u=d,i.actions.inlineEdit.updateState(u);case 14:case"end":return e.stop()}},e)}));return function(a,t){return e.apply(this,arguments)}}(),adds:function(){var e=d()(c.a.mark(function e(a){var t,n,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.actions.inlineEdit.updateState({showLoading:!0}),e.t0=D.o,e.next=4,l=a,Object(Ee.a)(we.GET_ADD,{method:"post",data:l});case 4:if(e.t1=e.sent,t=(0,e.t0)(e.t1,"保存成功"),n=t.result,r=n.status,i.actions.inlineEdit.updateState({showLoading:!1}),"success"!==r){e.next=14;break}return i.actions.inlineEdit.loadList(),e.abrupt("return",!0);case 14:return e.abrupt("return",!1);case 15:case"end":return e.stop()}var l},e)}));return function(a){return e.apply(this,arguments)}}(),removes:function(){var e=d()(c.a.mark(function e(a,t){var n,r,l,o,s,d,u,p;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.actions.inlineEdit.updateState({showLoading:!0}),e.t0=D.o,e.next=4,c=a,Object(Ee.a)(we.GET_DELETE,{method:"post",data:c});case 4:if(e.t1=e.sent,n=(0,e.t0)(e.t1,"删除成功"),r=n.result,l=r.status,i.actions.inlineEdit.updateState({showLoading:!1}),"success"!==l){e.next=18;break}return o=t().inlineEdit,s=o.queryParam,d=o.list,u=o.totalPages,(p=s.pageParams.pageIndex)>0&&p+1===u&&a.length===d.length&&(s.pageParams.pageIndex=p-1),i.actions.inlineEdit.loadList(s),e.abrupt("return",!0);case 18:return e.abrupt("return",!1);case 19:case"end":return e.stop()}var c},e)}));return function(a,t){return e.apply(this,arguments)}}(),updates:function(){var e=d()(c.a.mark(function e(a){var t,n,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.actions.inlineEdit.updateState({showLoading:!0}),e.t0=D.o,e.next=4,l=a,Object(Ee.a)(we.GET_UPDATE,{method:"post",data:l});case 4:if(e.t1=e.sent,t=(0,e.t0)(e.t1,"更新成功"),n=t.result,r=n.status,i.actions.inlineEdit.updateState({showLoading:!1}),"success"!==r){e.next=14;break}return i.actions.inlineEdit.loadList(),e.abrupt("return",!0);case 14:return e.abrupt("return",!1);case 15:case"end":return e.stop()}var l},e)}));return function(a){return e.apply(this,arguments)}}(),resetData:function(e,a){var t=a().inlineEdit.cacheData.slice();t.forEach(function(e){delete e._edit});var n={list:t};e&&(n.status="view"),i.actions.inlineEdit.updateState(n)}}});l.a.model(Ce);var Se=Object(i.connect)(function(e){return e.inlineEdit},null)(be);t(1558);Object(i.render)(r.a.createElement(Se,null),document.querySelector("#app"))}});
//# sourceMappingURL=index.js.map