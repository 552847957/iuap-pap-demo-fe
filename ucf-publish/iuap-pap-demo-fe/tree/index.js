<<<<<<< HEAD
/*! build:ucf hash:1bce2cbc62b120d1f8a5, chunkhash:97355ac0c1a9438cff01, name:tree/index, filebase:index.js, query:, file:tree/index.js */!function(O){function e(e){for(var t,a,n=e[0],r=e[1],o=e[2],c=0,i=[];c<n.length;c++)a=n[c],F[a]&&i.push(F[a][0]),F[a]=0;for(t in r)Object.prototype.hasOwnProperty.call(r,t)&&(O[t]=r[t]);for(y&&y(e);i.length;)i.shift()();return b.push.apply(b,o||[]),s()}function s(){for(var e,t=0;t<b.length;t++){for(var a=b[t],n=!0,r=1;r<a.length;r++){var o=a[r];0!==F[o]&&(n=!1)}n&&(b.splice(t--,1),e=R(R.s=a[0]))}return e}var a=window.webpackHotUpdate;window.webpackHotUpdate=function(e,t){!function(e,t){if(!L[e]||!p[e])return;for(var a in p[e]=!1,t)Object.prototype.hasOwnProperty.call(t,a)&&(H[a]=t[a]);0==--l&&0===d&&h()}(e,t),a&&a(e,t)};var o,n=!0,_="1bce2cbc62b120d1f8a5",t=1e4,k={},A=[],r=[];var c=[],I="idle";function C(e){I=e;for(var t=0;t<c.length;t++)c[t].call(null,e)}var i,H,N,l=0,d=0,u={},p={},L={};function q(e){return+e+""===e?+e:e}function m(e){if("idle"!==I)throw new Error("check() is only allowed in idle status");return n=e,C("check"),(o=t,o=o||1e4,new Promise(function(t,a){if("undefined"==typeof XMLHttpRequest)return a(new Error("No browser support"));try{var n=new XMLHttpRequest,r=R.p+""+_+".hot-update.json";n.open("GET",r,!0),n.timeout=o,n.send(null)}catch(e){return a(e)}n.onreadystatechange=function(){if(4===n.readyState)if(0===n.status)a(new Error("Manifest request to "+r+" timed out."));else if(404===n.status)t();else if(200!==n.status&&304!==n.status)a(new Error("Manifest request to "+r+" failed."));else{try{var e=JSON.parse(n.responseText)}catch(e){return void a(e)}t(e)}}})).then(function(e){if(!e)return C("idle"),null;p={},u={},L=e.c,N=e.h,C("prepare");var t=new Promise(function(e,t){i={resolve:e,reject:t}});for(var a in H={},F)f(a);return"prepare"===I&&0===d&&0===l&&h(),t});var o}function f(e){var t,a;L[e]?(p[e]=!0,l++,t=e,(a=document.createElement("script")).charset="utf-8",a.src=R.p+""+t+"."+_+".hot-update.js",document.head.appendChild(a)):u[e]=!0}function h(){C("ready");var t=i;if(i=null,t)if(n)Promise.resolve().then(function(){return g(n)}).then(function(e){t.resolve(e)},function(e){t.reject(e)});else{var e=[];for(var a in H)Object.prototype.hasOwnProperty.call(H,a)&&e.push(q(a));t.resolve(e)}}function g(a){if("ready"!==I)throw new Error("apply() is only allowed in ready status");var e,t,n,d,r;function o(e){for(var t=[e],a={},n=t.slice().map(function(e){return{chain:[e],id:e}});0<n.length;){var r=n.pop(),o=r.id,c=r.chain;if((d=V[o])&&!d.hot._selfAccepted){if(d.hot._selfDeclined)return{type:"self-declined",chain:c,moduleId:o};if(d.hot._main)return{type:"unaccepted",chain:c,moduleId:o};for(var i=0;i<d.parents.length;i++){var s=d.parents[i],l=V[s];if(l){if(l.hot._declinedDependencies[o])return{type:"declined",chain:c.concat([s]),moduleId:o,parentId:s};-1===t.indexOf(s)&&(l.hot._acceptedDependencies[o]?(a[s]||(a[s]=[]),u(a[s],[o])):(delete a[s],t.push(s),n.push({chain:c.concat([s]),id:s})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:a}}function u(e,t){for(var a=0;a<t.length;a++){var n=t[a];-1===e.indexOf(n)&&e.push(n)}}a=a||{};var c={},i=[],s={},l=function(){console.warn("[HMR] unexpected require("+m.moduleId+") to disposed module")};for(var p in H)if(Object.prototype.hasOwnProperty.call(H,p)){var m;r=q(p);var f=!1,h=!1,g=!1,b="";switch((m=H[p]?o(r):{type:"disposed",moduleId:p}).chain&&(b="\nUpdate propagation: "+m.chain.join(" -> ")),m.type){case"self-declined":a.onDeclined&&a.onDeclined(m),a.ignoreDeclined||(f=new Error("Aborted because of self decline: "+m.moduleId+b));break;case"declined":a.onDeclined&&a.onDeclined(m),a.ignoreDeclined||(f=new Error("Aborted because of declined dependency: "+m.moduleId+" in "+m.parentId+b));break;case"unaccepted":a.onUnaccepted&&a.onUnaccepted(m),a.ignoreUnaccepted||(f=new Error("Aborted because "+r+" is not accepted"+b));break;case"accepted":a.onAccepted&&a.onAccepted(m),h=!0;break;case"disposed":a.onDisposed&&a.onDisposed(m),g=!0;break;default:throw new Error("Unexception type "+m.type)}if(f)return C("abort"),Promise.reject(f);if(h)for(r in s[r]=H[r],u(i,m.outdatedModules),m.outdatedDependencies)Object.prototype.hasOwnProperty.call(m.outdatedDependencies,r)&&(c[r]||(c[r]=[]),u(c[r],m.outdatedDependencies[r]));g&&(u(i,[m.moduleId]),s[r]=l)}var v,E=[];for(t=0;t<i.length;t++)r=i[t],V[r]&&V[r].hot._selfAccepted&&E.push({module:r,errorHandler:V[r].hot._selfAccepted});C("dispose"),Object.keys(L).forEach(function(e){!1===L[e]&&delete F[e]});for(var w,y,T=i.slice();0<T.length;)if(r=T.pop(),d=V[r]){var x={},j=d.hot._disposeHandlers;for(n=0;n<j.length;n++)(e=j[n])(x);for(k[r]=x,d.hot.active=!1,delete V[r],delete c[r],n=0;n<d.children.length;n++){var D=V[d.children[n]];D&&(0<=(v=D.parents.indexOf(r))&&D.parents.splice(v,1))}}for(r in c)if(Object.prototype.hasOwnProperty.call(c,r)&&(d=V[r]))for(y=c[r],n=0;n<y.length;n++)w=y[n],0<=(v=d.children.indexOf(w))&&d.children.splice(v,1);for(r in C("apply"),_=N,s)Object.prototype.hasOwnProperty.call(s,r)&&(O[r]=s[r]);var S=null;for(r in c)if(Object.prototype.hasOwnProperty.call(c,r)&&(d=V[r])){y=c[r];var M=[];for(t=0;t<y.length;t++)if(w=y[t],e=d.hot._acceptedDependencies[w]){if(-1!==M.indexOf(e))continue;M.push(e)}for(t=0;t<M.length;t++){e=M[t];try{e(y)}catch(e){a.onErrored&&a.onErrored({type:"accept-errored",moduleId:r,dependencyId:y[t],error:e}),a.ignoreErrored||S||(S=e)}}}for(t=0;t<E.length;t++){var P=E[t];r=P.module,A=[r];try{R(r)}catch(t){if("function"==typeof P.errorHandler)try{P.errorHandler(t)}catch(e){a.onErrored&&a.onErrored({type:"self-accept-error-handler-errored",moduleId:r,error:e,originalError:t}),a.ignoreErrored||S||(S=e),S||(S=t)}else a.onErrored&&a.onErrored({type:"self-accept-errored",moduleId:r,error:t}),a.ignoreErrored||S||(S=t)}}return S?(C("fail"),Promise.reject(S)):(C("idle"),new Promise(function(e){e(i)}))}var V={},F={7:0},b=[];function R(e){if(V[e])return V[e].exports;var t,n,a=V[e]={i:e,l:!1,exports:{},hot:(t=e,n={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:o!==t,active:!0,accept:function(e,t){if(void 0===e)n._selfAccepted=!0;else if("function"==typeof e)n._selfAccepted=e;else if("object"==typeof e)for(var a=0;a<e.length;a++)n._acceptedDependencies[e[a]]=t||function(){};else n._acceptedDependencies[e]=t||function(){}},decline:function(e){if(void 0===e)n._selfDeclined=!0;else if("object"==typeof e)for(var t=0;t<e.length;t++)n._declinedDependencies[e[t]]=!0;else n._declinedDependencies[e]=!0},dispose:function(e){n._disposeHandlers.push(e)},addDisposeHandler:function(e){n._disposeHandlers.push(e)},removeDisposeHandler:function(e){var t=n._disposeHandlers.indexOf(e);0<=t&&n._disposeHandlers.splice(t,1)},check:m,apply:g,status:function(e){if(!e)return I;c.push(e)},addStatusHandler:function(e){c.push(e)},removeStatusHandler:function(e){var t=c.indexOf(e);0<=t&&c.splice(t,1)},data:k[t]},o=void 0,n),parents:(r=A,A=[],r),children:[]};return O[e].call(a.exports,a,a.exports,function(t){var a=V[t];if(!a)return R;var n=function(e){return a.hot.active?(V[e]?-1===V[e].parents.indexOf(t)&&V[e].parents.push(t):(A=[t],o=e),-1===a.children.indexOf(e)&&a.children.push(e)):(console.warn("[HMR] unexpected require("+e+") from disposed module "+t),A=[]),R(e)},e=function(t){return{configurable:!0,enumerable:!0,get:function(){return R[t]},set:function(e){R[t]=e}}};for(var r in R)Object.prototype.hasOwnProperty.call(R,r)&&"e"!==r&&"t"!==r&&Object.defineProperty(n,r,e(r));return n.e=function(e){return"ready"===I&&C("prepare"),d++,R.e(e).then(t,function(e){throw t(),e});function t(){d--,"prepare"===I&&(u[e]||f(e),0===d&&0===l&&h())}},n.t=function(e,t){return 1&t&&(e=n(e)),R.t(e,-2&t)},n}(e)),a.l=!0,a.exports}R.m=O,R.c=V,R.d=function(e,t,a){R.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},R.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},R.t=function(t,e){if(1&e&&(t=R(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(R.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)R.d(a,n,function(e){return t[e]}.bind(null,n));return a},R.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return R.d(t,"a",t),t},R.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},R.p="",R.h=function(){return _};var v=window.webpackJsonp=window.webpackJsonp||[],E=v.push.bind(v);v.push=e,v=v.slice();for(var w=0;w<v.length;w++)e(v[w]);var y=E;b.push([1615,0]),s()}({1604:function(e,t,a){},1605:function(e,t,a){},1606:function(e,t,a){},1607:function(e,t,a){},1615:function(e,t,a){"use strict";a.r(t);a(165);var n,r,o,c,i,s,l,d=a(0),g=a.n(d),T=a(3),u=a.n(T),b=a(2),p=a(6),v=a.n(p),m=a(9),x=a.n(m),f=a(18),h=a.n(f),E=a(11),w=a.n(E),y=a(12),j=a.n(y),D=a(13),S=a.n(D),M=a(14),P=a.n(M),O=a(33),_=a.n(O),k=a(15),A=a.n(k),I=a(4),C=a(51),H=a(55),N=a(26),L=a(67),q=a(7),V=(a(1604),N.a.Item),F=I.Select.Option,R=[g.a.createElement(b.a,{id:"js.com.Com.0001",defaultMessage:"新增"}),g.a.createElement(b.a,{id:"js.com.Com.0002",defaultMessage:"修改"}),g.a.createElement(b.a,{id:"js.com.Com.0003",defaultMessage:"详情"})],B=function(e){function t(e){var m;return w()(this,t),(m=S()(this,P()(t).call(this,e))).onCloseEdit=function(){var e,t=m.props.comModalParam;e=Object.assign({},t,{showModal:!1,btnFlag:0}),T.actions.walsinTree.updateState({comModalParam:e,showLoading:!1})},m.onSubmitEdit=h()(x.a.mark(function e(){var p;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(p=_()(m)).props.form.validateFields(function(){var a=h()(x.a.mark(function e(t,a){var n,r,o,c,i,s,l,d,u;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t)return e.abrupt("return");e.next=4;break;case 4:return e.next=6,T.actions.walsinTree.updateState({showLoading:!0});case 6:if(n=p.props||{},r=n.comModalParam,o=n.paginationParam,i=(c=r||{}).initEditValue,s=c.btnFlag,l=o.reqParam||{},d=l.search_treeId,u={},console.log("onsave oldData",i),s||d){e.next=13;break}return p.onCloseEdit(),T.actions.walsinTree.updateState({showLoading:!1}),Object(q.a)(m.props.intl.formatMessage({id:"js.com.Com.0004",defaultMessage:"请选择树节点"})),e.abrupt("return");case 13:if(p.handleIntData(a),u=Object.assign({},{treeId:d},i,a),s)return e.next=18,T.actions.walsinTree.addEditData(u);e.next=20;break;case 18:e.next=22;break;case 20:return e.next=22,T.actions.walsinTree.addTableData(u);case 22:p.onCloseEdit();case 23:case"end":return e.stop()}},e)}));return function(e,t){return a.apply(this,arguments)}}());case 2:case"end":return e.stop()}},e)})),m.handleIntData=function(e){for(var t=0,a=["age"];t<a.length;t++){var n=a[t];void 0!==e[n]&&(e[n]=Number(e[n]))}},m.onHideEdit=function(){m.onCloseEdit()},m.onHandleBtns=function(e){return 2==e?[]:m.defaultBtnConfig},m.defaultBtnConfig=[{label:g.a.createElement(b.a,{id:"js.com.Com.0005",defaultMessage:"取消"}),fun:m.onCloseEdit,shape:"border"},{label:g.a.createElement(b.a,{id:"js.com.Com.0006",defaultMessage:"确定"}),fun:m.onSubmitEdit,colors:"primary"}],m.state={},m}return A()(t,e),j()(t,[{key:"render",value:function(){var e=this.props,t=e.form,a=e.comModalParam||{},n=a.showModal,r=void 0!==n&&n,o=a.initEditValue,c=void 0===o?{}:o,i=a.btnFlag,s=void 0===i?0:i,l=t.getFieldProps,d=t.getFieldError,u=c||{},p=u.name,m=u.sex,f=u.age,h=this.onHandleBtns(s);return g.a.createElement(L.a,{show:r,title:R[s],size:"lg",btns:h,close:this.onCloseEdit},g.a.createElement(N.a,null,g.a.createElement(V,{required:!0,label:g.a.createElement(b.a,{id:"js.com.Com.0007",defaultMessage:"员工姓名"})},g.a.createElement(I.FormControl,v()({disabled:2==s},l("name",{validateTrigger:"onBlur",initialValue:p||"",rules:[{type:"string",required:!0,pattern:/\S+/gi,message:g.a.createElement(b.a,{id:"js.com.Com.0008",defaultMessage:"请输入员工姓名"})}]}))),g.a.createElement("span",{className:"error"},d("name"))),g.a.createElement(V,{required:!0,label:g.a.createElement(b.a,{id:"js.com.Com.0009",defaultMessage:"员工性别"})},g.a.createElement(I.Select,v()({disabled:2==s},l("sex",{initialValue:m||1,rules:[{required:!0,message:g.a.createElement(b.a,{id:"js.com.Com.0010",defaultMessage:"请选择员工性别"})}]})),g.a.createElement(F,{value:1},g.a.createElement(b.a,{id:"js.com.Com.0011",defaultMessage:"女"})),g.a.createElement(F,{value:2},g.a.createElement(b.a,{id:"js.com.Com.0012",defaultMessage:"男"}))),g.a.createElement("span",{className:"error"},d("sex"))),g.a.createElement(V,{required:!0,label:g.a.createElement(b.a,{id:"js.com.Com.0013",defaultMessage:"年龄"})},g.a.createElement(I.InputNumber,v()({iconStyle:"one",min:1,step:1,max:99,disabled:2==s},l("age",{initialValue:f||"",rules:[{type:"number",max:99,transform:function(e){return 1*e},pattern:/^[0-9]+$/,required:!0,message:g.a.createElement(b.a,{id:"js.com.Com.0014",defaultMessage:"年龄需小于100"})}]}))),g.a.createElement("span",{className:"error"},d("age")))))}}]),t}(d.Component),K=N.a.createForm()(Object(b.d)(B)),z=a(19),G=a(56),U=a(78),W=(a(1605),function(e){function t(e){var l;return w()(this,t),(l=S()(this,P()(t).call(this,e))).getSelectedDataFunc=function(e){console.log("selvalue",e),T.actions.walsinTree.updateState({tableSelValue:e})},l.freshData=function(e){l.onPageSelect(e,0)},l.onDataNumSelect=function(e,t){l.onPageSelect(t,1)},l.onPageSelect=function(e,t){var a=_()(l),n=a.props.paginationParam,r=n.reqParam&&Object(q.f)(n.reqParam)||{};console.log("paginationParam",n);var o=Object(q.k)(e,t,r),c=o.pageIndex,i=o.pageSize;r.pageIndex=c,r.pageSize=i,T.actions.walsinTree.loadTable(r),a.resetSelData()},l.onCommonClick=function(s){return function(e){var t=_()(l).props,a=t.comModalParam,n=t.paginationParam,r=t.tableSelValue,o=t.intl,c={},i=r.length;if(a=Object(q.f)(a),0<s){if(!Array.isArray(r)||!i)return void Object(q.c)(o.formatMessage({id:"js.com.Tre.0005",defaultMessage:"请选择表数据"}));if(1<i)return void Object(q.c)(o.formatMessage({id:"js.com.Tre.0004",defaultMessage:"请选择单条表数据"}));c=Object.assign({},a,{showModal:!0,initEditValue:r[0],btnFlag:s})}else{void 0!==n.reqParam&&n.reqParam.search_treeId||""?c={showModal:!0,btnFlag:s,initEditValue:{}}:Object(q.c)(o.formatMessage({id:"js.com.Tre.0006",defaultMessage:"请选择表数据所属树节点"}))}T.actions.walsinTree.updateState({comModalParam:c})}},l.onDelete=h()(x.a.mark(function e(){var t,a,n;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l.props,a=t.tableSelValue,n=t.intl,Array.isArray(a)&&0<a.length)return e.next=4,T.actions.walsinTree.updateState({delModal:!0});e.next=6;break;case 4:e.next=7;break;case 6:Object(q.c)(n.formatMessage({id:"js.com.Tre.0007",defaultMessage:"请选择数据"}));case 7:case"end":return e.stop()}},e)})),l.onModalDel=function(){var t=h()(x.a.mark(function e(t){var a,n;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=_()(l),n=a.props.tableSelValue,t)return e.next=5,T.actions.walsinTree.updateState({showLoading:!0});e.next=10;break;case 5:return e.next=7,T.actions.walsinTree.delTableData(n);case 7:a.closeModal(),e.next=11;break;case 10:a.closeModal();case 11:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}(),l.closeModal=h()(x.a.mark(function e(){return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.actions.walsinTree.updateState({showLoading:!1,delModal:!1});case 2:case"end":return e.stop()}},e)})),l.onExport=function(){l.grid.exportExcel()},l.resetSelData=function(){T.actions.walsinTree.updateState({tableSelValue:[]})},l.onHandleDisabled=function(){var e=l.props.tableSelValue.length;return e?1==e?{0:!1,1:!1,2:!1,3:!1}:{0:!1,1:!0,2:!0,3:!1}:{0:!1,1:!0,2:!0,3:!0}},l.getHeight=function(){var e,t=Math.max(document.body.clientHeight,document.documentElement.clientHeight),a=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight);e=(t<a&&t||a)-42-58-43-42-32,l.setState({tableHeight:e})},l.state={tableHeight:500},l.grid=null,l.column=[{title:g.a.createElement(b.a,{id:"js.com.Tre.0001",defaultMessage:"姓名"}),dataIndex:"name",key:"name",width:200},{title:g.a.createElement(b.a,{id:"js.com.Tre.0002",defaultMessage:"性别"}),dataIndex:"sexEnumValue",key:"sexEnumValue",width:200},{title:g.a.createElement(b.a,{id:"js.com.Tre.0003",defaultMessage:"年龄"}),dataIndex:"age",key:"age",width:200}],l}return A()(t,e),j()(t,[{key:"componentWillMount",value:function(){var e=this;e.getHeight(),window.onresize=function(){e.getHeight()}}},{key:"componentWillUnmount",value:function(){window.onresize={}}},{key:"componentDidMount",value:function(){var e=this.props.paginationParam;T.actions.walsinTree.loadTable(e.reqParam||{pageIndex:0,pageSize:25}),this.resetSelData()}},{key:"render",value:function(){var t=this,e=this,a=e.props,n=a.tableData,r=void 0===n?[]:n,o=a.paginationParam,c=a.delModal,i=(o.reqParam||{}).pageIndex,s=o.resParam||{},l=s.totalPages,d=void 0===l?0:l,u=s.total,p={activePage:i+1,total:void 0===u?0:u,items:d,freshData:e.freshData,onDataNumSelect:e.onDataNumSelect},m=e.onHandleDisabled(),f=e.state.tableHeight;return g.a.createElement("div",{className:"tree-table"},g.a.createElement("div",{className:"table-header"},g.a.createElement(U.a,{funcCode:"tree"},g.a.createElement(z.a,{colors:"primary",style:{margin:8},onClick:e.onCommonClick(0),role:"add",disabled:m[0]},g.a.createElement(b.a,{id:"js.com.Tre.0008",defaultMessage:"新增"})),g.a.createElement(z.a,{style:{margin:8},onClick:e.onCommonClick(1),role:"update",shape:"border",disabled:m[1]},g.a.createElement(b.a,{id:"js.com.Tre.0009",defaultMessage:"修改"})),g.a.createElement(z.a,{style:{margin:8},shape:"border",onClick:e.onCommonClick(2),disabled:m[2]},g.a.createElement(b.a,{id:"js.com.Tre.0010",defaultMessage:"详情"})),g.a.createElement(z.a,{style:{margin:8},onClick:e.onDelete,role:"delete",shape:"border",disabled:m[3]},g.a.createElement(b.a,{id:"js.com.Tre.0011",defaultMessage:"删除"}))),g.a.createElement(z.a,{style:{margin:8},size:"sm",onClick:e.onExport,shape:"border"},g.a.createElement(b.a,{id:"js.com.Tre.0012",defaultMessage:"导出"}))),g.a.createElement(H.a,{ref:function(e){return t.grid=e},data:r,rowKey:function(e,t){return e.id},columns:e.column,paginationObj:p,getSelectedDataFunc:e.getSelectedDataFunc,multiSelect:{type:"checkbox"},scroll:{y:f}}),g.a.createElement(K,this.props),g.a.createElement(G.a,{show:c,context:"是否要删除 ?",confirmFn:function(){return t.onModalDel(!0)},cancelFn:function(){return t.onModalDel(!1)}}))}}]),t}(d.Component)),J=Object(b.d)(W),X=(a(1606),I.Tree.TreeNode),$=function(e){function t(e){var u;return w()(this,t),(u=S()(this,P()(t).call(this,e))).onExpand=function(e){T.actions.walsinTree.updateState({searchRes:{expandedKeys:e,autoExpandParent:!1}})},u.onChange=function(e){_()(u).setState({searchValue:e})},u.onSearch=h()(x.a.mark(function e(){var t,a;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=_()(u),a=t.state.searchValue,e.next=3,T.actions.walsinTree.getSearchTree({searchValue:a});case 3:case"end":return e.stop()}},e)})),u.onSelect=function(e,t){var a=_()(u),n=t.selectedNodes,r=e.length?e[0]:"",o="",c="";if(n.length){var i=n[0],s=i.props;o=i.props.title.props.children[2],c=s.hierarchy}var l,d=a.props.paginationParam;l=Object.assign({},d.reqParam||{},{search_treeId:r,title:o,hierarchy:c}),T.actions.walsinTree.loadTable(l)},u.onMouseEnter=function(e){var t=Object(q.f)(u.state.editNode);t.isHover=e.node.props.eventKey,u.setState({editNode:t})},u.onMouseLeave=function(e,t){u.setState({editNode:{isHover:"",editKey:""}})},u.onDrop=function(){var t=h()(x.a.mark(function e(t){var a,n,r,o,c;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=_()(u),n=t.dragNode,r=t.node,o=Object(q.m)(a.props.content,{id:n.props.eventKey},0),c=Object.assign({},o,{parentId:r.props.eventKey}),e.next=6,T.actions.walsinTree.dragNode({curNode:o,reqParam:c});case 6:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}(),u.onLoadData=function(e){console.log("treeNode",e);var a=e.props.eventKey,n=_()(u);return new Promise(function(e,t){n.idLoaded(a)||T.actions.walsinTree.loadTree({id:a}),e()}).then(function(e){console.log("result",e)}).catch(function(e){console.log(g.a.createElement(b.a,{id:"js.com.Ind3.0001",defaultMessage:"失败："})+e)})},u.idLoaded=function(e){var t=_()(u),a=t.props.content;return 0<a.length&&t.checkedLoaded(a,e)},u.checkedLoaded=function(e,t){for(var a=e.length,n=!1,r=0;r<a;r++){var o=e[r],c=o.children;if(o.id==t){if(c&&0<c.length){n=!0;break}}else c&&(n=u.checkedLoaded(c,t))}return n},u.getHeight=function(){var e=Math.min(window.innerHeight,document.body.clientHeight,document.documentElement.clientHeight),t=Math.min(window.innerHeight,document.body.scrollHeight,document.documentElement.scrollHeight);document.documentElement.offsetHeight;return(e<t&&e||t)-32-document.documentElement.scrollTop},u.getTableWidth=function(){return Math.min(window.innerWidth,document.documentElement.clientWidth,document.body.clientWidth)-250},u.state={searchValue:"",editNode:{isHover:"",editKey:""}},u}return A()(t,e),j()(t,[{key:"componentDidMount",value:function(){T.actions.walsinTree.loadTree()}},{key:"render",value:function(){var e=this,t=e.props,a=t.showLoading,n=t.content,r=t.searchRes,o=t.paginationParam,c=r.expandedKeys,i=r.autoExpandParent,s=o.reqParam,l=(void 0===s?{}:s).search_treeId,d=e.state.searchValue,u=e.getTableWidth();return g.a.createElement("div",{className:"tree-example"},g.a.createElement(C.a,{title:this.props.intl.formatMessage({id:"js.com.Ind3.0002",defaultMessage:"B1左树右表示例"})}),g.a.createElement("div",{className:"tree-body"},g.a.createElement("div",{className:"tree-wrap"},g.a.createElement("div",{className:"tree"},g.a.createElement("div",{className:"tree-head"},g.a.createElement(b.a,{id:"js.com.Ind3.0003",defaultMessage:"组织机构"})),g.a.createElement("div",{className:"tree-search"},g.a.createElement(I.FormControl,{className:"search-box",placeholder:"Search",onChange:e.onChange,onSearch:e.onSearch,value:d,type:"search"})),n.length?g.a.createElement(I.Tree,{showLine:!0,openIcon:g.a.createElement(I.Icon,{type:"uf-arrow-down"}),closeIcon:g.a.createElement(I.Icon,{type:"uf-arrow-right"}),onExpand:e.onExpand,expandedKeys:c,autoExpandParent:i,defaultExpandAll:!0,onSelect:e.onSelect,onCheck:e.onSelect,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,draggable:!1,onDragEnter:this.onDragEnter,onDrop:this.onDrop,loadData:e.onLoadData,selectedKeys:[l]},function o(e){return e.map(function(e){var t=e.name.search(d),a=e.name.substr(0,t),n=e.name.substr(t+d.length),r=-1<t?g.a.createElement("span",null,a,g.a.createElement("span",{style:{color:"#f50"}},d),n):g.a.createElement("span",null,e.name);return e.children&&e.children.length?g.a.createElement(X,{className:"tree-node",hierarchy:e.parentId,title:r,key:e.id},o(e.children)):g.a.createElement(X,{className:"tree-node",hierarchy:e.parentId,title:r,key:e.id,isLeaf:void 0===e.isSon||1===e.isSon})})}(n)):g.a.createElement("div",{className:"no-search-container"},g.a.createElement("span",{className:"no-search"},g.a.createElement(b.a,{id:"js.com.Ind3.0004",defaultMessage:"未查询到相关数据"})))),g.a.createElement("div",{className:"table-wrap"},g.a.createElement(J,v()({},this.props,{tableWidth:u})))),g.a.createElement(I.Loading,{show:a,fullScreen:!0})))}}]),t}(d.Component),Q=Object(b.d)($),Y=a(160),Z=a.n(Y),ee=a(29),te=a.n(ee),ae=a(22),ne={GET_DETAIL:"".concat("/iuap-pap-demo-be","/allowances/list"),GET_TREE_DATA:"".concat("/iuap-pap-demo-be","/tree_demo/getSonNodes"),DRAG_NODE:"".concat("/iuap-pap-demo-be","/tree_demo/draftingNode"),GET_TABLE_DATA:"".concat("/iuap-pap-demo-be","/table_demo/list"),ADD_TABLE_DATA:"".concat("/iuap-pap-demo-be","/table_demo/insertSelective"),EDIT_SAVE_DATA:"".concat("/iuap-pap-demo-be","/table_demo/updateSelective"),DEL_TABLE_DATA:"".concat("/iuap-pap-demo-be","/table_demo/deleteBatch"),TREE_SEARCH:"".concat("/iuap-pap-demo-be","/tree_demo/dataSearchNodes")},re=(a(5),{name:"walsinTree",initialState:{content:[],cacheTree:[],paginationParam:{reqParam:{search_treeId:"",title:"",hierarchy:"",pageIndex:0,pageSize:25},resParam:{totalPages:0,total:0}},tableData:[],tableSelValue:[],showLoading:!1,comModalParam:{showModal:!1,initEditValue:{},btnFlag:0},delModal:!1,searchRes:{expandedKeys:[],autoExpandParent:!1}},reducers:{updateState:function(e,t){return te()({},e,t)}},effects:{loadTree:(l=h()(x.a.mark(function e(a,n){var r,o,c,i,s,l,d;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("loadTree param",a),r=n().walsinTree.cacheTree,e.t0=q.o,e.next=5,t=a,console.log("param",t),Object(ae.a)(ne.GET_TREE_DATA,{method:"get",param:t});case 5:e.t1=e.sent,o=(0,e.t0)(e.t1),c=o.result,i=c.data,s=[],l=i&&i.content||[],r=i&&i.content&&r.concat(i.content),d=Object(q.f)(n().walsinTree.content),s=0===d.length?Object(q.f)(l):Object(q.d)(d,l),T.actions.walsinTree.updateState({content:s,cacheTree:r});case 15:case"end":return e.stop()}var t},e)})),function(e,t){return l.apply(this,arguments)}),dragNode:(s=h()(x.a.mark(function e(a,n){var r,o,c,i;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Object(q.f)(n().walsinTree.content),o={},a.reqParam)return e.t0=q.o,e.next=6,t=a.reqParam,console.log("param",t),Object(ae.a)(ne.DRAG_NODE,{method:"post",data:t});e.next=10;break;case 6:e.t1=e.sent,c=(0,e.t0)(e.t1),i=c.result,o=i.data;case 10:o&&(Object(q.m)(r,a.curNode,1),console.log("cacheContent",r),Object(q.d)(r,Array.isArray(o)?o:[o]),T.actions.walsinTree.updateState({content:r}));case 11:case"end":return e.stop()}var t},e)})),function(e,t){return s.apply(this,arguments)}),loadTable:(i=h()(x.a.mark(function e(a,t){var n,r,o,c,i;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.actions.walsinTree.updateState({showLoading:!0});case 2:return e.prev=2,e.t0=q.o,e.next=6,t=a,Object(ae.a)(ne.GET_TABLE_DATA,{method:"get",param:t});case 6:return e.t1=e.sent,n=(0,e.t0)(e.t1),r=n.result,o=r.data,c=[],i={},o&&(c=o.content,i=Object.assign({},{reqParam:a,resParam:{total:o.totalElements,totalPages:o.totalPages}})),e.next=14,T.actions.walsinTree.updateState({tableData:c,paginationParam:i,tableSelValue:[],showLoading:!1});case 14:e.next=19;break;case 16:e.prev=16,e.t2=e.catch(2),T.actions.walsinTree.updateState({showLoading:!1});case 19:case"end":return e.stop()}var t},e,null,[[2,16]])})),function(e,t){return i.apply(this,arguments)}),addTableData:(c=h()(x.a.mark(function e(a,n){var r,o,c,i,s,l;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n(),o=r.intl.localeData,c=o["js.tre.src3.0001"]||"添加成功",e.t0=q.o,e.next=6,t=a,Object(ae.a)(ne.ADD_TABLE_DATA,{method:"post",data:t});case 6:e.t1=e.sent,e.t2=c,i=(0,e.t0)(e.t1,e.t2),s=i.result,s.data&&(l=n().walsinTree.paginationParam.reqParam,T.actions.walsinTree.loadTable(l));case 12:case"end":return e.stop()}var t},e)})),function(e,t){return c.apply(this,arguments)}),addEditData:(o=h()(x.a.mark(function e(a,n){var r,o,c,i,s,l;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n(),o=r.intl.localeData,c=o["js.tre.src3.0002"]||"修改成功",e.t0=q.o,e.next=6,t=a,Object(ae.a)(ne.EDIT_SAVE_DATA,{method:"post",data:t});case 6:e.t1=e.sent,e.t2=c,i=(0,e.t0)(e.t1,e.t2),s=i.result,s.data&&(l=n().walsinTree.paginationParam.reqParam,T.actions.walsinTree.loadTable(l));case 12:case"end":return e.stop()}var t},e)})),function(e,t){return o.apply(this,arguments)}),delTableData:(r=h()(x.a.mark(function e(a,n){var r,o,c,i,s,l;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n(),o=r.intl.localeData,c=o["js.tre.src3.0003"]||"删除成功",e.t0=q.o,e.next=6,t=a,Object(ae.a)(ne.DEL_TABLE_DATA,{method:"post",data:t});case 6:e.t1=e.sent,e.t2=c,i=(0,e.t0)(e.t1,e.t2),s=i.result,s.data&&((l=n().walsinTree.paginationParam.reqParam).pageIndex=0,T.actions.walsinTree.loadTable(l));case 12:case"end":return e.stop()}var t},e)})),function(e,t){return r.apply(this,arguments)}),getSearchTree:(n=h()(x.a.mark(function e(a,n){var r,o,c,i,s,l,d,u,p,m,f,h,g,b,v,E,w,y;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.actions.walsinTree.updateState({showLoading:!0});case 2:return r=a.searchValue,o=n(),c=o.walsinTree.paginationParam,c=Object(q.f)(c),s=(i=c).reqParam,l=i.reqParam,d=l.title,u=l.hierarchy,console.log("searchValue",Z()(a.searchValue)),e.prev=8,e.t0=q.o,e.next=12,t=a,Object(ae.a)(ne.TREE_SEARCH,{method:"get",param:t});case 12:if(e.t1=e.sent,p=(0,e.t0)(e.t1),m=p.result,f=m.data,g=(h=void 0!==f&&f||{content:[],parentIdSet:[]}).content,b=h.parentIdSet,console.log("res",f),Array.isArray(g))return v={},E={content:g,searchRes:{expandedKeys:b,autoExpandParent:!!a.searchValue}},(""==r&&"0"!=u||!d.includes(r))&&(v={search_treeId:"",title:"",hierarchy:""}),c.reqParam=Object.assign({},s,v),E.paginationParam=c,e.next=26,T.actions.walsinTree.updateState(E);e.next=28;break;case 26:e.next=31;break;case 28:throw w=o.intl.localeData,y=w["js.tre.src3.0004"]||"返回content为null",new Error(y);case 31:e.next=37;break;case 33:e.prev=33,e.t2=e.catch(8),console.log(e.t2),T.actions.walsinTree.updateState({showLoading:!1,content:[]});case 37:return e.next=39,T.actions.walsinTree.updateState({showLoading:!1});case 39:case"end":return e.stop()}var t},e,null,[[8,33]])})),function(e,t){return n.apply(this,arguments)})}});u.a.model(re);var oe=Object(T.connect)(function(e){return e.walsinTree},null)(Q),ce=a(68);a(1607);Object(T.render)(g.a.createElement(ce.a,null,g.a.createElement(oe,null)),document.querySelector("#app"))}});
=======
/*! build:ucf hash:d5e6891898251b2d28bd, chunkhash:f915591abe076b948616, name:tree/index, filebase:index.js, query:, file:tree/index.js */!function(l){function e(e){for(var a,t,n=e[0],r=e[1],o=e[2],c=0,i=[];c<n.length;c++)t=n[c],d[t]&&i.push(d[t][0]),d[t]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(l[a]=r[a]);for(p&&p(e);i.length;)i.shift()();return u.push.apply(u,o||[]),s()}function s(){for(var e,a=0;a<u.length;a++){for(var t=u[a],n=!0,r=1;r<t.length;r++){var o=t[r];0!==d[o]&&(n=!1)}n&&(u.splice(a--,1),e=c(c.s=t[0]))}return e}var t={},d={7:0},u=[];function c(e){if(t[e])return t[e].exports;var a=t[e]={i:e,l:!1,exports:{}};return l[e].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.m=l,c.c=t,c.d=function(e,a,t){c.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:t})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(a,e){if(1&e&&(a=c(a)),8&e)return a;if(4&e&&"object"==typeof a&&a&&a.__esModule)return a;var t=Object.create(null);if(c.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:a}),2&e&&"string"!=typeof a)for(var n in a)c.d(t,n,function(e){return a[e]}.bind(null,n));return t},c.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(a,"a",a),a},c.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},c.p="";var a=window.webpackJsonp=window.webpackJsonp||[],n=a.push.bind(a);a.push=e,a=a.slice();for(var r=0;r<a.length;r++)e(a[r]);var p=n;u.push([1579,0]),s()}({1567:function(e,a,t){},1568:function(e,a,t){},1569:function(e,a,t){},1570:function(e,a,t){},1579:function(e,a,t){"use strict";t.r(a);t(161);var n,r,o,c,i,l,s,d=t(0),g=t.n(d),w=t(2),u=t.n(w),p=t(6),b=t.n(p),m=t(8),E=t.n(m),h=t(17),f=t.n(h),v=t(10),T=t.n(v),x=t(11),y=t.n(x),S=t(12),P=t.n(S),D=t(13),k=t.n(D),O=t(32),A=t.n(O),_=t(14),j=t.n(_),M=t(3),N=t(50),L=t(54),C=t(25),I=t(66),V=t(5),H=(t(1567),C.a.Item),q=M.Select.Option,F=["新增","修改","详情"],B=function(e){function a(e){var t;return T()(this,a),(t=P()(this,k()(a).call(this,e))).onCloseEdit=function(){var e,a=t.props.comModalParam;e=Object.assign({},a,{showModal:!1,btnFlag:0}),w.actions.walsinTree.updateState({comModalParam:e,showLoading:!1})},t.onSubmitEdit=f()(E.a.mark(function e(){var p;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(p=A()(t)).props.form.validateFields(function(){var t=f()(E.a.mark(function e(a,t){var n,r,o,c,i,l,s,d,u;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a)return e.abrupt("return");e.next=4;break;case 4:return e.next=6,w.actions.walsinTree.updateState({showLoading:!0});case 6:if(n=p.props||{},r=n.comModalParam,o=n.paginationParam,i=(c=r||{}).initEditValue,l=c.btnFlag,s=o.reqParam||{},d=s.search_treeId,u={},console.log("onsave oldData",i),l||d){e.next=13;break}return p.onCloseEdit(),w.actions.walsinTree.updateState({showLoading:!1}),Object(V.a)("请选择树节点"),e.abrupt("return");case 13:if(p.handleIntData(t),u=Object.assign({},{treeId:d},i,t),l)return e.next=18,w.actions.walsinTree.addEditData(u);e.next=20;break;case 18:e.next=22;break;case 20:return e.next=22,w.actions.walsinTree.addTableData(u);case 22:p.onCloseEdit();case 23:case"end":return e.stop()}},e)}));return function(e,a){return t.apply(this,arguments)}}());case 2:case"end":return e.stop()}},e)})),t.handleIntData=function(e){for(var a=0,t=["age"];a<t.length;a++){var n=t[a];void 0!==e[n]&&(e[n]=Number(e[n]))}},t.onHideEdit=function(){t.onCloseEdit()},t.onHandleBtns=function(e){return 2==e?[]:t.defaultBtnConfig},t.defaultBtnConfig=[{label:"取消",fun:t.onCloseEdit,shape:"border"},{label:"确定",fun:t.onSubmitEdit,colors:"primary"}],t.state={},t}return j()(a,e),y()(a,[{key:"render",value:function(){var e=this.props,a=e.form,t=e.comModalParam||{},n=t.showModal,r=void 0!==n&&n,o=t.initEditValue,c=void 0===o?{}:o,i=t.btnFlag,l=void 0===i?0:i,s=a.getFieldProps,d=a.getFieldError,u=c||{},p=u.name,m=u.sex,h=u.age,f=this.onHandleBtns(l);return g.a.createElement(I.a,{show:r,title:F[l],size:"lg",btns:f,close:this.onCloseEdit},g.a.createElement(C.a,null,g.a.createElement(H,{required:!0,label:"员工姓名"},g.a.createElement(M.FormControl,b()({disabled:2==l},s("name",{validateTrigger:"onBlur",initialValue:p||"",rules:[{type:"string",required:!0,pattern:/\S+/gi,message:"请输入员工姓名"}]}))),g.a.createElement("span",{className:"error"},d("name"))),g.a.createElement(H,{required:!0,label:"员工性别"},g.a.createElement(M.Select,b()({disabled:2==l},s("sex",{initialValue:m||1,rules:[{required:!0,message:"请选择员工性别"}]})),g.a.createElement(q,{value:1},"女"),g.a.createElement(q,{value:2},"男")),g.a.createElement("span",{className:"error"},d("sex"))),g.a.createElement(H,{required:!0,label:"年龄"},g.a.createElement(M.InputNumber,b()({iconStyle:"one",min:1,step:1,max:99,disabled:2==l},s("age",{initialValue:h||"",rules:[{type:"number",max:99,transform:function(e){return 1*e},pattern:/^[0-9]+$/,required:!0,message:"年龄需小于100"}]}))),g.a.createElement("span",{className:"error"},d("age")))))}}]),a}(d.Component),K=C.a.createForm()(B),R=t(18),z=t(55),W=t(76),G=(t(1568),function(e){function a(e){var l;return T()(this,a),(l=P()(this,k()(a).call(this,e))).getSelectedDataFunc=function(e){console.log("selvalue",e),w.actions.walsinTree.updateState({tableSelValue:e})},l.freshData=function(e){l.onPageSelect(e,0)},l.onDataNumSelect=function(e,a){l.onPageSelect(a,1)},l.onPageSelect=function(e,a){var t=A()(l),n=t.props.paginationParam,r=n.reqParam&&Object(V.f)(n.reqParam)||{};console.log("paginationParam",n);var o=Object(V.k)(e,a,r),c=o.pageIndex,i=o.pageSize;r.pageIndex=c,r.pageSize=i,w.actions.walsinTree.loadTable(r),t.resetSelData()},l.onCommonClick=function(i){return function(e){var a=A()(l).props,t=a.comModalParam,n=a.paginationParam,r=a.tableSelValue,o={},c=r.length;if(t=Object(V.f)(t),0<i){if(!Array.isArray(r)||!c)return void Object(V.c)("请选择表数据");if(1<c)return void Object(V.c)("请选择单条表数据");o=Object.assign({},t,{showModal:!0,initEditValue:r[0],btnFlag:i})}else{void 0!==n.reqParam&&n.reqParam.search_treeId||""?o={showModal:!0,btnFlag:i,initEditValue:{}}:Object(V.c)("请选择表数据所属树节点")}w.actions.walsinTree.updateState({comModalParam:o})}},l.onDelete=f()(E.a.mark(function e(){var a;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=l.props.tableSelValue,Array.isArray(a)&&0<a.length)return e.next=4,w.actions.walsinTree.updateState({delModal:!0});e.next=6;break;case 4:e.next=7;break;case 6:Object(V.c)("请选择数据");case 7:case"end":return e.stop()}},e)})),l.onModalDel=function(){var a=f()(E.a.mark(function e(a){var t,n;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=A()(l),n=t.props.tableSelValue,a)return e.next=5,w.actions.walsinTree.updateState({showLoading:!0});e.next=10;break;case 5:return e.next=7,w.actions.walsinTree.delTableData(n);case 7:t.closeModal(),e.next=11;break;case 10:t.closeModal();case 11:case"end":return e.stop()}},e)}));return function(e){return a.apply(this,arguments)}}(),l.closeModal=f()(E.a.mark(function e(){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.actions.walsinTree.updateState({showLoading:!1,delModal:!1});case 2:case"end":return e.stop()}},e)})),l.onExport=function(){l.grid.exportExcel()},l.resetSelData=function(){w.actions.walsinTree.updateState({tableSelValue:[]})},l.onHandleDisabled=function(){var e=l.props.tableSelValue.length;return e?1==e?{0:!1,1:!1,2:!1,3:!1}:{0:!1,1:!0,2:!0,3:!1}:{0:!1,1:!0,2:!0,3:!0}},l.getHeight=function(){var e,a=Math.max(document.body.clientHeight,document.documentElement.clientHeight),t=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight);e=(a<t&&a||t)-42-58-43-42-32,l.setState({tableHeight:e})},l.state={tableHeight:500},l.grid=null,l.column=[{title:"姓名",dataIndex:"name",key:"name",width:200},{title:"性别",dataIndex:"sexEnumValue",key:"sexEnumValue",width:200},{title:"年龄",dataIndex:"age",key:"age",width:200}],l}return j()(a,e),y()(a,[{key:"componentWillMount",value:function(){var e=this;e.getHeight(),window.onresize=function(){e.getHeight()}}},{key:"componentWillUnmount",value:function(){window.onresize={}}},{key:"componentDidMount",value:function(){var e=this.props.paginationParam;w.actions.walsinTree.loadTable(e.reqParam||{pageIndex:0,pageSize:25}),this.resetSelData()}},{key:"render",value:function(){var a=this,e=this,t=e.props,n=t.tableData,r=void 0===n?[]:n,o=t.paginationParam,c=t.delModal,i=(o.reqParam||{}).pageIndex,l=o.resParam||{},s=l.totalPages,d=void 0===s?0:s,u=l.total,p={activePage:i+1,total:void 0===u?0:u,items:d,freshData:e.freshData,onDataNumSelect:e.onDataNumSelect},m=e.onHandleDisabled(),h=e.state.tableHeight;return g.a.createElement("div",{className:"tree-table"},g.a.createElement("div",{className:"table-header"},g.a.createElement(W.a,{funcCode:"tree"},g.a.createElement(R.a,{colors:"primary",style:{margin:8},onClick:e.onCommonClick(0),role:"add",disabled:m[0]},"新增"),g.a.createElement(R.a,{style:{margin:8},onClick:e.onCommonClick(1),role:"update",shape:"border",disabled:m[1]},"修改"),g.a.createElement(R.a,{style:{margin:8},shape:"border",onClick:e.onCommonClick(2),disabled:m[2]},"详情"),g.a.createElement(R.a,{style:{margin:8},onClick:e.onDelete,role:"delete",shape:"border",disabled:m[3]},"删除")),g.a.createElement(R.a,{style:{margin:8},size:"sm",onClick:e.onExport,shape:"border"},"导出")),g.a.createElement(L.a,{ref:function(e){return a.grid=e},data:r,rowKey:function(e,a){return e.id},columns:e.column,paginationObj:p,getSelectedDataFunc:e.getSelectedDataFunc,multiSelect:{type:"checkbox"},scroll:{y:h}}),g.a.createElement(K,this.props),g.a.createElement(z.a,{show:c,context:"是否要删除 ?",confirmFn:function(){return a.onModalDel(!0)},cancelFn:function(){return a.onModalDel(!1)}}))}}]),a}(d.Component)),J=(t(1569),M.Tree.TreeNode),U=function(e){function a(e){var u;return T()(this,a),(u=P()(this,k()(a).call(this,e))).onExpand=function(e){w.actions.walsinTree.updateState({searchRes:{expandedKeys:e,autoExpandParent:!1}})},u.onChange=function(e){A()(u).setState({searchValue:e})},u.onSearch=f()(E.a.mark(function e(){var a,t;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=A()(u),t=a.state.searchValue,e.next=3,w.actions.walsinTree.getSearchTree({searchValue:t});case 3:case"end":return e.stop()}},e)})),u.onSelect=function(e,a){var t=A()(u),n=a.selectedNodes,r=e.length?e[0]:"",o="",c="";if(n.length){var i=n[0],l=i.props;o=i.props.title.props.children[2],c=l.hierarchy}var s,d=t.props.paginationParam;s=Object.assign({},d.reqParam||{},{search_treeId:r,title:o,hierarchy:c}),w.actions.walsinTree.loadTable(s)},u.onMouseEnter=function(e){var a=Object(V.f)(u.state.editNode);a.isHover=e.node.props.eventKey,u.setState({editNode:a})},u.onMouseLeave=function(e,a){u.setState({editNode:{isHover:"",editKey:""}})},u.onDrop=function(){var a=f()(E.a.mark(function e(a){var t,n,r,o,c;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=A()(u),n=a.dragNode,r=a.node,o=Object(V.m)(t.props.content,{id:n.props.eventKey},0),c=Object.assign({},o,{parentId:r.props.eventKey}),e.next=6,w.actions.walsinTree.dragNode({curNode:o,reqParam:c});case 6:case"end":return e.stop()}},e)}));return function(e){return a.apply(this,arguments)}}(),u.onLoadData=function(e){console.log("treeNode",e);var t=e.props.eventKey,n=A()(u);return new Promise(function(e,a){n.idLoaded(t)||w.actions.walsinTree.loadTree({id:t}),e()}).then(function(e){console.log("result",e)}).catch(function(e){console.log("失败："+e)})},u.idLoaded=function(e){var a=A()(u),t=a.props.content;return 0<t.length&&a.checkedLoaded(t,e)},u.checkedLoaded=function(e,a){for(var t=e.length,n=!1,r=0;r<t;r++){var o=e[r],c=o.children;if(o.id==a){if(c&&0<c.length){n=!0;break}}else c&&(n=u.checkedLoaded(c,a))}return n},u.getHeight=function(){var e=Math.min(window.innerHeight,document.body.clientHeight,document.documentElement.clientHeight),a=Math.min(window.innerHeight,document.body.scrollHeight,document.documentElement.scrollHeight);document.documentElement.offsetHeight;return(e<a&&e||a)-32-document.documentElement.scrollTop},u.getTableWidth=function(){return Math.min(window.innerWidth,document.documentElement.clientWidth,document.body.clientWidth)-250},u.state={searchValue:"",editNode:{isHover:"",editKey:""}},u}return j()(a,e),y()(a,[{key:"componentDidMount",value:function(){w.actions.walsinTree.loadTree()}},{key:"render",value:function(){var e=this,a=e.props,t=a.showLoading,n=a.content,r=a.searchRes,o=a.paginationParam,c=r.expandedKeys,i=r.autoExpandParent,l=o.reqParam,s=(void 0===l?{}:l).search_treeId,d=e.state.searchValue,u=e.getTableWidth();return g.a.createElement("div",{className:"tree-example"},g.a.createElement(N.a,{title:"B1左树右表示例"}),g.a.createElement("div",{className:"tree-body"},g.a.createElement("div",{className:"tree-wrap"},g.a.createElement("div",{className:"tree"},g.a.createElement("div",{className:"tree-head"},"组织机构"),g.a.createElement("div",{className:"tree-search"},g.a.createElement(M.FormControl,{className:"search-box",placeholder:"Search",onChange:e.onChange,onSearch:e.onSearch,value:d,type:"search"})),n.length?g.a.createElement(M.Tree,{showLine:!0,openIcon:g.a.createElement(M.Icon,{type:"uf-arrow-down"}),closeIcon:g.a.createElement(M.Icon,{type:"uf-arrow-right"}),onExpand:e.onExpand,expandedKeys:c,autoExpandParent:i,defaultExpandAll:!0,onSelect:e.onSelect,onCheck:e.onSelect,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,draggable:!1,onDragEnter:this.onDragEnter,onDrop:this.onDrop,loadData:e.onLoadData,selectedKeys:[s]},function o(e){return e.map(function(e){var a=e.name.search(d),t=e.name.substr(0,a),n=e.name.substr(a+d.length),r=-1<a?g.a.createElement("span",null,t,g.a.createElement("span",{style:{color:"#f50"}},d),n):g.a.createElement("span",null,e.name);return e.children&&e.children.length?g.a.createElement(J,{className:"tree-node",hierarchy:e.parentId,title:r,key:e.id},o(e.children)):g.a.createElement(J,{className:"tree-node",hierarchy:e.parentId,title:r,key:e.id,isLeaf:void 0===e.isSon||1===e.isSon})})}(n)):g.a.createElement("div",{className:"no-search-container"},g.a.createElement("span",{className:"no-search"},"未查询到相关数据"))),g.a.createElement("div",{className:"table-wrap"},g.a.createElement(G,b()({},this.props,{tableWidth:u})))),g.a.createElement(M.Loading,{show:t,fullScreen:!0})))}}]),a}(d.Component),$=t(157),Q=t.n($),X=t(29),Y=t.n(X),Z=t(21),ee={GET_DETAIL:"".concat("/iuap-pap-demo-be","/allowances/list"),GET_TREE_DATA:"".concat("/iuap-pap-demo-be","/tree_demo/getSonNodes"),DRAG_NODE:"".concat("/iuap-pap-demo-be","/tree_demo/draftingNode"),GET_TABLE_DATA:"".concat("/iuap-pap-demo-be","/table_demo/list"),ADD_TABLE_DATA:"".concat("/iuap-pap-demo-be","/table_demo/insertSelective"),EDIT_SAVE_DATA:"".concat("/iuap-pap-demo-be","/table_demo/updateSelective"),DEL_TABLE_DATA:"".concat("/iuap-pap-demo-be","/table_demo/deleteBatch"),TREE_SEARCH:"".concat("/iuap-pap-demo-be","/tree_demo/dataSearchNodes")},ae=(t(4),{name:"walsinTree",initialState:{content:[],cacheTree:[],paginationParam:{reqParam:{search_treeId:"",title:"",hierarchy:"",pageIndex:0,pageSize:25},resParam:{totalPages:0,total:0}},tableData:[],tableSelValue:[],showLoading:!1,comModalParam:{showModal:!1,initEditValue:{},btnFlag:0},delModal:!1,searchRes:{expandedKeys:[],autoExpandParent:!1}},reducers:{updateState:function(e,a){return Y()({},e,a)}},effects:{loadTree:(s=f()(E.a.mark(function e(t,n){var r,o,c,i,l,s,d;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("loadTree param",t),r=n().walsinTree.cacheTree,e.t0=V.o,e.next=5,a=t,console.log("param",a),Object(Z.a)(ee.GET_TREE_DATA,{method:"get",param:a});case 5:e.t1=e.sent,o=(0,e.t0)(e.t1),c=o.result,i=c.data,l=[],s=i&&i.content||[],r=i&&i.content&&r.concat(i.content),d=Object(V.f)(n().walsinTree.content),l=0===d.length?Object(V.f)(s):Object(V.d)(d,s),w.actions.walsinTree.updateState({content:l,cacheTree:r});case 15:case"end":return e.stop()}var a},e)})),function(e,a){return s.apply(this,arguments)}),dragNode:(l=f()(E.a.mark(function e(t,n){var r,o,c,i;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Object(V.f)(n().walsinTree.content),o={},t.reqParam)return e.t0=V.o,e.next=6,a=t.reqParam,console.log("param",a),Object(Z.a)(ee.DRAG_NODE,{method:"post",data:a});e.next=10;break;case 6:e.t1=e.sent,c=(0,e.t0)(e.t1),i=c.result,o=i.data;case 10:o&&(Object(V.m)(r,t.curNode,1),console.log("cacheContent",r),Object(V.d)(r,Array.isArray(o)?o:[o]),w.actions.walsinTree.updateState({content:r}));case 11:case"end":return e.stop()}var a},e)})),function(e,a){return l.apply(this,arguments)}),loadTable:(i=f()(E.a.mark(function e(t,a){var n,r,o,c,i;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.actions.walsinTree.updateState({showLoading:!0});case 2:return e.prev=2,e.t0=V.o,e.next=6,a=t,Object(Z.a)(ee.GET_TABLE_DATA,{method:"get",param:a});case 6:return e.t1=e.sent,n=(0,e.t0)(e.t1),r=n.result,o=r.data,c=[],i={},o&&(c=o.content,i=Object.assign({},{reqParam:t,resParam:{total:o.totalElements,totalPages:o.totalPages}})),e.next=14,w.actions.walsinTree.updateState({tableData:c,paginationParam:i,tableSelValue:[],showLoading:!1});case 14:e.next=19;break;case 16:e.prev=16,e.t2=e.catch(2),w.actions.walsinTree.updateState({showLoading:!1});case 19:case"end":return e.stop()}var a},e,null,[[2,16]])})),function(e,a){return i.apply(this,arguments)}),addTableData:(c=f()(E.a.mark(function e(t,n){var r,o,c;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=V.o,e.next=3,a=t,Object(Z.a)(ee.ADD_TABLE_DATA,{method:"post",data:a});case 3:e.t1=e.sent,r=(0,e.t0)(e.t1,"添加成功"),o=r.result,o.data&&(c=n().walsinTree.paginationParam.reqParam,w.actions.walsinTree.loadTable(c));case 8:case"end":return e.stop()}var a},e)})),function(e,a){return c.apply(this,arguments)}),addEditData:(o=f()(E.a.mark(function e(t,n){var r,o,c;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=V.o,e.next=3,a=t,Object(Z.a)(ee.EDIT_SAVE_DATA,{method:"post",data:a});case 3:e.t1=e.sent,r=(0,e.t0)(e.t1,"修改成功"),o=r.result,o.data&&(c=n().walsinTree.paginationParam.reqParam,w.actions.walsinTree.loadTable(c));case 8:case"end":return e.stop()}var a},e)})),function(e,a){return o.apply(this,arguments)}),delTableData:(r=f()(E.a.mark(function e(t,n){var r,o,c;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=V.o,e.next=3,a=t,Object(Z.a)(ee.DEL_TABLE_DATA,{method:"post",data:a});case 3:e.t1=e.sent,r=(0,e.t0)(e.t1,"删除成功"),o=r.result,o.data&&((c=n().walsinTree.paginationParam.reqParam).pageIndex=0,w.actions.walsinTree.loadTable(c));case 8:case"end":return e.stop()}var a},e)})),function(e,a){return r.apply(this,arguments)}),getSearchTree:(n=f()(E.a.mark(function e(t,n){var r,o,c,i,l,s,d,u,p,m,h,f,g,b,v;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.actions.walsinTree.updateState({showLoading:!0});case 2:return r=t.searchValue,o=n().walsinTree.paginationParam,o=Object(V.f)(o),i=(c=o).reqParam,l=c.reqParam,s=l.title,d=l.hierarchy,console.log("searchValue",Q()(t.searchValue)),e.prev=7,e.t0=V.o,e.next=11,a=t,Object(Z.a)(ee.TREE_SEARCH,{method:"get",param:a});case 11:if(e.t1=e.sent,u=(0,e.t0)(e.t1),p=u.result,m=p.data,f=(h=void 0!==m&&m||{content:[],parentIdSet:[]}).content,g=h.parentIdSet,console.log("res",m),Array.isArray(f))return b={},v={content:f,searchRes:{expandedKeys:g,autoExpandParent:!!t.searchValue}},(""==r&&"0"!=d||!s.includes(r))&&(b={search_treeId:"",title:"",hierarchy:""}),o.reqParam=Object.assign({},i,b),v.paginationParam=o,e.next=25,w.actions.walsinTree.updateState(v);e.next=27;break;case 25:e.next=28;break;case 27:throw new Error("返回content为null");case 28:e.next=34;break;case 30:e.prev=30,e.t2=e.catch(7),console.log(e.t2),w.actions.walsinTree.updateState({showLoading:!1,content:[]});case 34:return e.next=36,w.actions.walsinTree.updateState({showLoading:!1});case 36:case"end":return e.stop()}var a},e,null,[[7,30]])})),function(e,a){return n.apply(this,arguments)})}});u.a.model(ae);var te=Object(w.connect)(function(e){return e.walsinTree},null)(U);t(1570);Object(w.render)(g.a.createElement(te,null),document.querySelector("#app"))}});
>>>>>>> master
//# sourceMappingURL=index.js.map