<<<<<<< HEAD
/*! build:ucf hash:1bce2cbc62b120d1f8a5, chunkhash:2c79de4e0cda836fc78f, name:singletable-inline-edit/index, filebase:index.js, query:, file:singletable-inline-edit/index.js */!function(I){function e(e){for(var a,t,n=e[0],r=e[1],i=e[2],l=0,o=[];l<n.length;l++)t=n[l],H[t]&&o.push(H[t][0]),H[t]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(I[a]=r[a]);for(w&&w(e);o.length;)o.shift()();return g.push.apply(g,i||[]),s()}function s(){for(var e,a=0;a<g.length;a++){for(var t=g[a],n=!0,r=1;r<t.length;r++){var i=t[r];0!==H[i]&&(n=!1)}n&&(g.splice(a--,1),e=F(F.s=t[0]))}return e}var t=window.webpackHotUpdate;window.webpackHotUpdate=function(e,a){!function(e,a){if(!L[e]||!p[e])return;for(var t in p[e]=!1,a)Object.prototype.hasOwnProperty.call(a,t)&&(q[t]=a[t]);0==--c&&0===d&&h()}(e,a),t&&t(e,a)};var i,n=!0,O="1bce2cbc62b120d1f8a5",a=1e4,P={},_=[],r=[];var l=[],V="idle";function T(e){V=e;for(var a=0;a<l.length;a++)l[a].call(null,e)}var o,q,N,c=0,d=0,u={},p={},L={};function Y(e){return+e+""===e?+e:e}function f(e){if("idle"!==V)throw new Error("check() is only allowed in idle status");return n=e,T("check"),(i=a,i=i||1e4,new Promise(function(a,t){if("undefined"==typeof XMLHttpRequest)return t(new Error("No browser support"));try{var n=new XMLHttpRequest,r=F.p+""+O+".hot-update.json";n.open("GET",r,!0),n.timeout=i,n.send(null)}catch(e){return t(e)}n.onreadystatechange=function(){if(4===n.readyState)if(0===n.status)t(new Error("Manifest request to "+r+" timed out."));else if(404===n.status)a();else if(200!==n.status&&304!==n.status)t(new Error("Manifest request to "+r+" failed."));else{try{var e=JSON.parse(n.responseText)}catch(e){return void t(e)}a(e)}}})).then(function(e){if(!e)return T("idle"),null;p={},u={},L=e.c,N=e.h,T("prepare");var a=new Promise(function(e,a){o={resolve:e,reject:a}});for(var t in q={},H)m(t);return"prepare"===V&&0===d&&0===c&&h(),a});var i}function m(e){var a,t;L[e]?(p[e]=!0,c++,a=e,(t=document.createElement("script")).charset="utf-8",t.src=F.p+""+a+"."+O+".hot-update.js",document.head.appendChild(t)):u[e]=!0}function h(){T("ready");var a=o;if(o=null,a)if(n)Promise.resolve().then(function(){return v(n)}).then(function(e){a.resolve(e)},function(e){a.reject(e)});else{var e=[];for(var t in q)Object.prototype.hasOwnProperty.call(q,t)&&e.push(Y(t));a.resolve(e)}}function v(t){if("ready"!==V)throw new Error("apply() is only allowed in ready status");var e,a,n,d,r;function i(e){for(var a=[e],t={},n=a.slice().map(function(e){return{chain:[e],id:e}});0<n.length;){var r=n.pop(),i=r.id,l=r.chain;if((d=A[i])&&!d.hot._selfAccepted){if(d.hot._selfDeclined)return{type:"self-declined",chain:l,moduleId:i};if(d.hot._main)return{type:"unaccepted",chain:l,moduleId:i};for(var o=0;o<d.parents.length;o++){var s=d.parents[o],c=A[s];if(c){if(c.hot._declinedDependencies[i])return{type:"declined",chain:l.concat([s]),moduleId:i,parentId:s};-1===a.indexOf(s)&&(c.hot._acceptedDependencies[i]?(t[s]||(t[s]=[]),u(t[s],[i])):(delete t[s],a.push(s),n.push({chain:l.concat([s]),id:s})))}}}}return{type:"accepted",moduleId:e,outdatedModules:a,outdatedDependencies:t}}function u(e,a){for(var t=0;t<a.length;t++){var n=a[t];-1===e.indexOf(n)&&e.push(n)}}t=t||{};var l={},o=[],s={},c=function(){console.warn("[HMR] unexpected require("+f.moduleId+") to disposed module")};for(var p in q)if(Object.prototype.hasOwnProperty.call(q,p)){var f;r=Y(p);var m=!1,h=!1,v=!1,g="";switch((f=q[p]?i(r):{type:"disposed",moduleId:p}).chain&&(g="\nUpdate propagation: "+f.chain.join(" -> ")),f.type){case"self-declined":t.onDeclined&&t.onDeclined(f),t.ignoreDeclined||(m=new Error("Aborted because of self decline: "+f.moduleId+g));break;case"declined":t.onDeclined&&t.onDeclined(f),t.ignoreDeclined||(m=new Error("Aborted because of declined dependency: "+f.moduleId+" in "+f.parentId+g));break;case"unaccepted":t.onUnaccepted&&t.onUnaccepted(f),t.ignoreUnaccepted||(m=new Error("Aborted because "+r+" is not accepted"+g));break;case"accepted":t.onAccepted&&t.onAccepted(f),h=!0;break;case"disposed":t.onDisposed&&t.onDisposed(f),v=!0;break;default:throw new Error("Unexception type "+f.type)}if(m)return T("abort"),Promise.reject(m);if(h)for(r in s[r]=q[r],u(o,f.outdatedModules),f.outdatedDependencies)Object.prototype.hasOwnProperty.call(f.outdatedDependencies,r)&&(l[r]||(l[r]=[]),u(l[r],f.outdatedDependencies[r]));v&&(u(o,[f.moduleId]),s[r]=c)}var y,E=[];for(a=0;a<o.length;a++)r=o[a],A[r]&&A[r].hot._selfAccepted&&E.push({module:r,errorHandler:A[r].hot._selfAccepted});T("dispose"),Object.keys(L).forEach(function(e){!1===L[e]&&delete H[e]});for(var b,w,k=o.slice();0<k.length;)if(r=k.pop(),d=A[r]){var j={},x=d.hot._disposeHandlers;for(n=0;n<x.length;n++)(e=x[n])(j);for(P[r]=j,d.hot.active=!1,delete A[r],delete l[r],n=0;n<d.children.length;n++){var S=A[d.children[n]];S&&(0<=(y=S.parents.indexOf(r))&&S.parents.splice(y,1))}}for(r in l)if(Object.prototype.hasOwnProperty.call(l,r)&&(d=A[r]))for(w=l[r],n=0;n<w.length;n++)b=w[n],0<=(y=d.children.indexOf(b))&&d.children.splice(y,1);for(r in T("apply"),O=N,s)Object.prototype.hasOwnProperty.call(s,r)&&(I[r]=s[r]);var C=null;for(r in l)if(Object.prototype.hasOwnProperty.call(l,r)&&(d=A[r])){w=l[r];var D=[];for(a=0;a<w.length;a++)if(b=w[a],e=d.hot._acceptedDependencies[b]){if(-1!==D.indexOf(e))continue;D.push(e)}for(a=0;a<D.length;a++){e=D[a];try{e(w)}catch(e){t.onErrored&&t.onErrored({type:"accept-errored",moduleId:r,dependencyId:w[a],error:e}),t.ignoreErrored||C||(C=e)}}}for(a=0;a<E.length;a++){var M=E[a];r=M.module,_=[r];try{F(r)}catch(a){if("function"==typeof M.errorHandler)try{M.errorHandler(a)}catch(e){t.onErrored&&t.onErrored({type:"self-accept-error-handler-errored",moduleId:r,error:e,originalError:a}),t.ignoreErrored||C||(C=e),C||(C=a)}else t.onErrored&&t.onErrored({type:"self-accept-errored",moduleId:r,error:a}),t.ignoreErrored||C||(C=a)}}return C?(T("fail"),Promise.reject(C)):(T("idle"),new Promise(function(e){e(o)}))}var A={},H={4:0},g=[];function F(e){if(A[e])return A[e].exports;var a,n,t=A[e]={i:e,l:!1,exports:{},hot:(a=e,n={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:i!==a,active:!0,accept:function(e,a){if(void 0===e)n._selfAccepted=!0;else if("function"==typeof e)n._selfAccepted=e;else if("object"==typeof e)for(var t=0;t<e.length;t++)n._acceptedDependencies[e[t]]=a||function(){};else n._acceptedDependencies[e]=a||function(){}},decline:function(e){if(void 0===e)n._selfDeclined=!0;else if("object"==typeof e)for(var a=0;a<e.length;a++)n._declinedDependencies[e[a]]=!0;else n._declinedDependencies[e]=!0},dispose:function(e){n._disposeHandlers.push(e)},addDisposeHandler:function(e){n._disposeHandlers.push(e)},removeDisposeHandler:function(e){var a=n._disposeHandlers.indexOf(e);0<=a&&n._disposeHandlers.splice(a,1)},check:f,apply:v,status:function(e){if(!e)return V;l.push(e)},addStatusHandler:function(e){l.push(e)},removeStatusHandler:function(e){var a=l.indexOf(e);0<=a&&l.splice(a,1)},data:P[a]},i=void 0,n),parents:(r=_,_=[],r),children:[]};return I[e].call(t.exports,t,t.exports,function(a){var t=A[a];if(!t)return F;var n=function(e){return t.hot.active?(A[e]?-1===A[e].parents.indexOf(a)&&A[e].parents.push(a):(_=[a],i=e),-1===t.children.indexOf(e)&&t.children.push(e)):(console.warn("[HMR] unexpected require("+e+") from disposed module "+a),_=[]),F(e)},e=function(a){return{configurable:!0,enumerable:!0,get:function(){return F[a]},set:function(e){F[a]=e}}};for(var r in F)Object.prototype.hasOwnProperty.call(F,r)&&"e"!==r&&"t"!==r&&Object.defineProperty(n,r,e(r));return n.e=function(e){return"ready"===V&&T("prepare"),d++,F.e(e).then(a,function(e){throw a(),e});function a(){d--,"prepare"===V&&(u[e]||m(e),0===d&&0===c&&h())}},n.t=function(e,a){return 1&a&&(e=n(e)),F.t(e,-2&a)},n}(e)),t.l=!0,t.exports}F.m=I,F.c=A,F.d=function(e,a,t){F.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:t})},F.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},F.t=function(a,e){if(1&e&&(a=F(a)),8&e)return a;if(4&e&&"object"==typeof a&&a&&a.__esModule)return a;var t=Object.create(null);if(F.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:a}),2&e&&"string"!=typeof a)for(var n in a)F.d(t,n,function(e){return a[e]}.bind(null,n));return t},F.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return F.d(a,"a",a),a},F.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},F.p="",F.h=function(){return O};var y=window.webpackJsonp=window.webpackJsonp||[],E=y.push.bind(y);y.push=e,y=y.slice();for(var b=0;b<y.length;b++)e(y[b]);var w=E;g.push([1612,0]),s()}({1594:function(e,a,t){},1595:function(e,a,t){},1612:function(e,a,t){"use strict";t.r(a);t(165);var n=t(0),v=t.n(n),y=t(3),r=t.n(y),i=t(9),E=t.n(i),l=t(18),o=t.n(l),s=t(29),c=t.n(s),d=t(11),u=t.n(d),p=t(12),f=t.n(p),m=t(13),h=t.n(m),g=t(14),b=t.n(g),w=t(15),k=t.n(w),j=t(2),x=t(4),S=t(5),C=t.n(S),D=t(7),M=t(55),I=t(51),O=t(19),P=t(56),_=t(78),V=t(6),T=t.n(V),q=t(59),N=t.n(q),L=t(26),Y=t(63),A=t.n(Y),H=t(49),F=t.n(H),U=t(54),R=t(107),G=t(133),J=L.a.Item,K=x.Select.Option,z=A.a.YearPicker,Q=function(e){function a(e){var m;return u()(this,a),(m=h()(this,b()(a).call(this,e))).search=function(){var e=m.props,t=e.status;(0,e.form.validateFields)(function(e,a){a.year&&(a.year=a.year.format("YYYY")),a.dept&&(a.dept=JSON.parse(a.dept).refpk),"view"!=t?m.setState({show:!0,values:a}):m.getQuery(a,0)})},m.reset=function(){m.props.form.resetFields()},m.onClickGo=function(){m.getQuery(m.state.values,0),m.setState({show:!1}),y.actions.inlineEdit.updateState({status:"view",rowEditStatus:!0})},m.onClickCancel=function(){m.setState({show:!1})},m.getQuery=function(e,a){var t=Object(D.f)(m.props.queryParam),n=t.pageParams,r=t.whereParams;for(var i in r=Object(D.f)(r),n.pageIndex=0,e){var l=!0,o=!1,s=void 0;try{for(var c,d=r.entries()[Symbol.iterator]();!(l=(c=d.next()).done);l=!0){var u=N()(c.value,2),p=u[0];if(i===u[1].key){r.splice(p,1);break}}}catch(e){o=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(o)throw s}}if((e[i]||0===e[i])&&0===a){var f="LIKE";["code","month"].includes(i)&&(f="EQ"),["serviceYearsCompany"].includes(i)&&(f="GTEQ"),r.push({key:i,value:e[i],condition:f})}}t.whereParams=r,0===a&&y.actions.inlineEdit.loadList(t)},m.state={show:!1},m}return k()(a,e),f()(a,[{key:"render",value:function(){var e=this.props,a=e.form.getFieldProps,t=e.searchOpen,n=e.onCallback;return v.a.createElement(R.a,{searchOpen:t,reset:this.reset,onCallback:n,search:this.search,intl:this.props.intl},v.a.createElement(L.a,{size:"sm"},v.a.createElement(J,{label:v.a.createElement(j.a,{id:"js.com.Sea2.0001",defaultMessage:"员工编号"})},v.a.createElement(x.FormControl,T()({placeholder:this.props.intl.formatMessage({id:"js.com.Sea2.0002",defaultMessage:"精确查询"})},a("code",{initialValue:""})))),v.a.createElement(J,{label:v.a.createElement(j.a,{id:"js.com.Sea2.0003",defaultMessage:"员工姓名"})},v.a.createElement(x.FormControl,T()({placeholder:this.props.intl.formatMessage({id:"js.com.Sea2.0004",defaultMessage:"模糊查询"})},a("name",{initialValue:""})))),v.a.createElement(J,{label:v.a.createElement(j.a,{id:"js.com.Sea2.0005",defaultMessage:"部门"})},v.a.createElement(U.a,a("dept",{initialValue:""}))),v.a.createElement(J,{label:v.a.createElement(j.a,{id:"js.com.Sea2.0006",defaultMessage:"年份"})},v.a.createElement(z,T()({},a("year",{initialValue:null}),{format:"YYYY",locale:F.a,placeholder:this.props.intl.formatMessage({id:"js.com.Sea2.0007",defaultMessage:"选择年"})}))),v.a.createElement(J,{label:v.a.createElement(j.a,{id:"js.com.Sea2.0008",defaultMessage:"月份"})},v.a.createElement(G.a,a("month",{initialValue:""}))),v.a.createElement(J,{label:v.a.createElement(j.a,{id:"js.com.Sea2.0009",defaultMessage:"是否超标"})},v.a.createElement(x.Select,a("exdeeds",{initialValue:""}),v.a.createElement(K,{value:""},v.a.createElement(j.a,{id:"js.com.Sea2.0010",defaultMessage:"请选择"})),v.a.createElement(K,{value:"0"},v.a.createElement(j.a,{id:"js.com.Sea2.0011",defaultMessage:"未超标"})),v.a.createElement(K,{value:"1"},v.a.createElement(j.a,{id:"js.com.Sea2.0012",defaultMessage:"超标"}))))),v.a.createElement(P.a,{show:this.state.show,context:"数据未保存，确定查询 ?",confirmFn:this.onClickGo,cancelFn:this.onClickCancel}))}}]),a}(n.Component),W=L.a.createForm()(Object(j.d)(Q)),X=t(190),B=t(27),Z=t.n(B),$=t(1),ee=t.n($),ae=t(70),te=t(69),ne=(t(158),{value:ee.a.any,onChange:ee.a.func,className:ee.a.string,field:ee.a.string,index:ee.a.number,message:ee.a.string,data:ee.a.array,required:ee.a.bool,onValidate:ee.a.func,isFlag:ee.a.bool,validate:ee.a.bool}),re={field:"",index:"",message:v.a.createElement(j.a,{id:"js.com.Row2.0001",defaultMessage:"请选择此字段"}),data:[],required:!1,isFlag:!1,validate:!1,className:""},ie=function(e){function a(e){var o;return u()(this,a),(o=h()(this,b()(a).call(this,e))).handlerChange=function(e){var a=o.props,t=a.onChange,n=a.field,r=a.index,i=a.status;o.setState({value:e,flag:"edit"==i},function(){o.validate()}),t&&t(n,e,r)},o.validate=function(){var e=o.props,a=e.required,t=e.field,n=e.index,r=e.onValidate,i=o.state.value,l=Z()({},t,{type:"number",required:a});new ae.a(l).validate(Z()({},t,i),function(e,a){e?o.setState({error:!0}):o.setState({error:!1}),r&&r(t,a,n)})},o.state={value:e.value,flag:!1,error:!1},o}return k()(a,e),f()(a,[{key:"componentWillReceiveProps",value:function(e,a){1==e.validate&&this.validate()}},{key:"render",value:function(){var e=this.state,a=e.value,t=e.error,n=e.flag,r=this.props,i=r.className,l=r.message,o=r.required,s=r.data;return v.a.createElement(te.a,{required:o,error:t,message:l,flag:n},v.a.createElement(x.Select,{className:i,value:a,onChange:this.handlerChange,data:s}))}}]),a}(n.Component);ie.propTypes=ne,ie.defaultProps=re;var le=ie,oe=t(163),se=t(187),ce=t.n(se).a.YearPicker,de={value:ee.a.any,onChange:ee.a.func,className:ee.a.string,field:ee.a.string,index:ee.a.number,message:ee.a.string,data:ee.a.array,required:ee.a.bool,onValidate:ee.a.func,isFlag:ee.a.bool,validate:ee.a.bool},ue={field:"",index:"",message:v.a.createElement(j.a,{id:"js.com.Row1.0001",defaultMessage:"请输入此字段"}),data:[],required:!1,isFlag:!1,validate:!1},pe=function(e){function a(e){var o;return u()(this,a),(o=h()(this,b()(a).call(this,e))).handlerChange=function(e){var a=o.props,t=a.onChange,n=a.field,r=a.index,i=a.status;o.setState({value:e,flag:"edit"==i},function(){o.validate()}),t&&t(n,C()(e).format("YYYY"),r)},o.validate=function(){var e=o.props,a=e.required,t=e.field,n=e.index,r=e.onValidate,i=o.state.value,l=Z()({},t,{type:"object",required:a});new ae.a(l).validate(Z()({},t,i),function(e,a){e?o.setState({error:!0}):o.setState({error:!1}),r&&r(t,a,n)})},o.state={value:C()(e.value),flag:!1,error:!1},o}return k()(a,e),f()(a,[{key:"componentWillReceiveProps",value:function(e){1==e.validate&&this.validate()}},{key:"render",value:function(){var e=this.state,a=e.value,t=e.error,n=e.flag,r=this.props,i=r.className,l=r.message,o=r.required;return v.a.createElement(te.a,{required:o,error:t,message:l,flag:n},v.a.createElement(ce,{className:i,value:a,onChange:this.handlerChange,format:"YYYY",locale:F.a,placeholder:this.props.intl.formatMessage({id:"js.com.Row1.0002",defaultMessage:"选择年"})}))}}]),a}(n.Component);pe.propTypes=de,pe.defaultProps=ue;var fe=pe,me={value:ee.a.any,onChange:ee.a.func,className:ee.a.string,field:ee.a.string,index:ee.a.number,message:ee.a.string,data:ee.a.array,required:ee.a.bool,onValidate:ee.a.func,isFlag:ee.a.bool,validate:ee.a.bool},he={field:"",index:"",message:v.a.createElement(j.a,{id:"js.com.Row3.0001",defaultMessage:"请选择部门参照"}),data:[],required:!1,isFlag:!1,validate:!1},ve=function(e){function a(e){var o;return u()(this,a),(o=h()(this,b()(a).call(this,e))).handlerChange=function(e){var a=o.props,t=a.onChange,n=a.field,r=a.index,i=a.status,l=JSON.parse(e).refpk;o.setState({value:e,flag:"edit"==i},function(){o.validate()}),t&&t(n,l,r)},o.validate=function(){var e=o.props,a=e.required,t=e.field,n=e.index,r=e.onValidate,i=o.state.value,l=Z()({},t,{type:"string",required:a,pattern:/[^({"refname":"","refpk":""}|{"refpk":"","refname":""})]/});new ae.a(l).validate(Z()({},t,i),function(e,a){e?o.setState({error:!0}):o.setState({error:!1}),r&&r(t,a,n)})},o.state={value:e.record.deptName?JSON.stringify({refpk:e.record.dept,refname:e.record.deptName}):"",flag:!1,error:!1},o}return k()(a,e),f()(a,[{key:"componentWillReceiveProps",value:function(e){1==e.validate&&this.validate()}},{key:"render",value:function(){var e=this.state,a=e.value,t=e.error,n=e.flag,r=this.props,i=r.className,l=r.message,o=r.required;return v.a.createElement(te.a,{required:o,error:t,message:l,flag:n},v.a.createElement(U.a,{style:{width:"100%"},className:i,value:a,onChange:this.handlerChange}))}}]),a}(n.Component);ve.propTypes=me,ve.defaultProps=he;var ge=ve,ye={value:ee.a.any,onChange:ee.a.func,className:ee.a.string,field:ee.a.string,index:ee.a.number,message:ee.a.string,data:ee.a.array,required:ee.a.bool,onValidate:ee.a.func,isFlag:ee.a.bool,validate:ee.a.bool},Ee={field:"",index:"",message:v.a.createElement(j.a,{id:"js.com.Row6.0001",defaultMessage:"请选择职级参照"}),data:[],required:!1,isFlag:!1,validate:!1},be=function(e){function a(e){var o;return u()(this,a),(o=h()(this,b()(a).call(this,e))).handlerChange=function(e){var a=o.props,t=a.onChange,n=a.field,r=a.index,i=a.status,l=JSON.parse(e).refpk;o.setState({value:e,flag:"edit"==i},function(){o.validate()}),t&&t(n,l,r)},o.validate=function(){var e=o.props,a=e.required,t=e.field,n=e.index,r=e.onValidate,i=o.state.value,l=Z()({},t,{type:"string",required:a,pattern:/[^({"refname":"","refpk":""}|{"refpk":"","refname":""})]/});new ae.a(l).validate(Z()({},t,i),function(e,a){e?o.setState({error:!0}):o.setState({error:!1}),r&&r(t,a,n)})},o.state={value:e.record.levelName?JSON.stringify({refpk:e.record.postLevel,refname:e.record.levelName}):"",flag:!1,error:!1},o}return k()(a,e),f()(a,[{key:"componentWillReceiveProps",value:function(e){1==e.validate&&this.validate()}},{key:"render",value:function(){var e=this.state,a=e.value,t=e.error,n=e.flag,r=this.props,i=r.className,l=r.message,o=r.required;return v.a.createElement(te.a,{required:o,error:t,message:l,flag:n},v.a.createElement(U.b,{style:{width:"100%"},className:i,value:a,onChange:this.handlerChange}))}}]),a}(n.Component);be.propTypes=ye,be.defaultProps=Ee;var we,ke,je,xe,Se=be,Ce=t(277),De={name:{component:X.a,type:"text"},sex:{component:le,selectList:[{key:v.a.createElement(j.a,{id:"js.com.Ind2.0001",defaultMessage:"请选择"}),value:"",disabled:!0},{key:v.a.createElement(j.a,{id:"js.com.Ind2.0002",defaultMessage:"男"}),value:1},{key:v.a.createElement(j.a,{id:"js.com.Ind2.0003",defaultMessage:"女"}),value:0}],type:"select"},serviceYears:{component:oe.a,props:{iconStyle:"one",max:99,min:0,step:1},type:"number"},serviceYearsCompany:{component:oe.a,props:{iconStyle:"one",max:99,min:0,step:1},type:"number"},month:{component:le,selectList:[{key:v.a.createElement(j.a,{id:"js.com.Ind2.0001",defaultMessage:"请选择"}),value:"",disabled:!0},{key:v.a.createElement(j.a,{id:"js.com.Ind2.0004",defaultMessage:"一月"}),value:1},{key:v.a.createElement(j.a,{id:"js.com.Ind2.0005",defaultMessage:"二月"}),value:2},{key:v.a.createElement(j.a,{id:"js.com.Ind2.0006",defaultMessage:"三月"}),value:3},{key:v.a.createElement(j.a,{id:"js.com.Ind2.0007",defaultMessage:"四月"}),value:4},{key:v.a.createElement(j.a,{id:"js.com.Ind2.0008",defaultMessage:"五月"}),value:5},{key:v.a.createElement(j.a,{id:"js.com.Ind2.0009",defaultMessage:"六月"}),value:6},{key:v.a.createElement(j.a,{id:"js.com.Ind2.0010",defaultMessage:"七月"}),value:7},{key:v.a.createElement(j.a,{id:"js.com.Ind2.0011",defaultMessage:"八月"}),value:8},{key:v.a.createElement(j.a,{id:"js.com.Ind2.0012",defaultMessage:"九月"}),value:9},{key:v.a.createElement(j.a,{id:"js.com.Ind2.0013",defaultMessage:"十月"}),value:10},{key:v.a.createElement(j.a,{id:"js.com.Ind2.0014",defaultMessage:"十一月"}),value:11},{key:v.a.createElement(j.a,{id:"js.com.Ind2.0015",defaultMessage:"十二月"}),value:12}],type:"select"},allowanceType:{component:le,selectList:[{key:v.a.createElement(j.a,{id:"js.com.Ind2.0001",defaultMessage:"请选择"}),value:"",disabled:!0},{key:v.a.createElement(j.a,{id:"js.com.Ind2.0016",defaultMessage:"电脑补助"}),value:1},{key:v.a.createElement(j.a,{id:"js.com.Ind2.0017",defaultMessage:"住宿补助"}),value:2},{key:v.a.createElement(j.a,{id:"js.com.Ind2.0018",defaultMessage:"交通补助"}),value:3}],type:"select"},allowanceStandard:{component:oe.a,props:{max:999999,min:0,step:1,precision:2},type:"number"},allowanceActual:{component:oe.a,props:{max:999999,min:0,step:1,precision:2},type:"number"},exdeeds:{component:le,selectList:[{key:v.a.createElement(j.a,{id:"js.com.Ind2.0001",defaultMessage:"请选择"}),value:"",disabled:!0},{key:v.a.createElement(j.a,{id:"js.com.Ind2.0019",defaultMessage:"未超标"}),value:0},{key:v.a.createElement(j.a,{id:"js.com.Ind2.0020",defaultMessage:"超标"}),value:1}],type:"select"},pickType:{component:le,selectList:[{key:v.a.createElement(j.a,{id:"js.com.Ind2.0001",defaultMessage:"请选择"}),value:"",disabled:!0},{key:v.a.createElement(j.a,{id:"js.com.Ind2.0021",defaultMessage:"转账"}),value:1},{key:v.a.createElement(j.a,{id:"js.com.Ind2.0022",defaultMessage:"现金"}),value:2}],type:"select"},remark:{component:X.a,type:"text"},year:{component:fe,type:"dateYear"},date:{component:Ce.a,type:"date"},dept:{component:ge,type:"ref",valueKey:"deptName"},level:{component:Se,type:"ref",valueKey:"levelName"}},Me=function(e){function a(e){var m;return u()(this,a),(m=h()(this,b()(a).call(this,e))).renderComp=function(){var e=m.props,a=e.type,t=e.value,n=e.record,r=De[a];if(r){var i,l=r.component,o=r.type,s=r.props,c=s||{},d=n._edit,u=n._status,p=n._validate;switch(o){case"dateYear":case"date":case"text":i=t;break;case"number":i=s.precision&&0<s.precision?"number"==typeof t?t.toFixed(s.precision):"":t;break;case"select":var f=r.selectList.find(function(e){return e.value===t});i=f?f.key:"";break;case"ref":i=n[r.valueKey];break;default:i=""}return d?v.a.createElement(l,T()({status:u,validate:p},c,m.props,{data:r.selectList})):v.a.createElement("div",null,i)}return v.a.createElement("div",null,v.a.createElement(j.a,{id:"js.com.Ind2.0023",defaultMessage:"组件类型错误"}))},m}return k()(a,e),f()(a,[{key:"render",value:function(){return v.a.createElement("div",null,this.renderComp())}}]),a}(n.Component),Ie=Object(j.d)(Me),Oe=(t(1594),function(e){function a(e){var s;return u()(this,a),(s=h()(this,b()(a).call(this,e))).oldData=[],s.column=[{title:v.a.createElement(j.a,{id:"js.com.Ind1.0001",defaultMessage:"员工编号"}),dataIndex:"code",key:"code",width:150},{title:v.a.createElement(j.a,{id:"js.com.Ind1.0002",defaultMessage:"员工姓名"}),dataIndex:"name",key:"name",width:120,render:function(e,a,t){return v.a.createElement(Ie,{type:"name",value:e,field:"name",index:t,required:!0,record:a,onChange:s.changeAllData,onValidate:s.onValidate})}},{title:v.a.createElement(j.a,{id:"js.com.Ind1.0003",defaultMessage:"员工性别"}),dataIndex:"sexEnumValue",key:"sexEnumValue",width:120,render:function(e,a,t){return v.a.createElement(Ie,{type:"sex",value:a.sex,field:"sex",index:t,required:!0,record:a,onChange:s.changeAllData,onValidate:s.onValidate})}},{title:v.a.createElement(j.a,{id:"js.com.Ind1.0004",defaultMessage:"所属部门"}),dataIndex:"deptName",key:"deptName",width:120,render:function(e,a,t){return v.a.createElement(Ie,{type:"dept",field:"dept",index:t,required:!0,record:a,onChange:s.changeAllData,onValidate:s.onValidate})}},{title:v.a.createElement(j.a,{id:"js.com.Ind1.0005",defaultMessage:"职级"}),dataIndex:"levelName",key:"levelName",width:120,render:function(e,a,t){return v.a.createElement(Ie,{type:"level",field:"postLevel",index:t,required:!0,record:a,onChange:s.changeAllData,onValidate:s.onValidate})}},{title:v.a.createElement(j.a,{id:"js.com.Ind1.0006",defaultMessage:"工龄"}),dataIndex:"serviceYears",key:"serviceYears",width:130,className:"column-number-right ",render:function(e,a,t){return v.a.createElement(Ie,{type:"serviceYears",value:e,field:"serviceYears",index:t,required:!0,record:a,onChange:s.changeAllData,onValidate:s.onValidate})}},{title:v.a.createElement(j.a,{id:"js.com.Ind1.0007",defaultMessage:"司龄"}),dataIndex:"serviceYearsCompany",key:"serviceYearsCompany",width:130,className:"column-number-right ",render:function(e,a,t){return v.a.createElement(Ie,{type:"serviceYearsCompany",value:e,field:"serviceYearsCompany",index:t,required:!0,record:a,onChange:s.changeAllData,onValidate:s.onValidate})}},{title:v.a.createElement(j.a,{id:"js.com.Ind1.0008",defaultMessage:"年份"}),dataIndex:"year",key:"year",width:100,render:function(e,a,t){return v.a.createElement(Ie,{type:"year",value:e,field:"year",index:t,required:!0,record:a,onChange:s.changeAllData,onValidate:s.onValidate})}},{title:v.a.createElement(j.a,{id:"js.com.Ind1.0009",defaultMessage:"月份"}),dataIndex:"monthEnumValue",key:"monthEnumValue",width:120,render:function(e,a,t){return v.a.createElement(Ie,{type:"month",value:a.month,field:"month",index:t,required:!0,record:a,onChange:s.changeAllData,onValidate:s.onValidate})}},{title:v.a.createElement(j.a,{id:"js.com.Ind1.0010",defaultMessage:"补贴类别"}),dataIndex:"allowanceTypeEnumValue",key:"allowanceTypeEnumValue",width:120,render:function(e,a,t){return v.a.createElement(Ie,{type:"allowanceType",value:a.allowanceType,field:"allowanceType",index:t,required:!0,record:a,onChange:s.changeAllData,onValidate:s.onValidate})}},{title:v.a.createElement(j.a,{id:"js.com.Ind1.0011",defaultMessage:"补贴标准"}),dataIndex:"allowanceStandard",key:"allowanceStandard",width:120,className:"column-number-right ",render:function(e,a,t){return v.a.createElement(Ie,{type:"allowanceStandard",value:e,field:"allowanceStandard",index:t,required:!0,record:a,onChange:s.changeAllData,onValidate:s.onValidate})}},{title:v.a.createElement(j.a,{id:"js.com.Ind1.0012",defaultMessage:"实际补贴"}),dataIndex:"allowanceActual",key:"allowanceActual",width:120,className:"column-number-right ",render:function(e,a,t){return v.a.createElement(Ie,{type:"allowanceActual",value:e,field:"allowanceActual",index:t,required:!0,record:a,onChange:s.changeAllData,onValidate:s.onValidate})}},{title:v.a.createElement(j.a,{id:"js.com.Ind1.0013",defaultMessage:"是否超标"}),dataIndex:"exdeedsEnumValue",key:"exdeedsEnumValue",width:120,render:function(e,a,t){return v.a.createElement(Ie,{type:"exdeeds",value:a.exdeeds,field:"exdeeds",index:t,required:!0,record:a,onChange:s.changeAllData,onValidate:s.onValidate})}},{title:v.a.createElement(j.a,{id:"js.com.Ind1.0014",defaultMessage:"申请时间"}),dataIndex:"applyTime",key:"applyTime",width:200,render:function(e,a,t){return""!==e&&void 0!==e?v.a.createElement("div",null,C()(e).format("YYYY-MM-DD hh:mm:ss")):v.a.createElement("div",null)}},{title:v.a.createElement(j.a,{id:"js.com.Ind1.0015",defaultMessage:"领取方式"}),dataIndex:"pickTypeEnumValue",key:"pickTypeEnumValue",width:120,render:function(e,a,t){return v.a.createElement(Ie,{type:"pickType",value:a.pickType,field:"pickType",index:t,required:!0,record:a,onChange:s.changeAllData,onValidate:s.onValidate})}},{title:v.a.createElement(j.a,{id:"js.com.Ind1.0016",defaultMessage:"领取时间"}),dataIndex:"pickTime",key:"pickTime",width:200,render:function(e,a,t){return""!==e&&void 0!==e?v.a.createElement("div",null,C()(e).format("YYYY-MM-DD hh:mm:ss")):v.a.createElement("div",null)}},{title:v.a.createElement(j.a,{id:"js.com.Ind1.0017",defaultMessage:"备注"}),dataIndex:"remark",key:"remark",width:100,render:function(e,a,t){return v.a.createElement(Ie,{type:"remark",value:e,field:"remark",index:t,required:!1,record:a,onChange:s.changeAllData,onValidate:s.onValidate})}}],s.changeAllData=function(e,a,t){var n=s.oldData,r=Object(D.f)(s.props.list);n[t][e]=a,r[t]._checked||(r[t]._checked=!0,y.actions.inlineEdit.updateState({list:r})),n[t]._checked=!0,s.oldData=n},s.onValidate=function(e,a,t){0<s.oldData.length&&(s.oldData[t]["_".concat(e,"Validate")]=null==a)},s.getSelectedDataFunc=function(e,a,t){var n=s.props.list,r=Object(D.f)(n);null!=t?r[t]._checked=!r[t]._checked:0<e.length?r.map(function(e){e._disabled||(e._checked=!0)}):r.map(function(e){e._disabled||(e._checked=!1)}),y.actions.inlineEdit.updateState({selectData:e,list:r})},s.freshData=function(e){s.onPageSelect(e,0)},s.onDataNumSelect=function(e,a){s.onPageSelect(a,1)},s.onPageSelect=function(e,a){var t=Object(D.f)(s.props.queryParam),n=Object(D.k)(e,a,t.pageParams),r=n.pageIndex,i=n.pageSize;t.pageParams={pageIndex:r,pageSize:i},y.actions.inlineEdit.updateState(t),y.actions.inlineEdit.loadList(t)},s.filterArrayNull=function(e){return e.filter(function(e){return null!=e})},s.hasCheck=function(){var e=s.props,a=e.selectData,t=e.list,n=!1;return a.forEach(function(e){1==e._checked&&(n=!0)}),t.forEach(function(e){1==e._checked&&(n=!0)}),n},s.newDataTmp={_edit:!0,_isNew:!0,_checked:!1,_disabled:!1,_flag:!1,code:"",name:"",sex:"",sexEnumValue:"",deptName:"",levelName:"",serviceYears:0,serviceYearsCompany:0,year:C()().format("YYYY"),month:"",monthEnumValue:"",allowanceType:"",allowanceTypeEnumValue:"",allowanceStandard:0,allowanceActual:0,exdeeds:"",exdeedsEnumValue:"",pickType:"",pickTypeEnumValue:"",remark:""},s.handlerNew=function(){var e=Object(D.f)(s.props.list),a=c()({key:Object(D.r)()},s.newDataTmp);s.oldData.length<=0&&(e.forEach(function(e){e._disabled=!0,e._checked=!1}),s.grid.resetColumns(s.column)),s.oldData.unshift(a),e.unshift(a),y.actions.inlineEdit.updateState({list:e,status:"new",rowEditStatus:!1,selectData:[]})},s.onClickUpdate=function(){var e=s.props.list.map(function(e){return e._edit=!0,e._checked=!1,e._status="edit",e});s.grid.resetColumns(s.column),s.oldData=Object(D.f)(e),y.actions.inlineEdit.updateState({list:e,status:"edit",rowEditStatus:!1})},s.onClickDownloadTemplate=function(){window.open("".concat("/iuap-pap-demo-be","/inline_allowances/excelTemplateDownload"))},s.filterList=function(e,a,n){var r=a.slice(),i=[];return e.forEach(function(t){r.forEach(function(e,a){t[n]===e[n]&&e._checked&&(e._validate=!0,i.push(t))})}),{newList:r,selectList:i}},s.isVerifyData=function(r){var i=!0,l=/Validate\b/;return r.forEach(function(e,a){var t=Object.keys(e);if(i)for(var n=0;n<t.length;n++)if(l.test(t[n])){if(!r[a][t[n]]){i=!1;break}i=!0}}),i},s.onClickSave=o()(E.a.mark(function e(){var a,t,n,r,i,l,o;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=s.props,t=a.status,n=a.list,r=a.intl,l=i=null,o=r.formatMessage({id:"js.com.Ind1.0018",defaultMessage:"请勾选数据后再新增"}),e.t0=t,e.next="new"===e.t0?7:"edit"===e.t0?10:14;break;case 7:return i=s.filterList(s.oldData,n,"key"),l=y.actions.inlineEdit.adds,e.abrupt("break",15);case 10:return i=s.filterList(s.oldData,n,"id"),l=y.actions.inlineEdit.updates,o=r.formatMessage({id:"js.com.Ind1.0019",defaultMessage:"请勾选数据后再更新"}),e.abrupt("break",15);case 14:return e.abrupt("break",15);case 15:if(0<i.selectList.length)return e.next=18,y.actions.inlineEdit.updateState({list:i.newList});e.next=28;break;case 18:if(s.isVerifyData(i.selectList))return e.next=21,l(i.selectList);e.next=25;break;case 21:e.sent&&(s.oldData=[]),e.next=26;break;case 25:Object(D.b)(r.formatMessage({id:"js.com.Ind1.0020",defaultMessage:"数据填写不完整"}));case 26:e.next=29;break;case 28:Object(D.b)(o);case 29:case"end":return e.stop()}},e)})),s.onClickDelConfirm=function(){var e=s.props,a=e.selectData,t=e.intl;0<a.length?s.setState({showPop:!0}):Object(D.b)(t.formatMessage({id:"js.com.Ind1.0021",defaultMessage:"请勾选数据后再删除"}))},s.onClickDel=o()(E.a.mark(function e(){var a;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.props.selectData,e.next=3,y.actions.inlineEdit.removes(a);case 3:e.sent&&(s.oldData=[]),s.setState({showPop:!1});case 6:case"end":return e.stop()}},e)})),s.onClickPopCancel=function(){s.setState({showPop:!1})},s.onClickCancel=function(){s.hasCheck()?s.setState({showPopCancel:!0}):(s.oldData=[],y.actions.inlineEdit.resetData(!0),y.actions.inlineEdit.updateState({selectData:[],rowEditStatus:!0}))},s.onClickPopUnSaveOK=function(){y.actions.inlineEdit.resetData(!0),y.actions.inlineEdit.updateState({selectData:[],rowEditStatus:!0}),s.setState({showPopCancel:!1}),s.oldData=[]},s.onClickPopUnSaveCancel=function(){s.setState({showPopCancel:!1})},s.onClickExport=function(){s.grid.exportExcel()},s.resetTableHeight=function(e){var a=0;a=e?Object(D.j)()-420:Object(D.j)()-270,s.setState({tableHeight:a})},s.state={tableHeight:0,showPop:!1,showPopCancel:!1,validate:!1},s}return k()(a,e),f()(a,[{key:"componentWillMount",value:function(){this.resetTableHeight(!0)}},{key:"componentDidMount",value:function(){y.actions.inlineEdit.loadList(this.props.queryParam)}},{key:"render",value:function(){var a=this,e=this.state,t=e.showPop,n=e.showPopCancel,r=e.tableHeight,i=this.props,l=i.list,o=i.showLoading,s=i.pageIndex,c=i.pageSize,d=i.totalPages,u=i.total,p=i.status,f=i.rowEditStatus,m=i.queryParam,h={activePage:s,total:u,items:d,freshData:this.freshData,onDataNumSelect:this.onDataNumSelect,disabled:"view"!==p};return v.a.createElement("div",{className:"inline-edit"},v.a.createElement(I.a,{title:this.props.intl.formatMessage({id:"js.com.Ind1.0022",defaultMessage:"A2单表行内编辑示例"})}),v.a.createElement(W,{queryParam:m,status:p,pageSize:c,searchOpen:!0,onCallback:this.resetTableHeight}),v.a.createElement("div",{className:"table-header"},v.a.createElement(_.a,{funcCode:"singletable-inlineEdit"},v.a.createElement(O.a,{role:"add",disabled:Object(D.h)("add",p),className:"ml8",colors:"primary",onClick:this.handlerNew},v.a.createElement(j.a,{id:"js.com.Ind1.0024",defaultMessage:"新增"})),v.a.createElement(O.a,{role:"update",shape:"border",disabled:Object(D.h)("edit",p),className:"ml8",onClick:this.onClickUpdate},v.a.createElement(j.a,{id:"js.com.Ind1.0025",defaultMessage:"修改"})),v.a.createElement(O.a,{role:"delete",shape:"border",disabled:Object(D.h)("del",p),className:"ml8",onClick:this.onClickDelConfirm},v.a.createElement(j.a,{id:"js.com.Ind1.0026",defaultMessage:"删除"})),v.a.createElement(O.a,{shape:"border",disabled:Object(D.h)("export",p),className:"ml8",onClick:this.onClickExport},v.a.createElement(j.a,{id:"js.com.Ind1.0027",defaultMessage:"导出"})),v.a.createElement(O.a,{shape:"border",disabled:Object(D.h)("save",p),className:"ml8",onClick:this.onClickSave},v.a.createElement(j.a,{id:"js.com.Ind1.0028",defaultMessage:"保存"})),v.a.createElement(O.a,{shape:"border",disabled:Object(D.h)("cancel",p),className:"ml8",onClick:this.onClickCancel},v.a.createElement(j.a,{id:"js.com.Ind1.0029",defaultMessage:"取消"})),v.a.createElement(P.a,{show:n,context:v.a.createElement(j.a,{id:"js.com.Ind1.0030",defaultMessage:"数据未保存，确定离开 ?"}),confirmFn:this.onClickPopUnSaveOK,cancelFn:this.onClickPopUnSaveCancel}))),v.a.createElement("div",{className:"grid-parent"},v.a.createElement(M.a,{ref:function(e){return a.grid=e},data:l,rowKey:function(e){return e.id?e.id:e.key},columns:this.column,paginationObj:h,columnFilterAble:f,showHeaderMenu:f,dragborder:f,draggable:f,syncHover:f,getSelectedDataFunc:this.getSelectedDataFunc,scroll:{y:r}})),v.a.createElement(P.a,{show:t,context:v.a.createElement(j.a,{id:"js.com.Ind1.0031",defaultMessage:"是否要删除?"}),confirmFn:this.onClickDel,cancelFn:this.onClickPopCancel}),v.a.createElement(x.Loading,{fullScreen:!0,show:o}))}}]),a}(n.Component)),Pe=Object(j.d)(Oe),_e=t(22),Ve=(t(106),{GET_LIST:"".concat("/iuap-pap-demo-be","/inline_allowances/list"),GET_ADD:"".concat("/iuap-pap-demo-be","/inline_allowances/saveMultiple"),GET_UPDATE:"".concat("/iuap-pap-demo-be","/inline_allowances/updateMultiple"),GET_DELETE:"".concat("/iuap-pap-demo-be","/inline_allowances/deleteBatch"),GET_LIST_BY_COL:"".concat("/iuap-pap-demo-be","/inline_allowances/listByColumn"),GET_TOEXPORTEXCEL:"".concat("/iuap-pap-demo-be","/inline_allowances/toExportExcel")}),Te=(window[window.webkitURL?"webkitURL":"URL"],{name:"inlineEdit",initialState:{cacheData:[],tableData:[],selectData:[],status:"view",rowEditStatus:!0,showLoading:!1,list:[],totalPages:1,total:0,queryParam:{pageParams:{pageIndex:0,pageSize:25},whereParams:[]}},reducers:{updateState:function(e,a){return c()({},e,a)}},effects:{loadList:(xe=o()(E.a.mark(function e(r,i){var l,o,s,c,d,u,p,f,m,h,v,g;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.actions.inlineEdit.updateState({showLoading:!0,status:"view",rowEditStatus:!0,selectData:[]}),l=i().inlineEdit,o=r||l.queryParam,e.t0=D.o,e.next=6,a=o,t=void 0,t=Object.assign({},a),n=Object(D.f)(t.pageParams),delete t.pageParams,Object(_e.a)(Ve.GET_LIST,{method:"post",data:t,param:n});case 6:e.t1=e.sent,s=(0,e.t0)(e.t1),c=s.result,d=c.data,u={showLoading:!1},p=null,p=d?(f=d.content,m=d.number,h=d.totalPages,v=d.totalElements,g=m+1,Object.assign({},u,{list:f,pageIndex:g,totalPages:h,total:v,queryParam:o,cacheData:f})):u,y.actions.inlineEdit.updateState(p);case 14:case"end":return e.stop()}var a,t,n},e)})),function(e,a){return xe.apply(this,arguments)}),adds:(je=o()(E.a.mark(function e(t,n){var r,i,l,o,s,c;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.actions.inlineEdit.updateState({showLoading:!0}),r=n(),i=r.intl.localeData,l=i["js.sin.src.0001"]||"保存成功",e.t0=D.o,e.next=7,a=t,Object(_e.a)(Ve.GET_ADD,{method:"post",data:a});case 7:if(e.t1=e.sent,e.t2=l,o=(0,e.t0)(e.t1,e.t2),s=o.result,c=s.status,y.actions.inlineEdit.updateState({showLoading:!1}),"success"===c)return y.actions.inlineEdit.loadList(),e.abrupt("return",!0);e.next=18;break;case 18:return e.abrupt("return",!1);case 19:case"end":return e.stop()}var a},e)})),function(e,a){return je.apply(this,arguments)}),removes:(ke=o()(E.a.mark(function e(t,n){var r,i,l,o,s,c,d,u,p,f,m;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.actions.inlineEdit.updateState({showLoading:!0}),r=n(),i=r.intl.localeData,l=i["js.sin.src.0002"]||"删除成功",e.t0=D.o,e.next=7,a=t,Object(_e.a)(Ve.GET_DELETE,{method:"post",data:a});case 7:if(e.t1=e.sent,e.t2=l,o=(0,e.t0)(e.t1,e.t2),s=o.result,c=s.status,y.actions.inlineEdit.updateState({showLoading:!1}),"success"===c)return d=n().inlineEdit,u=d.queryParam,p=d.list,f=d.totalPages,0<(m=u.pageParams.pageIndex)&&m+1===f&&t.length===p.length&&(u.pageParams.pageIndex=m-1),y.actions.inlineEdit.loadList(u),e.abrupt("return",!0);e.next=22;break;case 22:return e.abrupt("return",!1);case 23:case"end":return e.stop()}var a},e)})),function(e,a){return ke.apply(this,arguments)}),updates:(we=o()(E.a.mark(function e(t,n){var r,i,l,o,s,c;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.actions.inlineEdit.updateState({showLoading:!0}),r=n(),i=r.intl.localeData,l=i["js.sin.src.0003"]||"更新成功",e.t0=D.o,e.next=7,a=t,Object(_e.a)(Ve.GET_UPDATE,{method:"post",data:a});case 7:if(e.t1=e.sent,e.t2=l,o=(0,e.t0)(e.t1,e.t2),s=o.result,c=s.status,y.actions.inlineEdit.updateState({showLoading:!1}),"success"===c)return y.actions.inlineEdit.loadList(),e.abrupt("return",!0);e.next=18;break;case 18:return e.abrupt("return",!1);case 19:case"end":return e.stop()}var a},e)})),function(e,a){return we.apply(this,arguments)}),resetData:function(e,a){var t=a().inlineEdit.cacheData.slice();t.forEach(function(e){delete e._edit});var n={list:t};e&&(n.status="view"),y.actions.inlineEdit.updateState(n)}}});r.a.model(Te);var qe=Object(y.connect)(function(e){return e.inlineEdit},null)(Pe),Ne=t(68);t(1595);Object(y.render)(v.a.createElement(Ne.a,null,v.a.createElement(qe,null)),document.querySelector("#app"))}});
=======
/*! build:ucf hash:d5e6891898251b2d28bd, chunkhash:d65d526a199ea70dd912, name:singletable-inline-edit/index, filebase:index.js, query:, file:singletable-inline-edit/index.js */!function(s){function e(e){for(var a,t,n=e[0],r=e[1],i=e[2],l=0,o=[];l<n.length;l++)t=n[l],d[t]&&o.push(d[t][0]),d[t]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a]);for(p&&p(e);o.length;)o.shift()();return u.push.apply(u,i||[]),c()}function c(){for(var e,a=0;a<u.length;a++){for(var t=u[a],n=!0,r=1;r<t.length;r++){var i=t[r];0!==d[i]&&(n=!1)}n&&(u.splice(a--,1),e=l(l.s=t[0]))}return e}var t={},d={4:0},u=[];function l(e){if(t[e])return t[e].exports;var a=t[e]={i:e,l:!1,exports:{}};return s[e].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=s,l.c=t,l.d=function(e,a,t){l.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:t})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(a,e){if(1&e&&(a=l(a)),8&e)return a;if(4&e&&"object"==typeof a&&a&&a.__esModule)return a;var t=Object.create(null);if(l.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:a}),2&e&&"string"!=typeof a)for(var n in a)l.d(t,n,function(e){return a[e]}.bind(null,n));return t},l.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(a,"a",a),a},l.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},l.p="";var a=window.webpackJsonp=window.webpackJsonp||[],n=a.push.bind(a);a.push=e,a=a.slice();for(var r=0;r<a.length;r++)e(a[r]);var p=n;u.push([1575,0]),c()}({1557:function(e,a,t){},1558:function(e,a,t){},1575:function(e,a,t){"use strict";t.r(a);t(161);var n=t(0),v=t.n(n),g=t(2),r=t.n(g),i=t(8),k=t.n(i),l=t(17),s=t.n(l),o=t(29),c=t.n(o),d=t(10),u=t.n(d),p=t(11),m=t.n(p),f=t(12),h=t.n(f),y=t(13),b=t.n(y),E=t(14),w=t.n(E),x=t(3),C=t(4),S=t.n(C),D=t(5),P=t(54),V=t(50),O=t(18),T=t(55),_=t(76),N=t(6),q=t.n(N),L=t(58),Y=t.n(L),j=t(25),I=t(62),A=t.n(I),F=t(47),G=t.n(F),M=t(53),U=t(105),H=t(131),R=j.a.Item,J=x.Select.Option,K=A.a.YearPicker,z=function(e){function a(e){var f;return u()(this,a),(f=h()(this,b()(a).call(this,e))).search=function(){var e=f.props,t=e.status;(0,e.form.validateFields)(function(e,a){a.year&&(a.year=a.year.format("YYYY")),a.dept&&(a.dept=JSON.parse(a.dept).refpk),"view"!=t?f.setState({show:!0,values:a}):f.getQuery(a,0)})},f.reset=function(){f.props.form.resetFields()},f.onClickGo=function(){f.getQuery(f.state.values,0),f.setState({show:!1}),g.actions.inlineEdit.updateState({status:"view",rowEditStatus:!0})},f.onClickCancel=function(){f.setState({show:!1})},f.getQuery=function(e,a){var t=Object(D.f)(f.props.queryParam),n=t.pageParams,r=t.whereParams;for(var i in r=Object(D.f)(r),n.pageIndex=0,e){var l=!0,o=!1,s=void 0;try{for(var c,d=r.entries()[Symbol.iterator]();!(l=(c=d.next()).done);l=!0){var u=Y()(c.value,2),p=u[0];if(i===u[1].key){r.splice(p,1);break}}}catch(e){o=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(o)throw s}}if((e[i]||0===e[i])&&0===a){var m="LIKE";["code","month"].includes(i)&&(m="EQ"),["serviceYearsCompany"].includes(i)&&(m="GTEQ"),r.push({key:i,value:e[i],condition:m})}}t.whereParams=r,0===a&&g.actions.inlineEdit.loadList(t)},f.state={show:!1},f}return w()(a,e),m()(a,[{key:"render",value:function(){var e=this.props,a=e.form.getFieldProps,t=e.searchOpen,n=e.onCallback;return v.a.createElement(U.a,{searchOpen:t,reset:this.reset,onCallback:n,search:this.search},v.a.createElement(j.a,{size:"sm"},v.a.createElement(R,{label:"员工编号"},v.a.createElement(x.FormControl,q()({placeholder:"精确查询"},a("code",{initialValue:""})))),v.a.createElement(R,{label:"员工姓名"},v.a.createElement(x.FormControl,q()({placeholder:"模糊查询"},a("name",{initialValue:""})))),v.a.createElement(R,{label:"部门"},v.a.createElement(M.a,a("dept",{initialValue:""}))),v.a.createElement(R,{label:"年份"},v.a.createElement(K,q()({},a("year",{initialValue:null}),{format:"YYYY",locale:G.a,placeholder:"选择年"}))),v.a.createElement(R,{label:"月份"},v.a.createElement(H.a,a("month",{initialValue:""}))),v.a.createElement(R,{label:"是否超标"},v.a.createElement(x.Select,a("exdeeds",{initialValue:""}),v.a.createElement(J,{value:""},"请选择"),v.a.createElement(J,{value:"0"},"未超标"),v.a.createElement(J,{value:"1"},"超标")))),v.a.createElement(T.a,{show:this.state.show,context:"数据未保存，确定查询 ?",confirmFn:this.onClickGo,cancelFn:this.onClickCancel}))}}]),a}(n.Component),Q=j.a.createForm()(z),W=t(186),B=t(26),X=t.n(B),Z=t(1),$=t.n(Z),ee=t(68),ae=t(67),te=(t(155),{value:$.a.any,onChange:$.a.func,className:$.a.string,field:$.a.string,index:$.a.number,message:$.a.string,data:$.a.array,required:$.a.bool,onValidate:$.a.func,isFlag:$.a.bool,validate:$.a.bool}),ne=function(e){function a(e){var o;return u()(this,a),(o=h()(this,b()(a).call(this,e))).handlerChange=function(e){var a=o.props,t=a.onChange,n=a.field,r=a.index,i=a.status;o.setState({value:e,flag:"edit"==i},function(){o.validate()}),t&&t(n,e,r)},o.validate=function(){var e=o.props,a=e.required,t=e.field,n=e.index,r=e.onValidate,i=o.state.value,l=X()({},t,{type:"number",required:a});new ee.a(l).validate(X()({},t,i),function(e,a){e?o.setState({error:!0}):o.setState({error:!1}),r&&r(t,a,n)})},o.state={value:e.value,flag:!1,error:!1},o}return w()(a,e),m()(a,[{key:"componentWillReceiveProps",value:function(e,a){1==e.validate&&this.validate()}},{key:"render",value:function(){var e=this.state,a=e.value,t=e.error,n=e.flag,r=this.props,i=r.className,l=r.message,o=r.required,s=r.data;return v.a.createElement(ae.a,{required:o,error:t,message:l,flag:n},v.a.createElement(x.Select,{className:i,value:a,onChange:this.handlerChange,data:s}))}}]),a}(n.Component);ne.propTypes=te,ne.defaultProps={field:"",index:"",message:"请选择此字段",data:[],required:!1,isFlag:!1,validate:!1,className:""};var re=ne,ie=t(160),le=t(183),oe=t.n(le).a.YearPicker,se={value:$.a.any,onChange:$.a.func,className:$.a.string,field:$.a.string,index:$.a.number,message:$.a.string,data:$.a.array,required:$.a.bool,onValidate:$.a.func,isFlag:$.a.bool,validate:$.a.bool},ce=function(e){function a(e){var o;return u()(this,a),(o=h()(this,b()(a).call(this,e))).handlerChange=function(e){var a=o.props,t=a.onChange,n=a.field,r=a.index,i=a.status;o.setState({value:e,flag:"edit"==i},function(){o.validate()}),t&&t(n,S()(e).format("YYYY"),r)},o.validate=function(){var e=o.props,a=e.required,t=e.field,n=e.index,r=e.onValidate,i=o.state.value,l=X()({},t,{type:"object",required:a});new ee.a(l).validate(X()({},t,i),function(e,a){e?o.setState({error:!0}):o.setState({error:!1}),r&&r(t,a,n)})},o.state={value:S()(e.value),flag:!1,error:!1},o}return w()(a,e),m()(a,[{key:"componentWillReceiveProps",value:function(e){1==e.validate&&this.validate()}},{key:"render",value:function(){var e=this.state,a=e.value,t=e.error,n=e.flag,r=this.props,i=r.className,l=r.message,o=r.required;return v.a.createElement(ae.a,{required:o,error:t,message:l,flag:n},v.a.createElement(oe,{className:i,value:a,onChange:this.handlerChange,format:"YYYY",locale:G.a,placeholder:"选择年"}))}}]),a}(n.Component);ce.propTypes=se,ce.defaultProps={field:"",index:"",message:"请输入此字段",data:[],required:!1,isFlag:!1,validate:!1};var de=ce,ue={value:$.a.any,onChange:$.a.func,className:$.a.string,field:$.a.string,index:$.a.number,message:$.a.string,data:$.a.array,required:$.a.bool,onValidate:$.a.func,isFlag:$.a.bool,validate:$.a.bool},pe=function(e){function a(e){var o;return u()(this,a),(o=h()(this,b()(a).call(this,e))).handlerChange=function(e){var a=o.props,t=a.onChange,n=a.field,r=a.index,i=a.status,l=JSON.parse(e).refpk;o.setState({value:e,flag:"edit"==i},function(){o.validate()}),t&&t(n,l,r)},o.validate=function(){var e=o.props,a=e.required,t=e.field,n=e.index,r=e.onValidate,i=o.state.value,l=X()({},t,{type:"string",required:a,pattern:/[^({"refname":"","refpk":""}|{"refpk":"","refname":""})]/});new ee.a(l).validate(X()({},t,i),function(e,a){e?o.setState({error:!0}):o.setState({error:!1}),r&&r(t,a,n)})},o.state={value:e.record.deptName?JSON.stringify({refpk:e.record.dept,refname:e.record.deptName}):"",flag:!1,error:!1},o}return w()(a,e),m()(a,[{key:"componentWillReceiveProps",value:function(e){1==e.validate&&this.validate()}},{key:"render",value:function(){var e=this.state,a=e.value,t=e.error,n=e.flag,r=this.props,i=r.className,l=r.message,o=r.required;return v.a.createElement(ae.a,{required:o,error:t,message:l,flag:n},v.a.createElement(M.a,{style:{width:"100%"},className:i,value:a,onChange:this.handlerChange}))}}]),a}(n.Component);pe.propTypes=ue,pe.defaultProps={field:"",index:"",message:"请选择部门参照",data:[],required:!1,isFlag:!1,validate:!1};var me=pe,fe={value:$.a.any,onChange:$.a.func,className:$.a.string,field:$.a.string,index:$.a.number,message:$.a.string,data:$.a.array,required:$.a.bool,onValidate:$.a.func,isFlag:$.a.bool,validate:$.a.bool},he=function(e){function a(e){var o;return u()(this,a),(o=h()(this,b()(a).call(this,e))).handlerChange=function(e){var a=o.props,t=a.onChange,n=a.field,r=a.index,i=a.status,l=JSON.parse(e).refpk;o.setState({value:e,flag:"edit"==i},function(){o.validate()}),t&&t(n,l,r)},o.validate=function(){var e=o.props,a=e.required,t=e.field,n=e.index,r=e.onValidate,i=o.state.value,l=X()({},t,{type:"string",required:a,pattern:/[^({"refname":"","refpk":""}|{"refpk":"","refname":""})]/});new ee.a(l).validate(X()({},t,i),function(e,a){e?o.setState({error:!0}):o.setState({error:!1}),r&&r(t,a,n)})},o.state={value:e.record.levelName?JSON.stringify({refpk:e.record.postLevel,refname:e.record.levelName}):"",flag:!1,error:!1},o}return w()(a,e),m()(a,[{key:"componentWillReceiveProps",value:function(e){1==e.validate&&this.validate()}},{key:"render",value:function(){var e=this.state,a=e.value,t=e.error,n=e.flag,r=this.props,i=r.className,l=r.message,o=r.required;return v.a.createElement(ae.a,{required:o,error:t,message:l,flag:n},v.a.createElement(M.b,{style:{width:"100%"},className:i,value:a,onChange:this.handlerChange}))}}]),a}(n.Component);he.propTypes=fe,he.defaultProps={field:"",index:"",message:"请选择职级参照",data:[],required:!1,isFlag:!1,validate:!1};var ve,ye,ge,ke,be=he,Ee=t(271),we={name:{component:W.a,type:"text"},sex:{component:re,selectList:[{key:"请选择",value:"",disabled:!0},{key:"男",value:1},{key:"女",value:0}],type:"select"},serviceYears:{component:ie.a,props:{iconStyle:"one",max:99,min:0,step:1},type:"number"},serviceYearsCompany:{component:ie.a,props:{iconStyle:"one",max:99,min:0,step:1},type:"number"},month:{component:re,selectList:[{key:"请选择",value:"",disabled:!0},{key:"一月",value:1},{key:"二月",value:2},{key:"三月",value:3},{key:"四月",value:4},{key:"五月",value:5},{key:"六月",value:6},{key:"七月",value:7},{key:"八月",value:8},{key:"九月",value:9},{key:"十月",value:10},{key:"十一月",value:11},{key:"十二月",value:12}],type:"select"},allowanceType:{component:re,selectList:[{key:"请选择",value:"",disabled:!0},{key:"电脑补助",value:1},{key:"住宿补助",value:2},{key:"交通补助",value:3}],type:"select"},allowanceStandard:{component:ie.a,props:{max:999999,min:0,step:1,precision:2},type:"number"},allowanceActual:{component:ie.a,props:{max:999999,min:0,step:1,precision:2},type:"number"},exdeeds:{component:re,selectList:[{key:"请选择",value:"",disabled:!0},{key:"未超标",value:0},{key:"超标",value:1}],type:"select"},pickType:{component:re,selectList:[{key:"请选择",value:"",disabled:!0},{key:"转账",value:1},{key:"现金",value:2}],type:"select"},remark:{component:W.a,type:"text"},year:{component:de,type:"dateYear"},date:{component:Ee.a,type:"date"},dept:{component:me,type:"ref",valueKey:"deptName"},level:{component:be,type:"ref",valueKey:"levelName"}},xe=function(e){function a(e){var f;return u()(this,a),(f=h()(this,b()(a).call(this,e))).renderComp=function(){var e=f.props,a=e.type,t=e.value,n=e.record,r=we[a];if(r){var i,l=r.component,o=r.type,s=r.props,c=s||{},d=n._edit,u=n._status,p=n._validate;switch(o){case"dateYear":case"date":case"text":i=t;break;case"number":i=s.precision&&0<s.precision?"number"==typeof t?t.toFixed(s.precision):"":t;break;case"select":var m=r.selectList.find(function(e){return e.value===t});i=m?m.key:"";break;case"ref":i=n[r.valueKey];break;default:i=""}return d?v.a.createElement(l,q()({status:u,validate:p},c,f.props,{data:r.selectList})):v.a.createElement("div",null,i)}return v.a.createElement("div",null,"组件类型错误")},f}return w()(a,e),m()(a,[{key:"render",value:function(){return v.a.createElement("div",null,this.renderComp())}}]),a}(n.Component),Ce=(t(1557),function(e){function a(e){var o;return u()(this,a),(o=h()(this,b()(a).call(this,e))).oldData=[],o.column=[{title:"员工编号",dataIndex:"code",key:"code",width:150},{title:"员工姓名",dataIndex:"name",key:"name",width:120,render:function(e,a,t){return v.a.createElement(xe,{type:"name",value:e,field:"name",index:t,required:!0,record:a,onChange:o.changeAllData,onValidate:o.onValidate})}},{title:"员工性别",dataIndex:"sexEnumValue",key:"sexEnumValue",width:120,render:function(e,a,t){return v.a.createElement(xe,{type:"sex",value:a.sex,field:"sex",index:t,required:!0,record:a,onChange:o.changeAllData,onValidate:o.onValidate})}},{title:"所属部门",dataIndex:"deptName",key:"deptName",width:120,render:function(e,a,t){return v.a.createElement(xe,{type:"dept",field:"dept",index:t,required:!0,record:a,onChange:o.changeAllData,onValidate:o.onValidate})}},{title:"职级",dataIndex:"levelName",key:"levelName",width:120,render:function(e,a,t){return v.a.createElement(xe,{type:"level",field:"postLevel",index:t,required:!0,record:a,onChange:o.changeAllData,onValidate:o.onValidate})}},{title:"工龄",dataIndex:"serviceYears",key:"serviceYears",width:130,className:"column-number-right ",render:function(e,a,t){return v.a.createElement(xe,{type:"serviceYears",value:e,field:"serviceYears",index:t,required:!0,record:a,onChange:o.changeAllData,onValidate:o.onValidate})}},{title:"司龄",dataIndex:"serviceYearsCompany",key:"serviceYearsCompany",width:130,className:"column-number-right ",render:function(e,a,t){return v.a.createElement(xe,{type:"serviceYearsCompany",value:e,field:"serviceYearsCompany",index:t,required:!0,record:a,onChange:o.changeAllData,onValidate:o.onValidate})}},{title:"年份",dataIndex:"year",key:"year",width:100,render:function(e,a,t){return v.a.createElement(xe,{type:"year",value:e,field:"year",index:t,required:!0,record:a,onChange:o.changeAllData,onValidate:o.onValidate})}},{title:"月份",dataIndex:"monthEnumValue",key:"monthEnumValue",width:120,render:function(e,a,t){return v.a.createElement(xe,{type:"month",value:a.month,field:"month",index:t,required:!0,record:a,onChange:o.changeAllData,onValidate:o.onValidate})}},{title:"补贴类别",dataIndex:"allowanceTypeEnumValue",key:"allowanceTypeEnumValue",width:120,render:function(e,a,t){return v.a.createElement(xe,{type:"allowanceType",value:a.allowanceType,field:"allowanceType",index:t,required:!0,record:a,onChange:o.changeAllData,onValidate:o.onValidate})}},{title:"补贴标准",dataIndex:"allowanceStandard",key:"allowanceStandard",width:120,className:"column-number-right ",render:function(e,a,t){return v.a.createElement(xe,{type:"allowanceStandard",value:e,field:"allowanceStandard",index:t,required:!0,record:a,onChange:o.changeAllData,onValidate:o.onValidate})}},{title:"实际补贴",dataIndex:"allowanceActual",key:"allowanceActual",width:120,className:"column-number-right ",render:function(e,a,t){return v.a.createElement(xe,{type:"allowanceActual",value:e,field:"allowanceActual",index:t,required:!0,record:a,onChange:o.changeAllData,onValidate:o.onValidate})}},{title:"是否超标",dataIndex:"exdeedsEnumValue",key:"exdeedsEnumValue",width:120,render:function(e,a,t){return v.a.createElement(xe,{type:"exdeeds",value:a.exdeeds,field:"exdeeds",index:t,required:!0,record:a,onChange:o.changeAllData,onValidate:o.onValidate})}},{title:"申请时间",dataIndex:"applyTime",key:"applyTime",width:200,render:function(e,a,t){return""!==e&&void 0!==e?v.a.createElement("div",null,S()(e).format("YYYY-MM-DD hh:mm:ss")):v.a.createElement("div",null)}},{title:"领取方式",dataIndex:"pickTypeEnumValue",key:"pickTypeEnumValue",width:120,render:function(e,a,t){return v.a.createElement(xe,{type:"pickType",value:a.pickType,field:"pickType",index:t,required:!0,record:a,onChange:o.changeAllData,onValidate:o.onValidate})}},{title:"领取时间",dataIndex:"pickTime",key:"pickTime",width:200,render:function(e,a,t){return""!==e&&void 0!==e?v.a.createElement("div",null,S()(e).format("YYYY-MM-DD hh:mm:ss")):v.a.createElement("div",null)}},{title:"备注",dataIndex:"remark",key:"remark",width:100,render:function(e,a,t){return v.a.createElement(xe,{type:"remark",value:e,field:"remark",index:t,required:!1,record:a,onChange:o.changeAllData,onValidate:o.onValidate})}}],o.changeAllData=function(e,a,t){var n=o.oldData,r=Object(D.f)(o.props.list);n[t][e]=a,r[t]._checked||(r[t]._checked=!0,g.actions.inlineEdit.updateState({list:r})),n[t]._checked=!0,o.oldData=n},o.onValidate=function(e,a,t){0<o.oldData.length&&(o.oldData[t]["_".concat(e,"Validate")]=null==a)},o.getSelectedDataFunc=function(e,a,t){var n=o.props.list,r=Object(D.f)(n);null!=t?r[t]._checked=!r[t]._checked:0<e.length?r.map(function(e){e._disabled||(e._checked=!0)}):r.map(function(e){e._disabled||(e._checked=!1)}),g.actions.inlineEdit.updateState({selectData:e,list:r})},o.freshData=function(e){o.onPageSelect(e,0)},o.onDataNumSelect=function(e,a){o.onPageSelect(a,1)},o.onPageSelect=function(e,a){var t=Object(D.f)(o.props.queryParam),n=Object(D.k)(e,a,t.pageParams),r=n.pageIndex,i=n.pageSize;t.pageParams={pageIndex:r,pageSize:i},g.actions.inlineEdit.updateState(t),g.actions.inlineEdit.loadList(t)},o.filterArrayNull=function(e){return e.filter(function(e){return null!=e})},o.hasCheck=function(){var e=o.props,a=e.selectData,t=e.list,n=!1;return a.forEach(function(e){1==e._checked&&(n=!0)}),t.forEach(function(e){1==e._checked&&(n=!0)}),n},o.newDataTmp={_edit:!0,_isNew:!0,_checked:!1,_disabled:!1,_flag:!1,code:"",name:"",sex:"",sexEnumValue:"",deptName:"",levelName:"",serviceYears:0,serviceYearsCompany:0,year:S()().format("YYYY"),month:"",monthEnumValue:"",allowanceType:"",allowanceTypeEnumValue:"",allowanceStandard:0,allowanceActual:0,exdeeds:"",exdeedsEnumValue:"",pickType:"",pickTypeEnumValue:"",remark:""},o.handlerNew=function(){var e=Object(D.f)(o.props.list),a=c()({key:Object(D.r)()},o.newDataTmp);o.oldData.length<=0&&(e.forEach(function(e){e._disabled=!0,e._checked=!1}),o.grid.resetColumns(o.column)),o.oldData.unshift(a),e.unshift(a),g.actions.inlineEdit.updateState({list:e,status:"new",rowEditStatus:!1,selectData:[]})},o.onClickUpdate=function(){var e=o.props.list.map(function(e){return e._edit=!0,e._checked=!1,e._status="edit",e});o.grid.resetColumns(o.column),o.oldData=Object(D.f)(e),g.actions.inlineEdit.updateState({list:e,status:"edit",rowEditStatus:!1})},o.onClickDownloadTemplate=function(){window.open("".concat("/iuap-pap-demo-be","/inline_allowances/excelTemplateDownload"))},o.filterList=function(e,a,n){var r=a.slice(),i=[];return e.forEach(function(t){r.forEach(function(e,a){t[n]===e[n]&&e._checked&&(e._validate=!0,i.push(t))})}),{newList:r,selectList:i}},o.isVerifyData=function(r){var i=!0,l=/Validate\b/;return r.forEach(function(e,a){var t=Object.keys(e);if(i)for(var n=0;n<t.length;n++)if(l.test(t[n])){if(!r[a][t[n]]){i=!1;break}i=!0}}),i},o.onClickSave=s()(k.a.mark(function e(){var a,t,n,r,i,l;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=o.props,t=a.status,n=a.list,i=r=null,l="请勾选数据后再新增",e.t0=t,e.next="new"===e.t0?7:"edit"===e.t0?10:14;break;case 7:return r=o.filterList(o.oldData,n,"key"),i=g.actions.inlineEdit.adds,e.abrupt("break",15);case 10:return r=o.filterList(o.oldData,n,"id"),i=g.actions.inlineEdit.updates,l="请勾选数据后再更新",e.abrupt("break",15);case 14:return e.abrupt("break",15);case 15:if(0<r.selectList.length)return e.next=18,g.actions.inlineEdit.updateState({list:r.newList});e.next=28;break;case 18:if(o.isVerifyData(r.selectList))return e.next=21,i(r.selectList);e.next=25;break;case 21:e.sent&&(o.oldData=[]),e.next=26;break;case 25:Object(D.b)("数据填写不完整");case 26:e.next=29;break;case 28:Object(D.b)(l);case 29:case"end":return e.stop()}},e)})),o.onClickDelConfirm=function(){0<o.props.selectData.length?o.setState({showPop:!0}):Object(D.b)("请勾选数据后再删除")},o.onClickDel=s()(k.a.mark(function e(){var a;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.props.selectData,e.next=3,g.actions.inlineEdit.removes(a);case 3:e.sent&&(o.oldData=[]),o.setState({showPop:!1});case 6:case"end":return e.stop()}},e)})),o.onClickPopCancel=function(){o.setState({showPop:!1})},o.onClickCancel=function(){o.hasCheck()?o.setState({showPopCancel:!0}):(o.oldData=[],g.actions.inlineEdit.resetData(!0),g.actions.inlineEdit.updateState({selectData:[],rowEditStatus:!0}))},o.onClickPopUnSaveOK=function(){g.actions.inlineEdit.resetData(!0),g.actions.inlineEdit.updateState({selectData:[],rowEditStatus:!0}),o.setState({showPopCancel:!1}),o.oldData=[]},o.onClickPopUnSaveCancel=function(){o.setState({showPopCancel:!1})},o.onClickExport=function(){o.grid.exportExcel()},o.resetTableHeight=function(e){var a=0;a=e?Object(D.j)()-420:Object(D.j)()-270,o.setState({tableHeight:a})},o.state={tableHeight:0,showPop:!1,showPopCancel:!1,validate:!1},o}return w()(a,e),m()(a,[{key:"componentWillMount",value:function(){this.resetTableHeight(!0)}},{key:"componentDidMount",value:function(){g.actions.inlineEdit.loadList(this.props.queryParam)}},{key:"render",value:function(){var a=this,e=this.state,t=e.showPop,n=e.showPopCancel,r=e.tableHeight,i=this.props,l=i.list,o=i.showLoading,s=i.pageIndex,c=i.pageSize,d=i.totalPages,u=i.total,p=i.status,m=i.rowEditStatus,f=i.queryParam,h={activePage:s,total:u,items:d,freshData:this.freshData,onDataNumSelect:this.onDataNumSelect,disabled:"view"!==p};return v.a.createElement("div",{className:"inline-edit"},v.a.createElement(V.a,{title:"A2单表行内编辑示例"}),v.a.createElement(Q,{queryParam:f,status:p,pageSize:c,searchOpen:!0,onCallback:this.resetTableHeight}),v.a.createElement("div",{className:"table-header"},v.a.createElement(_.a,{funcCode:"singletable-inlineEdit",onComplete:function(){return console.log("按钮权限加载完成")}},v.a.createElement(O.a,{role:"add",disabled:Object(D.h)("add",p),className:"ml8",colors:"primary",onClick:this.handlerNew},"新增"),v.a.createElement(O.a,{role:"update",shape:"border",disabled:Object(D.h)("edit",p),className:"ml8",onClick:this.onClickUpdate},"修改"),v.a.createElement(O.a,{role:"delete",shape:"border",disabled:Object(D.h)("del",p),className:"ml8",onClick:this.onClickDelConfirm},"删除"),v.a.createElement(O.a,{shape:"border",disabled:Object(D.h)("export",p),className:"ml8",onClick:this.onClickExport},"导出"),v.a.createElement(O.a,{shape:"border",disabled:Object(D.h)("save",p),className:"ml8",onClick:this.onClickSave},"保存"),v.a.createElement(O.a,{shape:"border",disabled:Object(D.h)("cancel",p),className:"ml8",onClick:this.onClickCancel},"取消"),v.a.createElement(T.a,{show:n,context:"数据未保存，确定离开 ?",confirmFn:this.onClickPopUnSaveOK,cancelFn:this.onClickPopUnSaveCancel}))),v.a.createElement("div",{className:"grid-parent"},v.a.createElement(P.a,{ref:function(e){return a.grid=e},data:l,rowKey:function(e){return e.id?e.id:e.key},columns:this.column,paginationObj:h,columnFilterAble:m,showHeaderMenu:m,dragborder:m,draggable:m,syncHover:m,getSelectedDataFunc:this.getSelectedDataFunc,scroll:{y:r}})),v.a.createElement(T.a,{show:t,context:"是否要删除 ?",confirmFn:this.onClickDel,cancelFn:this.onClickPopCancel}),v.a.createElement(x.Loading,{fullScreen:!0,show:o}))}}]),a}(n.Component)),Se=t(21),De=(t(104),{GET_LIST:"".concat("/iuap-pap-demo-be","/inline_allowances/list"),GET_ADD:"".concat("/iuap-pap-demo-be","/inline_allowances/saveMultiple"),GET_UPDATE:"".concat("/iuap-pap-demo-be","/inline_allowances/updateMultiple"),GET_DELETE:"".concat("/iuap-pap-demo-be","/inline_allowances/deleteBatch"),GET_LIST_BY_COL:"".concat("/iuap-pap-demo-be","/inline_allowances/listByColumn"),GET_TOEXPORTEXCEL:"".concat("/iuap-pap-demo-be","/inline_allowances/toExportExcel")}),Pe=(window[window.webkitURL?"webkitURL":"URL"],{name:"inlineEdit",initialState:{cacheData:[],tableData:[],selectData:[],status:"view",rowEditStatus:!0,showLoading:!1,list:[],totalPages:1,total:0,queryParam:{pageParams:{pageIndex:0,pageSize:25},whereParams:[]}},reducers:{updateState:function(e,a){return c()({},e,a)}},effects:{loadList:(ke=s()(k.a.mark(function e(r,i){var l,o,s,c,d,u,p,m,f,h,v,y;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return g.actions.inlineEdit.updateState({showLoading:!0,status:"view",rowEditStatus:!0,selectData:[]}),l=i().inlineEdit,o=r||l.queryParam,e.t0=D.o,e.next=6,a=o,t=void 0,t=Object.assign({},a),n=Object(D.f)(t.pageParams),delete t.pageParams,Object(Se.a)(De.GET_LIST,{method:"post",data:t,param:n});case 6:e.t1=e.sent,s=(0,e.t0)(e.t1),c=s.result,d=c.data,u={showLoading:!1},p=null,p=d?(m=d.content,f=d.number,h=d.totalPages,v=d.totalElements,y=f+1,Object.assign({},u,{list:m,pageIndex:y,totalPages:h,total:v,queryParam:o,cacheData:m})):u,g.actions.inlineEdit.updateState(p);case 14:case"end":return e.stop()}var a,t,n},e)})),function(e,a){return ke.apply(this,arguments)}),adds:(ge=s()(k.a.mark(function e(t){var n,r,i;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return g.actions.inlineEdit.updateState({showLoading:!0}),e.t0=D.o,e.next=4,a=t,Object(Se.a)(De.GET_ADD,{method:"post",data:a});case 4:if(e.t1=e.sent,n=(0,e.t0)(e.t1,"保存成功"),r=n.result,i=r.status,g.actions.inlineEdit.updateState({showLoading:!1}),"success"===i)return g.actions.inlineEdit.loadList(),e.abrupt("return",!0);e.next=14;break;case 14:return e.abrupt("return",!1);case 15:case"end":return e.stop()}var a},e)})),function(e){return ge.apply(this,arguments)}),removes:(ye=s()(k.a.mark(function e(t,n){var r,i,l,o,s,c,d,u;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return g.actions.inlineEdit.updateState({showLoading:!0}),e.t0=D.o,e.next=4,a=t,Object(Se.a)(De.GET_DELETE,{method:"post",data:a});case 4:if(e.t1=e.sent,r=(0,e.t0)(e.t1,"删除成功"),i=r.result,l=i.status,g.actions.inlineEdit.updateState({showLoading:!1}),"success"===l)return o=n().inlineEdit,s=o.queryParam,c=o.list,d=o.totalPages,0<(u=s.pageParams.pageIndex)&&u+1===d&&t.length===c.length&&(s.pageParams.pageIndex=u-1),g.actions.inlineEdit.loadList(s),e.abrupt("return",!0);e.next=18;break;case 18:return e.abrupt("return",!1);case 19:case"end":return e.stop()}var a},e)})),function(e,a){return ye.apply(this,arguments)}),updates:(ve=s()(k.a.mark(function e(t){var n,r,i;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return g.actions.inlineEdit.updateState({showLoading:!0}),e.t0=D.o,e.next=4,a=t,Object(Se.a)(De.GET_UPDATE,{method:"post",data:a});case 4:if(e.t1=e.sent,n=(0,e.t0)(e.t1,"更新成功"),r=n.result,i=r.status,g.actions.inlineEdit.updateState({showLoading:!1}),"success"===i)return g.actions.inlineEdit.loadList(),e.abrupt("return",!0);e.next=14;break;case 14:return e.abrupt("return",!1);case 15:case"end":return e.stop()}var a},e)})),function(e){return ve.apply(this,arguments)}),resetData:function(e,a){var t=a().inlineEdit.cacheData.slice();t.forEach(function(e){delete e._edit});var n={list:t};e&&(n.status="view"),g.actions.inlineEdit.updateState(n)}}});r.a.model(Pe);var Ve=Object(g.connect)(function(e){return e.inlineEdit},null)(Ce);t(1558);Object(g.render)(v.a.createElement(Ve,null),document.querySelector("#app"))}});
>>>>>>> master
//# sourceMappingURL=index.js.map