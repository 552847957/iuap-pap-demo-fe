/*! build:ucf hash:2aff9828fc249ad54ad6, chunkhash:2644452a3b89e055470d, name:singletable-popup-edit/index, filebase:index.js, query:, file:singletable-popup-edit/index.js */!function(C){function e(e){for(var t,a,n=e[0],r=e[1],l=e[2],o=0,i=[];o<n.length;o++)a=n[o],L[a]&&i.push(L[a][0]),L[a]=0;for(t in r)Object.prototype.hasOwnProperty.call(r,t)&&(C[t]=r[t]);for(w&&w(e);i.length;)i.shift()();return v.push.apply(v,l||[]),c()}function c(){for(var e,t=0;t<v.length;t++){for(var a=v[t],n=!0,r=1;r<a.length;r++){var l=a[r];0!==L[l]&&(n=!1)}n&&(v.splice(t--,1),e=A(A.s=a[0]))}return e}var a=window.webpackHotUpdate;window.webpackHotUpdate=function(e,t){!function(e,t){if(!q[e]||!p[e])return;for(var a in p[e]=!1,t)Object.prototype.hasOwnProperty.call(t,a)&&(T[a]=t[a]);0==--s&&0===d&&h()}(e,t),a&&a(e,t)};var l,n=!0,j="2aff9828fc249ad54ad6",t=1e4,V={},_=[],r=[];var o=[],H="idle";function N(e){H=e;for(var t=0;t<o.length;t++)o[t].call(null,e)}var i,T,M,s=0,d=0,u={},p={},q={};function Y(e){return+e+""===e?+e:e}function m(e){if("idle"!==H)throw new Error("check() is only allowed in idle status");return n=e,N("check"),(l=t,l=l||1e4,new Promise(function(t,a){if("undefined"==typeof XMLHttpRequest)return a(new Error("No browser support"));try{var n=new XMLHttpRequest,r=A.p+""+j+".hot-update.json";n.open("GET",r,!0),n.timeout=l,n.send(null)}catch(e){return a(e)}n.onreadystatechange=function(){if(4===n.readyState)if(0===n.status)a(new Error("Manifest request to "+r+" timed out."));else if(404===n.status)t();else if(200!==n.status&&304!==n.status)a(new Error("Manifest request to "+r+" failed."));else{try{var e=JSON.parse(n.responseText)}catch(e){return void a(e)}t(e)}}})).then(function(e){if(!e)return N("idle"),null;p={},u={},q=e.c,M=e.h,N("prepare");var t=new Promise(function(e,t){i={resolve:e,reject:t}});for(var a in T={},L)f(a);return"prepare"===H&&0===d&&0===s&&h(),t});var l}function f(e){var t,a;q[e]?(p[e]=!0,s++,t=e,(a=document.createElement("script")).charset="utf-8",a.src=A.p+""+t+"."+j+".hot-update.js",document.head.appendChild(a)):u[e]=!0}function h(){N("ready");var t=i;if(i=null,t)if(n)Promise.resolve().then(function(){return b(n)}).then(function(e){t.resolve(e)},function(e){t.reject(e)});else{var e=[];for(var a in T)Object.prototype.hasOwnProperty.call(T,a)&&e.push(Y(a));t.resolve(e)}}function b(a){if("ready"!==H)throw new Error("apply() is only allowed in ready status");var e,t,n,d,r;function l(e){for(var t=[e],a={},n=t.slice().map(function(e){return{chain:[e],id:e}});0<n.length;){var r=n.pop(),l=r.id,o=r.chain;if((d=F[l])&&!d.hot._selfAccepted){if(d.hot._selfDeclined)return{type:"self-declined",chain:o,moduleId:l};if(d.hot._main)return{type:"unaccepted",chain:o,moduleId:l};for(var i=0;i<d.parents.length;i++){var c=d.parents[i],s=F[c];if(s){if(s.hot._declinedDependencies[l])return{type:"declined",chain:o.concat([c]),moduleId:l,parentId:c};-1===t.indexOf(c)&&(s.hot._acceptedDependencies[l]?(a[c]||(a[c]=[]),u(a[c],[l])):(delete a[c],t.push(c),n.push({chain:o.concat([c]),id:c})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:a}}function u(e,t){for(var a=0;a<t.length;a++){var n=t[a];-1===e.indexOf(n)&&e.push(n)}}a=a||{};var o={},i=[],c={},s=function(){console.warn("[HMR] unexpected require("+m.moduleId+") to disposed module")};for(var p in T)if(Object.prototype.hasOwnProperty.call(T,p)){var m;r=Y(p);var f=!1,h=!1,b=!1,v="";switch((m=T[p]?l(r):{type:"disposed",moduleId:p}).chain&&(v="\nUpdate propagation: "+m.chain.join(" -> ")),m.type){case"self-declined":a.onDeclined&&a.onDeclined(m),a.ignoreDeclined||(f=new Error("Aborted because of self decline: "+m.moduleId+v));break;case"declined":a.onDeclined&&a.onDeclined(m),a.ignoreDeclined||(f=new Error("Aborted because of declined dependency: "+m.moduleId+" in "+m.parentId+v));break;case"unaccepted":a.onUnaccepted&&a.onUnaccepted(m),a.ignoreUnaccepted||(f=new Error("Aborted because "+r+" is not accepted"+v));break;case"accepted":a.onAccepted&&a.onAccepted(m),h=!0;break;case"disposed":a.onDisposed&&a.onDisposed(m),b=!0;break;default:throw new Error("Unexception type "+m.type)}if(f)return N("abort"),Promise.reject(f);if(h)for(r in c[r]=T[r],u(i,m.outdatedModules),m.outdatedDependencies)Object.prototype.hasOwnProperty.call(m.outdatedDependencies,r)&&(o[r]||(o[r]=[]),u(o[r],m.outdatedDependencies[r]));b&&(u(i,[m.moduleId]),c[r]=s)}var E,g=[];for(t=0;t<i.length;t++)r=i[t],F[r]&&F[r].hot._selfAccepted&&g.push({module:r,errorHandler:F[r].hot._selfAccepted});N("dispose"),Object.keys(q).forEach(function(e){!1===q[e]&&delete L[e]});for(var y,w,k=i.slice();0<k.length;)if(r=k.pop(),d=F[r]){var x={},S=d.hot._disposeHandlers;for(n=0;n<S.length;n++)(e=S[n])(x);for(V[r]=x,d.hot.active=!1,delete F[r],delete o[r],n=0;n<d.children.length;n++){var O=F[d.children[n]];O&&(0<=(E=O.parents.indexOf(r))&&O.parents.splice(E,1))}}for(r in o)if(Object.prototype.hasOwnProperty.call(o,r)&&(d=F[r]))for(w=o[r],n=0;n<w.length;n++)y=w[n],0<=(E=d.children.indexOf(y))&&d.children.splice(E,1);for(r in N("apply"),j=M,c)Object.prototype.hasOwnProperty.call(c,r)&&(C[r]=c[r]);var D=null;for(r in o)if(Object.prototype.hasOwnProperty.call(o,r)&&(d=F[r])){w=o[r];var I=[];for(t=0;t<w.length;t++)if(y=w[t],e=d.hot._acceptedDependencies[y]){if(-1!==I.indexOf(e))continue;I.push(e)}for(t=0;t<I.length;t++){e=I[t];try{e(w)}catch(e){a.onErrored&&a.onErrored({type:"accept-errored",moduleId:r,dependencyId:w[t],error:e}),a.ignoreErrored||D||(D=e)}}}for(t=0;t<g.length;t++){var P=g[t];r=P.module,_=[r];try{A(r)}catch(t){if("function"==typeof P.errorHandler)try{P.errorHandler(t)}catch(e){a.onErrored&&a.onErrored({type:"self-accept-error-handler-errored",moduleId:r,error:e,originalError:t}),a.ignoreErrored||D||(D=e),D||(D=t)}else a.onErrored&&a.onErrored({type:"self-accept-errored",moduleId:r,error:t}),a.ignoreErrored||D||(D=t)}}return D?(N("fail"),Promise.reject(D)):(N("idle"),new Promise(function(e){e(i)}))}var F={},L={5:0},v=[];function A(e){if(F[e])return F[e].exports;var t,n,a=F[e]={i:e,l:!1,exports:{},hot:(t=e,n={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:l!==t,active:!0,accept:function(e,t){if(void 0===e)n._selfAccepted=!0;else if("function"==typeof e)n._selfAccepted=e;else if("object"==typeof e)for(var a=0;a<e.length;a++)n._acceptedDependencies[e[a]]=t||function(){};else n._acceptedDependencies[e]=t||function(){}},decline:function(e){if(void 0===e)n._selfDeclined=!0;else if("object"==typeof e)for(var t=0;t<e.length;t++)n._declinedDependencies[e[t]]=!0;else n._declinedDependencies[e]=!0},dispose:function(e){n._disposeHandlers.push(e)},addDisposeHandler:function(e){n._disposeHandlers.push(e)},removeDisposeHandler:function(e){var t=n._disposeHandlers.indexOf(e);0<=t&&n._disposeHandlers.splice(t,1)},check:m,apply:b,status:function(e){if(!e)return H;o.push(e)},addStatusHandler:function(e){o.push(e)},removeStatusHandler:function(e){var t=o.indexOf(e);0<=t&&o.splice(t,1)},data:V[t]},l=void 0,n),parents:(r=_,_=[],r),children:[]};return C[e].call(a.exports,a,a.exports,function(t){var a=F[t];if(!a)return A;var n=function(e){return a.hot.active?(F[e]?-1===F[e].parents.indexOf(t)&&F[e].parents.push(t):(_=[t],l=e),-1===a.children.indexOf(e)&&a.children.push(e)):(console.warn("[HMR] unexpected require("+e+") from disposed module "+t),_=[]),A(e)},e=function(t){return{configurable:!0,enumerable:!0,get:function(){return A[t]},set:function(e){A[t]=e}}};for(var r in A)Object.prototype.hasOwnProperty.call(A,r)&&"e"!==r&&"t"!==r&&Object.defineProperty(n,r,e(r));return n.e=function(e){return"ready"===H&&N("prepare"),d++,A.e(e).then(t,function(e){throw t(),e});function t(){d--,"prepare"===H&&(u[e]||f(e),0===d&&0===s&&h())}},n.t=function(e,t){return 1&t&&(e=n(e)),A.t(e,-2&t)},n}(e)),a.l=!0,a.exports}A.m=C,A.c=F,A.d=function(e,t,a){A.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},A.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},A.t=function(t,e){if(1&e&&(t=A(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(A.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)A.d(a,n,function(e){return t[e]}.bind(null,n));return a},A.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return A.d(t,"a",t),t},A.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},A.p="",A.h=function(){return j};var E=window.webpackJsonp=window.webpackJsonp||[],g=E.push.bind(E);E.push=e,E=E.slice();for(var y=0;y<E.length;y++)e(E[y]);var w=g;v.push([1585,0]),c()}({1566:function(e,t,a){},1567:function(e,t,a){},1568:function(e,t,a){},1569:function(e,t,a){},1585:function(e,t,a){"use strict";a.r(t);a(161);var n,r,l,o=a(0),P=a.n(o),h=a(2),i=a.n(h),c=a(6),C=a.n(c),s=a(10),d=a.n(s),u=a(11),p=a.n(u),m=a(12),b=a.n(m),f=a(13),v=a.n(f),E=a(14),g=a.n(E),y=a(4),j=a.n(y),V=a(3),w=a(55),k=a(51),x=a(18),S=a(56),O=a(76),D=a(58),I=a.n(D),_=a(62),H=a.n(_),N=a(105),T=a(131),M=a(54),q=a(25),Y=a(5),F=a(48),L=a.n(F),A=(a(1566),q.a.Item),R=V.Select.Option,B=H.a.YearPicker,U=function(e){function r(){var e,f;d()(this,r);for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return(f=b()(this,(e=v()(r)).call.apply(e,[this].concat(a)))).search=function(){f.props.form.validateFields(function(e,t){t.year&&(t.year=t.year.format("YYYY"));var a=t.dept;if(a){var n=JSON.parse(a).refpk;t.dept=n}f.getQuery(t,0)})},f.reset=function(){f.props.form.resetFields()},f.getQuery=function(e,t){var a=Object(Y.f)(f.props.queryParam),n=a.pageParams,r=a.whereParams;for(var l in r=Object(Y.f)(r),n.pageIndex=0,e){var o=!0,i=!1,c=void 0;try{for(var s,d=r.entries()[Symbol.iterator]();!(o=(s=d.next()).done);o=!0){var u=I()(s.value,2),p=u[0];if(l===u[1].key){r.splice(p,1);break}}}catch(e){i=!0,c=e}finally{try{o||null==d.return||d.return()}finally{if(i)throw c}}if((e[l]||0===e[l])&&0===t){var m="LIKE";["code","month"].includes(l)&&(m="EQ"),r.push({key:l,value:e[l],condition:m})}}a.whereParams=r,h.actions.popupEdit.updateState(a),0===t&&h.actions.popupEdit.loadList(a),f.props.onCloseEdit()},f}return g()(r,e),p()(r,[{key:"render",value:function(){var e=this.props,t=e.form,a=e.onCallback,n=t.getFieldProps;return P.a.createElement(N.a,{form:t,reset:this.reset,onCallback:a,search:this.search},P.a.createElement(q.a,{size:"sm"},P.a.createElement(A,{label:"员工编号"},P.a.createElement(V.FormControl,C()({placeholder:"精确查询"},n("code",{initialValue:""})))),P.a.createElement(A,{label:"员工姓名"},P.a.createElement(V.FormControl,C()({placeholder:"模糊查询"},n("name",{initialValue:""})))),P.a.createElement(A,{label:"部门"},P.a.createElement(M.a,n("dept",{initialValue:""}))),P.a.createElement(A,{label:"年份"},P.a.createElement(B,C()({},n("year",{initialValue:null}),{format:"YYYY",locale:L.a,placeholder:"选择年"}))),P.a.createElement(A,{label:"月份"},P.a.createElement(T.a,n("month",{initialValue:""}))),P.a.createElement(A,{label:"是否超标"},P.a.createElement(V.Select,n("exdeeds",{initialValue:""}),P.a.createElement(R,{value:""},"请选择"),P.a.createElement(R,{value:"0"},"未超标"),P.a.createElement(R,{value:"1"},"超标")))))}}]),r}(o.Component),z=q.a.createForm()(U),G=a(8),J=a.n(G),Q=a(17),K=a.n(Q),W=a(32),X=a.n(W),$=a(66),Z=a(33),ee=(a(1567),q.a.Item),te=V.Select.Option,ae=(H.a.YearPicker,"YYYY-MM-DD HH:mm:ss"),ne=["新增","修改","详情"],re=function(e){function t(e){var r;return d()(this,t),(r=b()(this,v()(t).call(this,e))).onCloseEdit=function(){r.setState({rowData:{},btnFlag:0}),r.props.onCloseEdit()},r.onSubmitEdit=function(){var a=X()(r),n=a.state.btnFlag;a.props.form.validateFields(function(e,t){e||(t=a.onHandleSaveData(t),r.onCloseEdit(),t.btnFlag=n,h.actions.popupEdit.saveOrder(t))})},r.onHandleSaveData=function(e){var t=X()(r),a=r.state.rowData,n={};return a&&(n=Object.assign({},a,e)),n.year=n.year.format("YYYY"),n.applyTime&&(n.applyTime=n.applyTime.format(ae)),t.onHandleRef(n),n},r.onHandleRef=function(e){for(var t=["dept","postLevel"],a=0,n=t.length;a<n;a++){var r=JSON.parse(e[t[a]]);e[t[a]]=r.refpk}},r.onHandleBtns=function(e){var t=X()(r),a=[{label:"取消",fun:r.onCloseEdit,shape:"border"},{label:"确定",fun:t.onSubmitEdit,colors:"primary"}];return 2==e&&(a=[]),a},r.state={rowData:{},btnFlag:0,cancelFlag:!1},r}var a;return g()(t,e),p()(t,[{key:"componentWillReceiveProps",value:(a=K()(J.a.mark(function e(t){var a,n,r,l,o,i,c,s,d;return J.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(a=this).props,r=n.btnFlag,l=n.currentIndex,o=t.btnFlag,i=t.currentIndex,c=t.editModelVisible,r!==o||l!==i){a.props.form.resetFields(),this.setState({btnFlag:o}),s={};try{0!==o&&c&&(d=this.props.list,s=d[i]||{})}catch(e){console.log(e)}finally{this.setState({rowData:s})}}case 4:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"render",value:function(){var e=this.props,t=e.form,a=e.editModelVisible,n=this.state,r=n.rowData,l=n.btnFlag,o=t.getFieldProps,i=t.getFieldError,c=r.code,s=r.serviceYearsCompany,d=r.pickTime,u=r.postLevel,p=r.levelName,m=r.year,f=r.sex,h=r.allowanceStandard,b=r.remark,v=r.deptName,E=r.dept,g=r.exdeeds,y=r.allowanceActual,w=r.allowanceType,k=r.month,x=r.pickType,S=r.name,O=r.serviceYears,D=r.applyTime;console.log("rowData",h);var I=this.onHandleBtns(l);return P.a.createElement($.a,{show:a,title:ne[l],size:"lg",btns:I,autoFocus:!1,enforceFocus:!1,close:this.onCloseEdit,className:"single-table-pop-model"},P.a.createElement(q.a,null,P.a.createElement(ee,{label:"员工编号"},P.a.createElement(V.FormControl,C()({disabled:!0},o("code",{initialValue:c||""})))),P.a.createElement(ee,{required:!0,label:"员工姓名"},P.a.createElement(V.FormControl,C()({disabled:2===l},o("name",{validateTrigger:"onBlur",initialValue:S||"",rules:[{type:"string",required:!0,pattern:/\S+/gi,message:"请输入员工姓名"}]}))),P.a.createElement(Z.a,{errorMsg:i("name")})),P.a.createElement(ee,{required:!0,label:"员工性别"},P.a.createElement(V.Select,C()({disabled:2===l},o("sex",{initialValue:void 0!==f?f:0,rules:[{required:!0,message:"请选择员工性别"}]})),P.a.createElement(te,{value:0},"女"),P.a.createElement(te,{value:1},"男")),P.a.createElement(Z.a,{errorMsg:i("sex")})),P.a.createElement(ee,{required:!0,label:"部门"},P.a.createElement(M.a,C()({disabled:2===l,placeholder:"请选择部门"},o("dept",{initialValue:JSON.stringify({refname:v||"",refpk:E||""}),rules:[{message:"请选择部门",pattern:/[^({"refname":"","refpk":""}|{"refpk":"","refname":""})]/}]}),{backdrop:!1})),P.a.createElement(Z.a,{errorMsg:i("dept")})),P.a.createElement(ee,{required:!0,label:"职级"},P.a.createElement(M.b,C()({disabled:2===l,placeholder:"请选择职级"},o("postLevel",{initialValue:JSON.stringify({refpk:u?u.toString():"",refname:p?p.toString():""}),rules:[{message:"请选择职级",pattern:/[^({"refname":"","refpk":""}|{"refpk":"","refname":""})]/}]}))),P.a.createElement(Z.a,{errorMsg:i("postLevel")})),P.a.createElement(ee,{className:"time",required:!0,label:"工龄"},P.a.createElement(V.InputNumber,C()({iconStyle:"one",min:0,step:1,disabled:2===l,max:99},o("serviceYears",{initialValue:"number"==typeof O?O:1,rules:[{pattern:/^[0-9]+$/,required:!0}]})))),P.a.createElement(ee,{className:"time",required:!0,label:"司龄"},P.a.createElement(V.InputNumber,C()({iconStyle:"one",min:0,step:1,disabled:2===l,max:99},o("serviceYearsCompany",{initialValue:"number"==typeof s?s:1,rules:[{pattern:/^[0-9]+$/,required:!0}]})))),P.a.createElement(ee,{className:"time",required:!0,label:"年份"},P.a.createElement(H.a,C()({disabled:2==l},o("year",{initialValue:m?j()(m):j()(),validateTrigger:"onBlur",rules:[{required:!0,message:"请选择申请时间"}]}),{getCalendarContainer:function(){return document.querySelector(".single-table-pop-model")},format:"YYYY",locale:L.a,placeholder:"选择年"}))),P.a.createElement(ee,{required:!0,label:"月份"},P.a.createElement(T.a,C()({disabled:2===l},o("month",{initialValue:k||1,rules:[{required:!0,message:"请选择月份"}]}))),P.a.createElement(Z.a,{errorMsg:i("month")})),P.a.createElement(ee,{required:!0,label:"补贴类别"},P.a.createElement(V.Select,C()({disabled:2===l},o("allowanceType",{initialValue:w?w.toString():"1",rules:[{required:!0,message:"请选择补贴类别"}]})),P.a.createElement(te,{value:"1"},"电脑补助"),P.a.createElement(te,{value:"2"},"住宿补助"),P.a.createElement(te,{value:"3"},"交通补助")),P.a.createElement(Z.a,{errorMsg:i("allowanceType")})),P.a.createElement(ee,{className:"time",required:!0,label:"补贴标准"},P.a.createElement(V.InputNumber,C()({iconStyle:"one",precision:2,min:0,max:9999,disabled:2===l},o("allowanceStandard",{initialValue:h?Number(h):100})))),P.a.createElement(ee,{className:"time",required:!0,label:"实际补贴"},P.a.createElement(V.InputNumber,C()({iconStyle:"one",precision:2,min:0,max:9999,disabled:2===l},o("allowanceActual",{initialValue:y?Number(y):100})))),P.a.createElement(ee,{required:!0,label:"是否超标"},P.a.createElement(V.Select,C()({disabled:2===l},o("exdeeds",{initialValue:g?g.toString():"0",rules:[{required:!0,message:"请选择是否超标"}]})),P.a.createElement(te,{value:"0"},"未超标"),P.a.createElement(te,{value:"1"},"超标")),P.a.createElement(Z.a,{errorMsg:i("exdeeds")})),2<=l?P.a.createElement(ee,{className:"time",required:!0,label:"申请时间"},P.a.createElement(H.a,C()({className:"form-item",format:ae,disabled:2===l},o("applyTime",{initialValue:D?j()(D):j()(),validateTrigger:"onBlur",rules:[{required:!0,message:"请选择申请时间"}]})))):null,P.a.createElement(ee,{required:!0,label:"领取方式"},P.a.createElement(V.Select,C()({disabled:2===l},o("pickType",{initialValue:x?x.toString():"1",rules:[{required:!0,message:"请选择领取方式"}]})),P.a.createElement(te,{value:"1"},"转账"),P.a.createElement(te,{value:"2"},"现金")),P.a.createElement(Z.a,{errorMsg:i("pickType")})),2<=l?P.a.createElement(ee,{className:"time",label:"领取时间"},P.a.createElement(H.a,C()({className:"form-item",format:ae,disabled:2===l},o("pickTime",{initialValue:d&&j()(d)||"",validateTrigger:"onBlur",rules:[{required:!1,message:"请选择领取时间"}]})))):null,P.a.createElement(ee,{label:"备注"},P.a.createElement(V.FormControl,C()({disabled:2===l},o("remark",{initialValue:b||""}))))))}}]),t}(o.Component),le=q.a.createForm()(re),oe=(a(1568),"YYYY-MM-DD HH:mm:ss"),ie=function(e){function t(e){var o;return d()(this,t),(o=b()(this,v()(t).call(this,e))).onRefreshList=function(){h.actions.popupEdit.loadList(o.props.queryParam)},o.freshData=function(e){o.onPageSelect(e,0)},o.onDataNumSelect=function(e,t){o.onPageSelect(t,1)},o.onPageSelect=function(e,t){var a=Object(Y.f)(o.props.queryParam),n=Object(Y.k)(e,t,a.pageParams),r=n.pageIndex,l=n.pageSize;a.pageParams={pageIndex:r,pageSize:l},o.setState({selectedIndex:0}),h.actions.popupEdit.loadList(a)},o.onClickShowModel=function(e){o.setState({editModelVisible:!0,btnFlag:e})},o.onCloseEdit=function(){o.setState({editModelVisible:!1,btnFlag:-1})},o.onClickDel=function(){0<o.props.list.length?o.setState({delModalVisible:!0,showHoverContent:!1}):Object(Y.b)("数据为空，不能删除")},o.column=[{title:"员工编号",dataIndex:"code",key:"code",width:150},{title:"员工姓名",dataIndex:"name",key:"name",width:120,filterType:"text",filterDropdown:"show",render:function(e,t,a){return P.a.createElement(V.Tooltip,{inverse:!0,overlay:e},P.a.createElement("span",{tootip:e,className:"popTip"},e))}},{title:"员工性别",dataIndex:"sexEnumValue",key:"sexEnumValue",width:150},{title:"所属部门",dataIndex:"deptName",key:"deptName",width:120},{title:"职级",dataIndex:"levelName",key:"levelName",width:140},{title:"工龄",dataIndex:"serviceYears",key:"serviceYears",width:130,className:"column-number-right "},{title:"司龄",dataIndex:"serviceYearsCompany",key:"serviceYearsCompany",width:130,className:"column-number-right "},{title:"年份",dataIndex:"year",key:"year",width:100,render:function(e,t,a){return P.a.createElement("div",null,e?j()(e).format("YYYY"):"")}},{title:"月份",dataIndex:"monthEnumValue",key:"monthEnumValue",width:100},{title:"补贴类别",dataIndex:"allowanceTypeEnumValue",key:"allowanceTypeEnumValue",width:120},{title:"补贴标准",dataIndex:"allowanceStandard",key:"allowanceStandard",width:120,className:"column-number-right ",render:function(e,t,a){return P.a.createElement("span",null,"number"==typeof e?e.toFixed(2):"")}},{title:"实际补贴",dataIndex:"allowanceActual",key:"allowanceActual",width:120,className:"column-number-right ",render:function(e,t,a){return P.a.createElement("span",null,"number"==typeof e?e.toFixed(2):"")}},{title:"是否超标",dataIndex:"exdeedsEnumValue",key:"exdeedsEnumValue",width:120},{title:"申请时间",dataIndex:"applyTime",key:"applyTime",width:150,render:function(e,t,a){return P.a.createElement("div",null,e?j()(e).format(oe):"")}},{title:"领取方式",dataIndex:"pickTypeEnumValue",key:"pickTypeEnumValue",width:120},{title:"领取时间",dataIndex:"pickTime",key:"pickTime",width:150,render:function(e,t,a){return P.a.createElement("div",null,e?j()(e).format(oe):"")}},{title:"备注",dataIndex:"remark",key:"remark",width:100}],o.export=function(){o.grid.exportExcel()},o.resetTableHeight=function(e){var t=0;t=e?Object(Y.j)()-420:Object(Y.j)()-270,o.setState({tableHeight:t})},o.state={tableHeight:0,selectedIndex:0,editModelVisible:!1,btnFlag:0,delModalVisible:!1,showHoverContent:!1},o}return g()(t,e),p()(t,[{key:"componentWillMount",value:function(){this.resetTableHeight(!0)}},{key:"componentDidMount",value:function(){this.onRefreshList()}},{key:"confirmGoBack",value:function(e){if(this.setState({delModalVisible:!1}),1===e){var t=this.props.list[this.state.selectedIndex];h.actions.popupEdit.removeList(t)}}},{key:"render",value:function(){var t=this,a=this,e=a.props,n=e.list,r=e.showLoading,l=e.pageIndex,o=e.totalPages,i=e.total,c=a.state,s=c.editModelVisible,d=c.selectedIndex,u=c.btnFlag,p=c.delModalVisible,m=c.tableHeight,f=c.showHoverContent,h={activePage:l,total:i,items:o,freshData:a.freshData,onDataNumSelect:a.onDataNumSelect},b=!(0<n.length);return P.a.createElement("div",{className:"single-table-popup"},P.a.createElement(k.a,{title:"A3 单表弹框编辑示例"}),P.a.createElement(z,C()({},this.props,{onCloseEdit:this.onCloseEdit,onCallback:this.resetTableHeight})),P.a.createElement("div",{className:"table-header"},P.a.createElement(O.a,{funcCode:"singletable-popupedit"},P.a.createElement(x.a,{role:"add",colors:"primary",className:"ml8",onClick:function(){a.onClickShowModel(0)}},"新增"),P.a.createElement(x.a,{shape:"border",className:"ml8",onClick:a.export},"导出")),P.a.createElement(S.a,{show:p,context:"是否要删除 ?",confirmFn:function(){a.confirmGoBack(1)},cancelFn:function(){a.confirmGoBack(2)}})),P.a.createElement("div",{className:"gird-parent"},P.a.createElement(w.a,{ref:function(e){return t.grid=e},data:n,rowKey:function(e,t){return t},columns:this.column,paginationObj:h,selectedRow:this.selectedRow,multiSelect:!1,hoverContent:function(){return f?P.a.createElement(O.a,{funcCode:"singletable-popupedit"},P.a.createElement(x.a,{isAction:!0,role:"update",className:"ml8",disabled:b,onClick:function(){t.setState({showHoverContent:!1}),a.onClickShowModel(1)}},"修改"),P.a.createElement(x.a,{isAction:!0,className:"ml8",disabled:b,onClick:function(){t.setState({showHoverContent:!1}),a.onClickShowModel(2)}},"详情"),P.a.createElement(x.a,{isAction:!0,role:"delete",className:"ml8",disabled:b,onClick:a.onClickDel},"删除")):null},onRowHover:function(e){a.setState({selectedIndex:e,showHoverContent:!0})},showHeaderMenu:!0,sort:{mode:"multiple",backSource:!0},loading:{show:r},scroll:{y:m},sheetHeader:{height:30,ifshow:!1}})),P.a.createElement(le,{editModelVisible:s,onCloseEdit:this.onCloseEdit,currentIndex:d,btnFlag:u,list:n}))}}]),t}(o.Component),ce=a(29),se=a.n(ce),de=a(21),ue={GET_DETAIL:"".concat("/iuap-pap-demo-be","/popup_allowances/list"),SAVE_ORDER:"".concat("/iuap-pap-demo-be","/popup_allowances/insertSelective"),UPDATE_ORDER:"".concat("/iuap-pap-demo-be","/popup_allowances/updateSelective"),DEL_ORDER:"".concat("/iuap-pap-demo-be","/popup_allowances/deleteBatch"),GET_LIST:"".concat("/iuap-pap-demo-be","/popup_allowances/list")},pe={name:"popupEdit",initialState:{rowPopData:{},showLoading:!1,list:[],pageIndex:0,pageSize:25,totalPages:1,total:0,queryParam:{pageParams:{pageIndex:0,pageSize:25},whereParams:[]}},reducers:{updateState:function(e,t){return se()({},e,t)}},effects:{loadList:(l=K()(J.a.mark(function e(r,l){var o,i,c,s,d;return J.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h.actions.popupEdit.updateState({showLoading:!0}),o=r||l().popupEdit.queryParam,e.t0=Y.o,e.next=5,t=o,a=void 0,a=Object.assign({},t),n=Object(Y.f)(a.pageParams),delete a.pageParams,Object(de.a)(ue.GET_LIST,{method:"post",data:a,param:n});case 5:e.t1=e.sent,i=(0,e.t0)(e.t1),c=i.result,s=c.data,d={showLoading:!1,queryParam:o},s&&(d=Object.assign({},d,{list:s.content,pageIndex:s.number+1,totalPages:s.totalPages,total:s.totalElements,pageSize:s.size,rowPopData:0<s.content.length?s.content[0]:{}})),h.actions.popupEdit.updateState(d);case 12:case"end":return e.stop()}var t,a,n},e)})),function(e,t){return l.apply(this,arguments)}),removeList:(r=K()(J.a.mark(function e(a,n){var r,l,o,i,c,s,d;return J.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h.actions.popupEdit.updateState({showLoading:!0}),r=a.id,e.t0=Y.o,e.next=5,t=[{id:r}],Object(de.a)(ue.DEL_ORDER,{method:"post",data:t});case 5:e.t1=e.sent,l=(0,e.t0)(e.t1,"删除成功"),"success"===l.result.status?(o=n().popupEdit,i=o.queryParam,c=o.list,s=o.totalPages,0<(d=i.pageParams.pageIndex)&&d+1===s&&1===c.length&&(i.pageParams.pageIndex=d-1),h.actions.popupEdit.loadList(i)):h.actions.popupEdit.updateState({showLoading:!1});case 9:case"end":return e.stop()}var t},e)})),function(e,t){return r.apply(this,arguments)}),saveOrder:(n=K()(J.a.mark(function e(n,t){var r,l,o,i,c,s;return J.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(h.actions.popupEdit.updateState({showLoading:!0}),r=null,l=n.btnFlag,delete n.btnFlag,0===l)return e.t0=Y.o,e.next=8,a=n,Object(de.a)(ue.SAVE_ORDER,{method:"post",data:a});e.next=12;break;case 8:e.t1=e.sent,o=(0,e.t0)(e.t1,"保存成功"),i=o.result,r=i.status;case 12:if(1===l)return e.t2=Y.o,e.next=16,t=n,Object(de.a)(ue.UPDATE_ORDER,{method:"post",data:t});e.next=20;break;case 16:e.t3=e.sent,c=(0,e.t2)(e.t3,"修改成功"),s=c.result,r=s.status;case 20:"success"===r?h.actions.popupEdit.loadList():h.actions.popupEdit.updateState({showLoading:!1});case 21:case"end":return e.stop()}var t,a},e)})),function(e,t){return n.apply(this,arguments)})}};i.a.model(pe);var me=Object(h.connect)(function(e){return e.popupEdit},null)(ie);a(1569);Object(h.render)(P.a.createElement(me,null),document.querySelector("#app"))}});
//# sourceMappingURL=index.js.map