/*! build:ucf hash:5054e1514046e932aede, chunkhash:4106cb5235a7a3a8412a, name:singletable-query/index, filebase:index.js, query:, file:singletable-query/index.js */!function(i){function e(e){for(var a,t,n=e[0],r=e[1],l=e[2],o=0,s=[];o<n.length;o++)t=n[o],u[t]&&s.push(u[t][0]),u[t]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a]);for(m&&m(e);s.length;)s.shift()();return d.push.apply(d,l||[]),c()}function c(){for(var e,a=0;a<d.length;a++){for(var t=d[a],n=!0,r=1;r<t.length;r++){var l=t[r];0!==u[l]&&(n=!1)}n&&(d.splice(a--,1),e=o(o.s=t[0]))}return e}var t={},u={6:0},d=[];function o(e){if(t[e])return t[e].exports;var a=t[e]={i:e,l:!1,exports:{}};return i[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=i,o.c=t,o.d=function(e,a,t){o.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:t})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(a,e){if(1&e&&(a=o(a)),8&e)return a;if(4&e&&"object"==typeof a&&a&&a.__esModule)return a;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:a}),2&e&&"string"!=typeof a)for(var n in a)o.d(t,n,function(e){return a[e]}.bind(null,n));return t},o.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(a,"a",a),a},o.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},o.p="";var a=window.webpackJsonp=window.webpackJsonp||[],n=a.push.bind(a);a.push=e,a=a.slice();for(var r=0;r<a.length;r++)e(a[r]);var m=n;d.push([1817,0]),c()}({1804:function(e,a,t){},1805:function(e,a,t){},1806:function(e,a,t){},1807:function(e,a,t){},1817:function(e,a,t){"use strict";t.r(a);t(151);var n,r,l=t(0),g=t.n(l),h=t(3),o=t.n(h),s=t(70),y=t.n(s),i=t(12),c=t.n(i),u=t(13),d=t.n(u),m=t(14),p=t.n(m),f=t(15),E=t.n(f),v=t(16),M=t.n(v),b=t(2),w=t(4),j=t(109),I=t.n(j),k=t(5),S=t.n(k),x=t(65),P=t(59),O=t(20),F=t(81),q=t(6),D=t.n(q),N=t(28),Y=t(74),T=t.n(Y),C=t(64),L=t(120),V=t(148),_=t(7),R=t(58),A=t.n(R),H=(t(1804),N.a.Item),B=w.Select.Option,G=T.a.YearPicker,z=function(e){function a(e){var o;return c()(this,a),(o=p()(this,E()(a).call(this,e))).search=function(){o.props.form.validateFields(function(e,a){a.year&&(a.year=a.year.format("YYYY"));var t=a.dept;if(t){var n=JSON.parse(t).refpk;a.dept=n}var r=Object(_.f)(o.props.queryParam);r.pageParams.pageIndex=0;var l=o.getSearchPanel(a);r.whereParams=l,h.actions.query.updateState({cacheFilter:l}),h.actions.query.loadList(r),o.props.clearRowFilter()})},o.reset=function(){o.props.form.resetFields(),o.props.form.validateFields(function(e,a){var t=Object(_.f)(o.props.queryParam),n=t.whereParams,r=[];for(var l in a)r.push({key:l});t.whereParams=Object(_.g)(n,r,"key"),h.actions.query.updateState({queryParam:t})})},o.getSearchPanel=function(e){var a=[];for(var t in e)if(e[t]||"number"==typeof e[t]){var n="LIKE";["code","month"].includes(t)&&(n="EQ"),["serviceYearsCompany"].includes(t)&&(n="GTEQ"),a.push({key:t,value:e[t],condition:n})}return a},o.state={},o}return M()(a,e),d()(a,[{key:"render",value:function(){var e=this.props,a=e.form,t=e.onCallback,n=a.getFieldProps;return g.a.createElement(L.a,{reset:this.reset,onCallback:t,search:this.search,intl:this.props.intl},g.a.createElement(N.a,{size:"sm"},g.a.createElement(H,{label:g.a.createElement(b.a,{id:"js.com.Sea5.0001",defaultMessage:"员工编号"})},g.a.createElement(w.FormControl,D()({placeholder:this.props.intl.formatMessage({id:"js.com.Sea5.0002",defaultMessage:"精确查询"})},n("code",{initialValue:""})))),g.a.createElement(H,{label:g.a.createElement(b.a,{id:"js.com.Sea5.0003",defaultMessage:"员工姓名"})},g.a.createElement(w.FormControl,D()({placeholder:this.props.intl.formatMessage({id:"js.com.Sea5.0004",defaultMessage:"模糊查询"})},n("name",{initialValue:""})))),g.a.createElement(H,{label:g.a.createElement(b.a,{id:"js.com.Sea5.0005",defaultMessage:"部门"})},g.a.createElement(C.a,n("dept",{initialValue:""}))),g.a.createElement(H,{label:g.a.createElement(b.a,{id:"js.com.Sea5.0006",defaultMessage:"司龄"})},g.a.createElement(w.InputNumber,D()({min:0,iconStyle:"one"},n("serviceYearsCompany",{initialValue:""})))),g.a.createElement(H,{label:g.a.createElement(b.a,{id:"js.com.Sea5.0007",defaultMessage:"年份"})},g.a.createElement(G,D()({},n("year",{initialValue:null}),{format:"YYYY",locale:A.a,placeholder:this.props.intl.formatMessage({id:"js.com.Sea5.0008",defaultMessage:"选择年"})}))),g.a.createElement(H,{label:g.a.createElement(b.a,{id:"js.com.Sea5.0009",defaultMessage:"月份"})},g.a.createElement(V.a,n("month",{initialValue:""}))),g.a.createElement(H,{label:g.a.createElement(b.a,{id:"js.com.Sea5.0010",defaultMessage:"是否超标"})},g.a.createElement(w.Select,n("exdeeds",{initialValue:""}),g.a.createElement(B,{value:""},g.a.createElement(b.a,{id:"js.com.Sea5.0011",defaultMessage:"请选择"})),g.a.createElement(B,{value:"0"},g.a.createElement(b.a,{id:"js.com.Sea5.0012",defaultMessage:"未超标"})),g.a.createElement(B,{value:"1"},g.a.createElement(b.a,{id:"js.com.Sea5.0013",defaultMessage:"超标"}))))))}}]),a}(l.Component),K=N.a.createForm()(Object(b.d)(z)),J=t(302),Q=t.n(J),W=(t(1805),w.Menu.Item),U="YYYY-MM-DD HH:mm:ss",X=function(e){function a(e){var f;return c()(this,a),(f=p()(this,E()(a).call(this,e))).onRelevance=function(e,a){var t=e.name;if("name"===a&&window.open("https://baike.baidu.com/item/"+t,"_blank"),"code"===a&&f.setState({record:e,showModal:!0}),"year"===a){var n=e.code,r=e.name,l=e.sexEnumValue,o=e.levelName;h.actions.routing.push({pathname:"/employee",search:I.a.stringify({code:n,name:r,sexEnumValue:l,levelName:o})})}},f.sortFun=function(e){var a=f.props.queryParam;a.sortMap=Object(_.l)(e),h.actions.query.loadList(a)},f.onFilterChange=function(e,a,t){var n=!0,r=Object(_.f)(f.props.queryParam),l=r.whereParams,o=!(r.pageParams.pageIndex=0),s=!1,i=void 0;try{for(var c,u=l.entries()[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var d=y()(c.value,2),m=d[0];d[1].key===e&&(l[m]=f.handleFilterData(e,a,t),n=!1)}}catch(e){s=!0,i=e}finally{try{o||null==u.return||u.return()}finally{if(s)throw i}}if(n){var p=f.handleFilterData(e,a,t);l.push(p)}h.actions.query.loadList(r)},f.handleFilterData=function(e,a,t){var n={key:e,value:a,condition:t};return Array.isArray(a)&&(n.value=f.handleDateFormat(a),n.condition="RANGE"),n},f.onFilterClear=function(e){var a=Object(_.f)(f.props.queryParam),t=a.whereParams,n=a.pageParams,r=!0,l=!1,o=void 0;try{for(var s,i=t.entries()[Symbol.iterator]();!(r=(s=i.next()).done);r=!0){var c=y()(s.value,2),u=c[0];if(c[1].key===e){t.splice(u,1),n.pageIndex=0;break}}}catch(e){l=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(l)throw o}}h.actions.query.loadList(a)},f.handleDateFormat=function(e){return e.map(function(e,a){return 0===a?e.format("YYYY-MM-DD 00:00:00"):e.format("YYYY-MM-DD 23:59:59")})},f.freshData=function(e){f.onPageSelect(e,0)},f.onDataNumSelect=function(e,a){f.onPageSelect(a,1)},f.onPageSelect=function(e,a){var t=Object(_.f)(f.props.queryParam),n=t.pageParams,r=n.pageIndex,l=n.pageSize;r=0===a?e-1:(l=e,0),e&&"all"===e.toString().toLowerCase()&&(l=1),t.pageParams={pageIndex:r,pageSize:l},h.actions.query.loadList(t)},f.afterRowFilter=function(e){if(!e){var a=Object(_.f)(f.props),t=a.queryParam,n=a.cacheFilter;t.whereParams=n,h.actions.query.updateState({queryParam:t})}f.setState({filterable:e})},f.clearRowFilter=function(){f.setState({filterable:!1})},f.close=function(){f.setState({showModal:!1})},f.export=function(){f.grid.exportExcel()},f.resetTableHeight=function(e){var a=0;a=e?Object(_.j)()-470:Object(_.j)()-270,f.setState({tableHeight:a})},f.formatMessage=f.props.intl.formatMessage,f.gridColumn=[{title:f.formatMessage({id:"js.com.Ind9.0001",defaultMessage:"数据"}),width:80,dataIndex:"k",key:"k",fixed:"left",className:"data-cls ",exportHidden:!0,render:function(e,a,t){var n=g.a.createElement(w.Menu,{onClick:function(e){return f.onRelevance(a,e.key)}},g.a.createElement(W,{key:"code"},g.a.createElement(b.a,{id:"js.com.Ind9.0002",defaultMessage:"模态弹出"})),g.a.createElement(W,{key:"year"},g.a.createElement(b.a,{id:"js.com.Ind9.0003",defaultMessage:"链接跳转"})),g.a.createElement(W,{key:"name"},g.a.createElement(b.a,{id:"js.com.Ind9.0004",defaultMessage:"打开新页"})));return g.a.createElement("div",{className:"table-menu"},g.a.createElement(Q.a,{trigger:["click"],overlay:n,animation:"slide-up"},g.a.createElement(w.Icon,{type:"uf-link",style:{color:"#004898"}})))}},{title:f.formatMessage({id:"js.com.Ind9.0005",defaultMessage:"员工编号"}),dataIndex:"code",key:"code",width:160},{title:f.formatMessage({id:"js.com.Ind9.0006",defaultMessage:"员工姓名"}),dataIndex:"name",key:"name",width:120,filterType:"text",filterDropdownType:"string",filterDropdown:"show",sorter:!0,render:function(e,a,t){return g.a.createElement(w.Tooltip,{inverse:!0,overlay:e},g.a.createElement("span",null,e))}},{title:f.formatMessage({id:"js.com.Ind9.0007",defaultMessage:"员工性别"}),dataIndex:"sex",key:"sex",exportKey:"sexEnumValue",width:120,filterType:"dropdown",filterDropdown:"hide",filterDropdownAuto:"manual",filterDropdownData:[{key:g.a.createElement(b.a,{id:"js.com.Ind9.0008",defaultMessage:"男"}),value:"1"},{key:g.a.createElement(b.a,{id:"js.com.Ind9.0009",defaultMessage:"女"}),value:"0"}],render:function(e,a,t){return g.a.createElement("span",null,a.sexEnumValue)}},{title:f.formatMessage({id:"js.com.Ind9.0010",defaultMessage:"部门"}),dataIndex:"dept",key:"dept",exportKey:"deptName",width:150,filterType:"dropdown",filterDropdown:"hide",filterDropdownAuto:"manual",filterDropdownData:f.props.colFilterSelectdept,filterDropdownFocus:function(){if(!f.props.colFilterSelectdept){h.actions.query.getListByCol({distinctParams:["dept"]})}},render:function(e,a,t){return g.a.createElement("span",null,a.deptName)}},{title:f.formatMessage({id:"js.com.Ind9.0011",defaultMessage:"职级"}),dataIndex:"levelName",key:"levelName",width:120},{title:f.formatMessage({id:"js.com.Ind9.0012",defaultMessage:"工龄"}),dataIndex:"serviceYears",key:"serviceYears",width:180,filterType:"number",filterDropdownType:"number",className:"column-number-right ",filterInputNumberOptions:{max:100,min:0,step:1,precision:0},sorter:!0},{title:f.formatMessage({id:"js.com.Ind9.0013",defaultMessage:"司龄"}),dataIndex:"serviceYearsCompany",key:"serviceYearsCompany",width:130,className:"column-number-right ",sorter:!0},{title:f.formatMessage({id:"js.com.Ind9.0014",defaultMessage:"年份"}),dataIndex:"year",key:"year",width:100,render:function(e,a,t){return g.a.createElement("div",null,e?S()(e).format("YYYY"):"")}},{title:f.formatMessage({id:"js.com.Ind9.0015",defaultMessage:"月份"}),dataIndex:"monthEnumValue",key:"monthEnumValue",width:100,className:"column-number-right ",sorter:!0},{title:f.formatMessage({id:"js.com.Ind9.0016",defaultMessage:"补贴类别"}),dataIndex:"allowanceTypeEnumValue",key:"allowanceTypeEnumValue",width:120},{title:f.formatMessage({id:"js.com.Ind9.0017",defaultMessage:"补贴标准"}),dataIndex:"allowanceStandard",key:"allowanceStandard",width:120,className:"column-number-right ",render:function(e,a,t){return g.a.createElement("span",null,"number"==typeof e?e.toFixed(2):"")}},{title:f.formatMessage({id:"js.com.Ind9.0018",defaultMessage:"实际补贴"}),dataIndex:"allowanceActual",key:"allowanceActual",width:120,className:"column-number-right ",render:function(e,a,t){return g.a.createElement("span",null,"number"==typeof e?e.toFixed(2):"")}},{title:f.formatMessage({id:"js.com.Ind9.0019",defaultMessage:"是否超标"}),dataIndex:"exdeedsEnumValue",key:"exdeedsEnumValue",width:120},{title:f.formatMessage({id:"js.com.Ind9.0020",defaultMessage:"申请时间"}),dataIndex:"applyTime",key:"applyTime",width:300,filterDropdown:"hide",filterType:"daterange",filterDropdownType:"daterange",render:function(e,a,t){return g.a.createElement("div",null,e?S()(e).format(U):"")}},{title:f.formatMessage({id:"js.com.Ind9.0021",defaultMessage:"领取方式"}),dataIndex:"pickTypeEnumValue",key:"pickTypeEnumValue",width:120},{title:f.formatMessage({id:"js.com.Ind9.0022",defaultMessage:"领取时间"}),dataIndex:"pickTime",key:"pickTime",width:150,render:function(e,a,t){return g.a.createElement("div",null,e?S()(e).format(U):"")}},{title:f.formatMessage({id:"js.com.Ind9.0023",defaultMessage:"备注"}),dataIndex:"remark",key:"remark",width:100}],f.state={tableHeight:0,filterable:!1,showModal:!1,record:{}},f}return M()(a,e),d()(a,[{key:"componentWillMount",value:function(){this.resetTableHeight(!0)}},{key:"componentDidMount",value:function(){h.actions.query.loadList(this.props.queryParam)}},{key:"componentWillReceiveProps",value:function(e){if(!this.props.colFilterSelectdept&&e.colFilterSelectdept)for(var a=0,t=this.gridColumn.length;a<t;a++){var n=this.gridColumn[a];if("dept"===n.key){n.filterDropdownData=e.colFilterSelectdept;break}}}},{key:"render",value:function(){var a=this,e=this,t=e.props,n=t.queryObj,r=t.showLoading,l=t.queryParam,o=n.pageIndex,s=n.total,i=n.totalPages,c=e.state,u=c.filterable,d=c.record,m=c.tableHeight,p={activePage:o,total:s,items:i,freshData:e.freshData,onDataNumSelect:e.onDataNumSelect},f={mode:"multiple",backSource:!0,sortFun:e.sortFun};return g.a.createElement("div",{className:"single-table-query"},g.a.createElement(w.Loading,{showBackDrop:!0,show:r,fullScreen:!0}),g.a.createElement(P.a,{title:this.props.intl.formatMessage({id:"js.com.Ind9.0024",defaultMessage:"A1单表查询示例"})}),g.a.createElement(K,{queryParam:l,clearRowFilter:this.clearRowFilter,onCallback:this.resetTableHeight}),g.a.createElement("div",{className:"table-header"},g.a.createElement(O.a,{className:"ml8",colors:"primary",onClick:e.export},g.a.createElement(b.a,{id:"js.com.Ind9.0025",defaultMessage:"导出"}))),g.a.createElement("div",{className:"gird-parent"},g.a.createElement(x.a,{ref:function(e){return a.grid=e},columns:this.gridColumn,data:n.list,rowKey:function(e,a){return a},paginationObj:p,multiSelect:!1,showFilterMenu:!0,filterable:u,onFilterChange:e.onFilterChange,onFilterClear:e.onFilterClear,afterRowFilter:e.afterRowFilter,sort:f,scroll:{y:m},sheetHeader:{height:30,ifshow:!1}})),g.a.createElement(F.a,{show:this.state.showModal,title:this.props.intl.formatMessage({id:"js.com.Ind9.0026",defaultMessage:"模态弹出"}),close:this.close,btns:[]},g.a.createElement("div",null,g.a.createElement("span",null,g.a.createElement(b.a,{id:"js.com.Ind9.0027",defaultMessage:"员工编号："})),g.a.createElement("span",null,d.code)),g.a.createElement("div",null,g.a.createElement("span",null,g.a.createElement(b.a,{id:"js.com.Ind9.0028",defaultMessage:"员工姓名："})),g.a.createElement("span",null,d.name)),g.a.createElement("div",null,g.a.createElement("span",null,g.a.createElement(b.a,{id:"js.com.Ind9.0029",defaultMessage:"员工性别："})),g.a.createElement("span",null,d.sexEnumValue)),g.a.createElement("div",null,g.a.createElement("span",null,g.a.createElement(b.a,{id:"js.com.Ind9.0030",defaultMessage:"职级："})),g.a.createElement("span",null,d.levelName))))}}]),a}(l.Component),Z=Object(b.d)(X),$=t(29),ee=t.n($),ae=t(10),te=t.n(ae),ne=t(19),re=t.n(ne),le=t(34),oe=t.n(le),se=t(23),ie={GET_LIST:"".concat("/iuap-pap-demo-be","/query_allowances/list"),GET_LIST_BY_COL:"".concat("/iuap-pap-demo-be","/query_allowances/distinct")},ce={name:"query",initialState:{showLoading:!1,cacheFilter:[],queryParam:{pageParams:{pageIndex:0,pageSize:25},sortMap:[],whereParams:[]},queryObj:{list:[],pageIndex:0,pageSize:25,totalPages:1,total:0}},reducers:{updateState:function(e,a){return oe()({},e,a)}},effects:{loadList:(r=re()(te.a.mark(function e(){var r,l,o,s,i,c,u,d,m,p=arguments;return te.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=0<p.length&&void 0!==p[0]?p[0]:{},l=1<p.length?p[1]:void 0,h.actions.query.updateState({showLoading:!0}),e.t0=_.o,e.next=6,a=r,t=void 0,t=Object.assign({},a),n=Object(_.f)(t.pageParams),delete t.pageParams,Object(se.a)(ie.GET_LIST,{method:"post",data:t,param:n});case 6:e.t1=e.sent,o=(0,e.t0)(e.t1),s=o.result,i=s.data,c={showLoading:!1},i?(u=r.pageParams,d=Object(_.p)(i,u),c.queryObj=d,c.queryParam=r):(m=l().query.queryObj,c.queryObj=Object(_.n)(m)),h.actions.query.updateState(c);case 13:case"end":return e.stop()}var a,t,n},e)})),function(){return r.apply(this,arguments)}),getListByCol:(n=re()(te.a.mark(function e(t,a){var n,r,l,o,s,i,c;return te.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=_.o,e.next=3,a=t,Object(se.a)(ie.GET_LIST_BY_COL,{method:"post",data:a});case 3:e.t1=e.sent,n=(0,e.t0)(e.t1),r=n.result,l=r.data,o=void 0===l?[]:l,s=t.distinctParams,i=s[0],c=o.map(function(e){return{key:e.deptName,value:e.dept}}),h.actions.query.updateState(ee()({},"colFilterSelect"+i,c));case 10:case"end":return e.stop()}var a},e)})),function(e,a){return n.apply(this,arguments)})}};o.a.model(ce);var ue=Object(h.connect)(function(e){return e.query},null)(Z),de=(t(1806),function(e){function l(){var e,a;c()(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(a=p()(this,(e=E()(l)).call.apply(e,[this].concat(n)))).onBack=function(){h.actions.routing.goBack()},a}return M()(l,e),d()(l,[{key:"render",value:function(){var e=I.a.parse(this.props.location.search),a=e.code,t=e.name,n=e.sexEnumValue,r=e.levelName;return g.a.createElement("div",{className:"employee"},g.a.createElement(P.a,{title:this.props.intl.formatMessage({id:"js.com.Ind10.0001",defaultMessage:"A1单表查询示例"}),back:!0}),g.a.createElement("div",{className:"content"},g.a.createElement("div",{className:"item"},g.a.createElement("span",null,g.a.createElement(b.a,{id:"js.com.Ind10.0002",defaultMessage:"员工编号："})),g.a.createElement("span",null,a)),g.a.createElement("div",{className:"item"},g.a.createElement("span",null,g.a.createElement(b.a,{id:"js.com.Ind10.0003",defaultMessage:"员工姓名："})),g.a.createElement("span",null,t)),g.a.createElement("div",{className:"item"},g.a.createElement("span",null,g.a.createElement(b.a,{id:"js.com.Ind10.0004",defaultMessage:"员工性别："})),g.a.createElement("span",null,n)),g.a.createElement("div",{className:"item"},g.a.createElement("span",null,"       ",g.a.createElement(b.a,{id:"js.com.Ind10.0005",defaultMessage:"职级："})),g.a.createElement("span",null,r))))}}]),l}(l.Component)),me=Object(b.d)(de),pe=Object(h.connect)(function(e){return e.query},null)(me),fe=t(82);t(1807);o.a.defaults({historyMode:"hash",middlewares:[]}),Object(h.render)(g.a.createElement(fe.a,null,g.a.createElement(h.Router,null,g.a.createElement(function(){return g.a.createElement("div",{className:"route-content"},g.a.createElement(h.Route,{exact:!0,path:"/",component:ue}),g.a.createElement(h.Route,{exact:!0,path:"/employee",component:pe}))},null))),document.querySelector("#app"))}});
//# sourceMappingURL=index.js.map