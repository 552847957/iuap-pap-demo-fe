<<<<<<< HEAD
/*! build:ucf hash:e68ba93b8d9f266f6dde, chunkhash:8cf772d25c235f419b22, name:singletable-query/index, filebase:index.js, query:, file:singletable-query/index.js */!function(e){function t(t){for(var n,o,i=t[0],c=t[1],u=t[2],m=0,d=[];m<i.length;m++)o=i[m],r[o]&&d.push(r[o][0]),r[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);for(s&&s(t);d.length;)d.shift()();return l.push.apply(l,u||[]),a()}function a(){for(var e,t=0;t<l.length;t++){for(var a=l[t],n=!0,i=1;i<a.length;i++){var c=a[i];0!==r[c]&&(n=!1)}n&&(l.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},r={6:0},l=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var i=window.webpackJsonp=window.webpackJsonp||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var s=c;l.push([1577,0]),a()}({1563:function(e,t,a){},1564:function(e,t,a){},1565:function(e,t,a){},1566:function(e,t,a){},1577:function(e,t,a){"use strict";a.r(t);a(161);var n=a(0),r=a.n(n),l=a(2),o=a.n(l),i=a(58),c=a.n(i),u=a(10),s=a.n(u),m=a(11),d=a.n(m),p=a(12),f=a.n(p),h=a(13),y=a.n(h),v=a(14),E=a.n(v),b=a(3),w=a(86),g=a.n(w),k=a(4),x=a.n(k),S=a(54),P=a(50),F=a(18),q=a(66),O=a(6),I=a.n(O),j=a(25),D=a(62),N=a.n(D),Y=a(53),T=a(105),C=a(131),L=a(5),M=a(47),V=a.n(M),_=(a(1563),j.a.Item),R=b.Select.Option,A=N.a.YearPicker,H=function(e){function t(e){var a;return s()(this,t),(a=f()(this,y()(t).call(this,e))).search=function(){a.props.form.validateFields(function(e,t){t.year&&(t.year=t.year.format("YYYY"));var n=t.dept;if(n){var r=JSON.parse(n).refpk;t.dept=r}var o=Object(L.f)(a.props.queryParam);o.pageParams.pageIndex=0;var i=a.getSearchPanel(t);o.whereParams=i,l.actions.query.updateState({cacheFilter:i}),l.actions.query.loadList(o),a.props.clearRowFilter()})},a.reset=function(){a.props.form.resetFields(),a.props.form.validateFields(function(e,t){var n=Object(L.f)(a.props.queryParam),r=n.whereParams,o=[];for(var i in t)o.push({key:i});n.whereParams=Object(L.g)(r,o,"key"),l.actions.query.updateState({queryParam:n})})},a.getSearchPanel=function(e){var t=[];for(var a in e)if(e[a]||"number"==typeof e[a]){var n="LIKE";["code","month"].includes(a)&&(n="EQ"),["serviceYearsCompany"].includes(a)&&(n="GTEQ"),t.push({key:a,value:e[a],condition:n})}return t},a.state={},a}return E()(t,e),d()(t,[{key:"render",value:function(){var e=this.props,t=e.form,a=e.onCallback,n=t.getFieldProps;return r.a.createElement(T.a,{reset:this.reset,onCallback:a,search:this.search},r.a.createElement(j.a,{size:"sm"},r.a.createElement(_,{label:"员工编号"},r.a.createElement(b.FormControl,I()({placeholder:"精确查询"},n("code",{initialValue:""})))),r.a.createElement(_,{label:"员工姓名"},r.a.createElement(b.FormControl,I()({placeholder:"模糊查询"},n("name",{initialValue:""})))),r.a.createElement(_,{label:"部门"},r.a.createElement(Y.a,n("dept",{initialValue:""}))),r.a.createElement(_,{label:"司龄"},r.a.createElement(b.InputNumber,I()({min:0,iconStyle:"one"},n("serviceYearsCompany",{initialValue:""})))),r.a.createElement(_,{label:"年份"},r.a.createElement(A,I()({},n("year",{initialValue:null}),{format:"YYYY",locale:V.a,placeholder:"选择年"}))),r.a.createElement(_,{label:"月份"},r.a.createElement(C.a,n("month",{initialValue:""}))),r.a.createElement(_,{label:"是否超标"},r.a.createElement(b.Select,n("exdeeds",{initialValue:""}),r.a.createElement(R,{value:""},"请选择"),r.a.createElement(R,{value:"0"},"未超标"),r.a.createElement(R,{value:"1"},"超标")))))}}]),t}(n.Component),B=j.a.createForm()(H),G=a(267),z=a.n(G),K=(a(1564),b.Menu.Item),J="YYYY-MM-DD HH:mm:ss",Q="YYYY-MM-DD 00:00:00",W="YYYY-MM-DD 23:59:59",U=function(e){function t(e){var a;return s()(this,t),(a=f()(this,y()(t).call(this,e))).onRelevance=function(e,t){var n=e.name;if("name"===t&&window.open("https://baike.baidu.com/item/"+n,"_blank"),"code"===t&&a.setState({record:e,showModal:!0}),"year"===t){var r=e.code,o=e.name,i=e.sexEnumValue,c=e.levelName;l.actions.routing.push({pathname:"/employee",search:g.a.stringify({code:r,name:o,sexEnumValue:i,levelName:c})})}},a.sortFun=function(e){var t=a.props.queryParam;t.sortMap=Object(L.l)(e),l.actions.query.loadList(t)},a.onFilterChange=function(e,t,n){var r=!0,o=Object(L.f)(a.props.queryParam),i=o.whereParams;o.pageParams.pageIndex=0;var u=!0,s=!1,m=void 0;try{for(var d,p=i.entries()[Symbol.iterator]();!(u=(d=p.next()).done);u=!0){var f=c()(d.value,2),h=f[0];f[1].key===e&&(i[h]=a.handleFilterData(e,t,n),r=!1)}}catch(e){s=!0,m=e}finally{try{u||null==p.return||p.return()}finally{if(s)throw m}}if(r){var y=a.handleFilterData(e,t,n);i.push(y)}l.actions.query.loadList(o)},a.handleFilterData=function(e,t,n){var r={key:e,value:t,condition:n};return Array.isArray(t)&&(r.value=a.handleDateFormat(t),r.condition="RANGE"),r},a.onFilterClear=function(e){var t=Object(L.f)(a.props.queryParam),n=t.whereParams,r=t.pageParams,o=!0,i=!1,u=void 0;try{for(var s,m=n.entries()[Symbol.iterator]();!(o=(s=m.next()).done);o=!0){var d=c()(s.value,2),p=d[0];if(d[1].key===e){n.splice(p,1),r.pageIndex=0;break}}}catch(e){i=!0,u=e}finally{try{o||null==m.return||m.return()}finally{if(i)throw u}}l.actions.query.loadList(t)},a.handleDateFormat=function(e){return e.map(function(e,t){return 0===t?e.format(Q):e.format(W)})},a.freshData=function(e){a.onPageSelect(e,0)},a.onDataNumSelect=function(e,t){a.onPageSelect(t,1)},a.onPageSelect=function(e,t){var n=Object(L.f)(a.props.queryParam),r=n.pageParams,o=r.pageIndex,i=r.pageSize;0===t?o=e-1:(i=e,o=0),e&&"all"===e.toString().toLowerCase()&&(i=1),n.pageParams={pageIndex:o,pageSize:i},l.actions.query.loadList(n)},a.afterRowFilter=function(e){if(!e){var t=Object(L.f)(a.props),n=t.queryParam,r=t.cacheFilter;n.whereParams=r,l.actions.query.updateState({queryParam:n})}a.setState({filterable:e})},a.clearRowFilter=function(){a.setState({filterable:!1})},a.close=function(){a.setState({showModal:!1})},a.export=function(){a.grid.exportExcel()},a.resetTableHeight=function(e){var t=0;t=e?Object(L.j)()-470:Object(L.j)()-270,a.setState({tableHeight:t})},a.gridColumn=[{title:"数据",width:80,dataIndex:"k",key:"k",fixed:"left",className:"data-cls ",exportHidden:!0,render:function(e,t,n){var l=r.a.createElement(b.Menu,{onClick:function(e){return a.onRelevance(t,e.key)}},r.a.createElement(K,{key:"code"},"模态弹出"),r.a.createElement(K,{key:"year"},"链接跳转"),r.a.createElement(K,{key:"name"},"打开新页"));return r.a.createElement("div",{className:"table-menu"},r.a.createElement(z.a,{trigger:["click"],overlay:l,animation:"slide-up"},r.a.createElement(b.Icon,{type:"uf-link",style:{color:"#004898"}})))}},{title:"员工编号",dataIndex:"code",key:"code",width:160},{title:"员工姓名",dataIndex:"name",key:"name",width:120,filterType:"text",filterDropdownType:"string",filterDropdown:"show",sorter:!0,render:function(e,t,a){return r.a.createElement(b.Tooltip,{inverse:!0,overlay:e},r.a.createElement("span",null,e))}},{title:"员工性别",dataIndex:"sex",key:"sex",exportKey:"sexEnumValue",width:120,filterType:"dropdown",filterDropdown:"hide",filterDropdownAuto:"manual",filterDropdownData:[{key:"男",value:"1"},{key:"女",value:"0"}],render:function(e,t,a){return r.a.createElement("span",null,t.sexEnumValue)}},{title:"部门",dataIndex:"dept",key:"dept",exportKey:"deptName",width:150,filterType:"dropdown",filterDropdown:"hide",filterDropdownAuto:"manual",filterDropdownData:a.props.colFilterSelectdept,filterDropdownFocus:function(){if(!a.props.colFilterSelectdept){l.actions.query.getListByCol({distinctParams:["dept"]})}},render:function(e,t,a){return r.a.createElement("span",null,t.deptName)}},{title:"职级",dataIndex:"levelName",key:"levelName",width:120},{title:"工龄",dataIndex:"serviceYears",key:"serviceYears",width:180,filterType:"number",filterDropdownType:"number",className:"column-number-right ",filterInputNumberOptions:{max:100,min:0,step:1,precision:0},sorter:!0},{title:"司龄",dataIndex:"serviceYearsCompany",key:"serviceYearsCompany",width:130,className:"column-number-right ",sorter:!0},{title:"年份",dataIndex:"year",key:"year",width:100,render:function(e,t,a){return r.a.createElement("div",null,e?x()(e).format("YYYY"):"")}},{title:"月份",dataIndex:"monthEnumValue",key:"monthEnumValue",width:100,className:"column-number-right ",sorter:!0},{title:"补贴类别",dataIndex:"allowanceTypeEnumValue",key:"allowanceTypeEnumValue",width:120},{title:"补贴标准",dataIndex:"allowanceStandard",key:"allowanceStandard",width:120,className:"column-number-right ",render:function(e,t,a){return r.a.createElement("span",null,"number"==typeof e?e.toFixed(2):"")}},{title:"实际补贴",dataIndex:"allowanceActual",key:"allowanceActual",width:120,className:"column-number-right ",render:function(e,t,a){return r.a.createElement("span",null,"number"==typeof e?e.toFixed(2):"")}},{title:"是否超标",dataIndex:"exdeedsEnumValue",key:"exdeedsEnumValue",width:120},{title:"申请时间",dataIndex:"applyTime",key:"applyTime",width:300,filterDropdown:"hide",filterType:"daterange",filterDropdownType:"daterange",render:function(e,t,a){return r.a.createElement("div",null,e?x()(e).format(J):"")}},{title:"领取方式",dataIndex:"pickTypeEnumValue",key:"pickTypeEnumValue",width:120},{title:"领取时间",dataIndex:"pickTime",key:"pickTime",width:150,render:function(e,t,a){return r.a.createElement("div",null,e?x()(e).format(J):"")}},{title:"备注",dataIndex:"remark",key:"remark",width:100}],a.state={tableHeight:0,filterable:!1,showModal:!1,record:{}},a}return E()(t,e),d()(t,[{key:"componentWillMount",value:function(){this.resetTableHeight(!0)}},{key:"componentDidMount",value:function(){l.actions.query.loadList(this.props.queryParam)}},{key:"componentWillReceiveProps",value:function(e){if(!this.props.colFilterSelectdept&&e.colFilterSelectdept)for(var t=0,a=this.gridColumn.length;t<a;t++){var n=this.gridColumn[t];if("dept"===n.key){n.filterDropdownData=e.colFilterSelectdept;break}}}},{key:"render",value:function(){var e=this,t=this.props,a=t.queryObj,n=t.showLoading,l=t.queryParam,o=a.pageIndex,i=a.total,c=a.totalPages,u=this.state,s=u.filterable,m=u.record,d=u.tableHeight,p={activePage:o,total:i,items:c,freshData:this.freshData,onDataNumSelect:this.onDataNumSelect},f={mode:"multiple",backSource:!0,sortFun:this.sortFun};return r.a.createElement("div",{className:"single-table-query"},r.a.createElement(b.Loading,{showBackDrop:!0,show:n,fullScreen:!0}),r.a.createElement(P.a,{title:"A1单表查询示例"}),r.a.createElement(B,{queryParam:l,clearRowFilter:this.clearRowFilter,onCallback:this.resetTableHeight}),r.a.createElement("div",{className:"table-header"},r.a.createElement(F.a,{className:"ml8",colors:"primary",onClick:this.export},"导出")),r.a.createElement("div",{className:"gird-parent"},r.a.createElement(S.a,{ref:function(t){return e.grid=t},columns:this.gridColumn,data:a.list,rowKey:function(e,t){return t},paginationObj:p,multiSelect:!1,showFilterMenu:!0,filterable:s,onFilterChange:this.onFilterChange,onFilterClear:this.onFilterClear,afterRowFilter:this.afterRowFilter,sort:f,scroll:{y:d},sheetHeader:{height:30,ifshow:!1}})),r.a.createElement(q.a,{show:this.state.showModal,title:"模态弹出",close:this.close,btns:[]},r.a.createElement("div",null,r.a.createElement("span",null,"员工编号："),r.a.createElement("span",null,m.code)),r.a.createElement("div",null,r.a.createElement("span",null,"员工姓名："),r.a.createElement("span",null,m.name)),r.a.createElement("div",null,r.a.createElement("span",null,"员工性别："),r.a.createElement("span",null,m.sexEnumValue)),r.a.createElement("div",null,r.a.createElement("span",null,"职级："),r.a.createElement("span",null,m.levelName))))}}]),t}(n.Component),X=a(26),Z=a.n(X),$=a(8),ee=a.n($),te=a(17),ae=a.n(te),ne=a(29),re=a.n(ne),le=a(21),oe={GET_LIST:"".concat("/iuap-pap-demo-be","/query_allowances/list"),GET_LIST_BY_COL:"".concat("/iuap-pap-demo-be","/query_allowances/distinct")},ie=function(e){var t=Object.assign({},e),a=Object(L.f)(t.pageParams);return delete t.pageParams,Object(le.a)(oe.GET_LIST,{method:"post",data:t,param:a})},ce=function(e){return Object(le.a)(oe.GET_LIST_BY_COL,{method:"post",data:e})},ue={name:"query",initialState:{showLoading:!1,cacheFilter:[],queryParam:{pageParams:{pageIndex:0,pageSize:25},sortMap:[],whereParams:[]},queryObj:{list:[],pageIndex:0,pageSize:25,totalPages:1,total:0}},reducers:{updateState:function(e,t){return re()({},e,t)}},effects:{loadList:function(){var e=ae()(ee.a.mark(function e(){var t,a,n,r,o,i,c,u,s,m=arguments;return ee.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},a=m.length>1?m[1]:void 0,l.actions.query.updateState({showLoading:!0}),e.t0=L.o,e.next=6,ie(t);case 6:e.t1=e.sent,n=(0,e.t0)(e.t1),r=n.result,o=r.data,i={showLoading:!1},o?(c=t.pageParams,u=Object(L.p)(o,c),i.queryObj=u,i.queryParam=t):(s=a().query.queryObj,i.queryObj=Object(L.n)(s)),l.actions.query.updateState(i);case 13:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),getListByCol:function(){var e=ae()(ee.a.mark(function e(t,a){var n,r,o,i,c,u,s;return ee.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=L.o,e.next=3,ce(t);case 3:e.t1=e.sent,n=(0,e.t0)(e.t1),r=n.result,o=r.data,i=void 0===o?[]:o,c=t.distinctParams,u=c[0],s=i.map(function(e){return{key:e.deptName,value:e.dept}}),l.actions.query.updateState(Z()({},"colFilterSelect"+u,s));case 10:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()}};o.a.model(ue);var se=Object(l.connect)(function(e){return e.query},null)(U),me=(a(1565),function(e){function t(){var e,a;s()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=f()(this,(e=y()(t)).call.apply(e,[this].concat(r)))).onBack=function(){l.actions.routing.goBack()},a}return E()(t,e),d()(t,[{key:"render",value:function(){var e=g.a.parse(this.props.location.search),t=e.code,a=e.name,n=e.sexEnumValue,l=e.levelName;return r.a.createElement("div",{className:"employee"},r.a.createElement(P.a,{title:"A1单表查询示例",back:!0}),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"item"},r.a.createElement("span",null,"员工编号："),r.a.createElement("span",null,t)),r.a.createElement("div",{className:"item"},r.a.createElement("span",null,"员工姓名："),r.a.createElement("span",null,a)),r.a.createElement("div",{className:"item"},r.a.createElement("span",null,"员工性别："),r.a.createElement("span",null,n)),r.a.createElement("div",{className:"item"},r.a.createElement("span",null,"       职级："),r.a.createElement("span",null,l))))}}]),t}(n.Component)),de=Object(l.connect)(function(e){return e.query},null)(me);a(1566);o.a.defaults({historyMode:"hash",middlewares:[]}),Object(l.render)(r.a.createElement(l.Router,null,r.a.createElement(function(){return r.a.createElement("div",{className:"route-content"},r.a.createElement(l.Route,{exact:!0,path:"/",component:se}),r.a.createElement(l.Route,{exact:!0,path:"/employee",component:de}))},null)),document.querySelector("#app"))}});
=======
/*! build:ucf hash:2aff9828fc249ad54ad6, chunkhash:485b6072d1d6a2fe0d60, name:singletable-query/index, filebase:index.js, query:, file:singletable-query/index.js */!function(I){function e(e){for(var t,a,n=e[0],r=e[1],o=e[2],l=0,i=[];l<n.length;l++)a=n[l],A[a]&&i.push(A[a][0]),A[a]=0;for(t in r)Object.prototype.hasOwnProperty.call(r,t)&&(I[t]=r[t]);for(g&&g(e);i.length;)i.shift()();return v.push.apply(v,o||[]),c()}function c(){for(var e,t=0;t<v.length;t++){for(var a=v[t],n=!0,r=1;r<a.length;r++){var o=a[r];0!==A[o]&&(n=!1)}n&&(v.splice(t--,1),e=V(V.s=a[0]))}return e}var a=window.webpackHotUpdate;window.webpackHotUpdate=function(e,t){!function(e,t){if(!M[e]||!p[e])return;for(var a in p[e]=!1,t)Object.prototype.hasOwnProperty.call(t,a)&&(Y[a]=t[a]);0==--u&&0===d&&h()}(e,t),a&&a(e,t)};var o,n=!0,q="2aff9828fc249ad54ad6",t=1e4,_={},F=[],r=[];var l=[],N="idle";function T(e){N=e;for(var t=0;t<l.length;t++)l[t].call(null,e)}var i,Y,C,u=0,d=0,s={},p={},M={};function H(e){return+e+""===e?+e:e}function f(e){if("idle"!==N)throw new Error("check() is only allowed in idle status");return n=e,T("check"),(o=t,o=o||1e4,new Promise(function(t,a){if("undefined"==typeof XMLHttpRequest)return a(new Error("No browser support"));try{var n=new XMLHttpRequest,r=V.p+""+q+".hot-update.json";n.open("GET",r,!0),n.timeout=o,n.send(null)}catch(e){return a(e)}n.onreadystatechange=function(){if(4===n.readyState)if(0===n.status)a(new Error("Manifest request to "+r+" timed out."));else if(404===n.status)t();else if(200!==n.status&&304!==n.status)a(new Error("Manifest request to "+r+" failed."));else{try{var e=JSON.parse(n.responseText)}catch(e){return void a(e)}t(e)}}})).then(function(e){if(!e)return T("idle"),null;p={},s={},M=e.c,C=e.h,T("prepare");var t=new Promise(function(e,t){i={resolve:e,reject:t}});for(var a in Y={},A)m(a);return"prepare"===N&&0===d&&0===u&&h(),t});var o}function m(e){var t,a;M[e]?(p[e]=!0,u++,t=e,(a=document.createElement("script")).charset="utf-8",a.src=V.p+""+t+"."+q+".hot-update.js",document.head.appendChild(a)):s[e]=!0}function h(){T("ready");var t=i;if(i=null,t)if(n)Promise.resolve().then(function(){return y(n)}).then(function(e){t.resolve(e)},function(e){t.reject(e)});else{var e=[];for(var a in Y)Object.prototype.hasOwnProperty.call(Y,a)&&e.push(H(a));t.resolve(e)}}function y(a){if("ready"!==N)throw new Error("apply() is only allowed in ready status");var e,t,n,d,r;function o(e){for(var t=[e],a={},n=t.slice().map(function(e){return{chain:[e],id:e}});0<n.length;){var r=n.pop(),o=r.id,l=r.chain;if((d=L[o])&&!d.hot._selfAccepted){if(d.hot._selfDeclined)return{type:"self-declined",chain:l,moduleId:o};if(d.hot._main)return{type:"unaccepted",chain:l,moduleId:o};for(var i=0;i<d.parents.length;i++){var c=d.parents[i],u=L[c];if(u){if(u.hot._declinedDependencies[o])return{type:"declined",chain:l.concat([c]),moduleId:o,parentId:c};-1===t.indexOf(c)&&(u.hot._acceptedDependencies[o]?(a[c]||(a[c]=[]),s(a[c],[o])):(delete a[c],t.push(c),n.push({chain:l.concat([c]),id:c})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:a}}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];-1===e.indexOf(n)&&e.push(n)}}a=a||{};var l={},i=[],c={},u=function(){console.warn("[HMR] unexpected require("+f.moduleId+") to disposed module")};for(var p in Y)if(Object.prototype.hasOwnProperty.call(Y,p)){var f;r=H(p);var m=!1,h=!1,y=!1,v="";switch((f=Y[p]?o(r):{type:"disposed",moduleId:p}).chain&&(v="\nUpdate propagation: "+f.chain.join(" -> ")),f.type){case"self-declined":a.onDeclined&&a.onDeclined(f),a.ignoreDeclined||(m=new Error("Aborted because of self decline: "+f.moduleId+v));break;case"declined":a.onDeclined&&a.onDeclined(f),a.ignoreDeclined||(m=new Error("Aborted because of declined dependency: "+f.moduleId+" in "+f.parentId+v));break;case"unaccepted":a.onUnaccepted&&a.onUnaccepted(f),a.ignoreUnaccepted||(m=new Error("Aborted because "+r+" is not accepted"+v));break;case"accepted":a.onAccepted&&a.onAccepted(f),h=!0;break;case"disposed":a.onDisposed&&a.onDisposed(f),y=!0;break;default:throw new Error("Unexception type "+f.type)}if(m)return T("abort"),Promise.reject(m);if(h)for(r in c[r]=Y[r],s(i,f.outdatedModules),f.outdatedDependencies)Object.prototype.hasOwnProperty.call(f.outdatedDependencies,r)&&(l[r]||(l[r]=[]),s(l[r],f.outdatedDependencies[r]));y&&(s(i,[f.moduleId]),c[r]=u)}var w,E=[];for(t=0;t<i.length;t++)r=i[t],L[r]&&L[r].hot._selfAccepted&&E.push({module:r,errorHandler:L[r].hot._selfAccepted});T("dispose"),Object.keys(M).forEach(function(e){!1===M[e]&&delete A[e]});for(var b,g,k=i.slice();0<k.length;)if(r=k.pop(),d=L[r]){var x={},O=d.hot._disposeHandlers;for(n=0;n<O.length;n++)(e=O[n])(x);for(_[r]=x,d.hot.active=!1,delete L[r],delete l[r],n=0;n<d.children.length;n++){var P=L[d.children[n]];P&&(0<=(w=P.parents.indexOf(r))&&P.parents.splice(w,1))}}for(r in l)if(Object.prototype.hasOwnProperty.call(l,r)&&(d=L[r]))for(g=l[r],n=0;n<g.length;n++)b=g[n],0<=(w=d.children.indexOf(b))&&d.children.splice(w,1);for(r in T("apply"),q=C,c)Object.prototype.hasOwnProperty.call(c,r)&&(I[r]=c[r]);var D=null;for(r in l)if(Object.prototype.hasOwnProperty.call(l,r)&&(d=L[r])){g=l[r];var S=[];for(t=0;t<g.length;t++)if(b=g[t],e=d.hot._acceptedDependencies[b]){if(-1!==S.indexOf(e))continue;S.push(e)}for(t=0;t<S.length;t++){e=S[t];try{e(g)}catch(e){a.onErrored&&a.onErrored({type:"accept-errored",moduleId:r,dependencyId:g[t],error:e}),a.ignoreErrored||D||(D=e)}}}for(t=0;t<E.length;t++){var j=E[t];r=j.module,F=[r];try{V(r)}catch(t){if("function"==typeof j.errorHandler)try{j.errorHandler(t)}catch(e){a.onErrored&&a.onErrored({type:"self-accept-error-handler-errored",moduleId:r,error:e,originalError:t}),a.ignoreErrored||D||(D=e),D||(D=t)}else a.onErrored&&a.onErrored({type:"self-accept-errored",moduleId:r,error:t}),a.ignoreErrored||D||(D=t)}}return D?(T("fail"),Promise.reject(D)):(T("idle"),new Promise(function(e){e(i)}))}var L={},A={6:0},v=[];function V(e){if(L[e])return L[e].exports;var t,n,a=L[e]={i:e,l:!1,exports:{},hot:(t=e,n={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:o!==t,active:!0,accept:function(e,t){if(void 0===e)n._selfAccepted=!0;else if("function"==typeof e)n._selfAccepted=e;else if("object"==typeof e)for(var a=0;a<e.length;a++)n._acceptedDependencies[e[a]]=t||function(){};else n._acceptedDependencies[e]=t||function(){}},decline:function(e){if(void 0===e)n._selfDeclined=!0;else if("object"==typeof e)for(var t=0;t<e.length;t++)n._declinedDependencies[e[t]]=!0;else n._declinedDependencies[e]=!0},dispose:function(e){n._disposeHandlers.push(e)},addDisposeHandler:function(e){n._disposeHandlers.push(e)},removeDisposeHandler:function(e){var t=n._disposeHandlers.indexOf(e);0<=t&&n._disposeHandlers.splice(t,1)},check:f,apply:y,status:function(e){if(!e)return N;l.push(e)},addStatusHandler:function(e){l.push(e)},removeStatusHandler:function(e){var t=l.indexOf(e);0<=t&&l.splice(t,1)},data:_[t]},o=void 0,n),parents:(r=F,F=[],r),children:[]};return I[e].call(a.exports,a,a.exports,function(t){var a=L[t];if(!a)return V;var n=function(e){return a.hot.active?(L[e]?-1===L[e].parents.indexOf(t)&&L[e].parents.push(t):(F=[t],o=e),-1===a.children.indexOf(e)&&a.children.push(e)):(console.warn("[HMR] unexpected require("+e+") from disposed module "+t),F=[]),V(e)},e=function(t){return{configurable:!0,enumerable:!0,get:function(){return V[t]},set:function(e){V[t]=e}}};for(var r in V)Object.prototype.hasOwnProperty.call(V,r)&&"e"!==r&&"t"!==r&&Object.defineProperty(n,r,e(r));return n.e=function(e){return"ready"===N&&T("prepare"),d++,V.e(e).then(t,function(e){throw t(),e});function t(){d--,"prepare"===N&&(s[e]||m(e),0===d&&0===u&&h())}},n.t=function(e,t){return 1&t&&(e=n(e)),V.t(e,-2&t)},n}(e)),a.l=!0,a.exports}V.m=I,V.c=L,V.d=function(e,t,a){V.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},V.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},V.t=function(t,e){if(1&e&&(t=V(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(V.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)V.d(a,n,function(e){return t[e]}.bind(null,n));return a},V.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return V.d(t,"a",t),t},V.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},V.p="",V.h=function(){return q};var w=window.webpackJsonp=window.webpackJsonp||[],E=w.push.bind(w);w.push=e,w=w.slice();for(var b=0;b<w.length;b++)e(w[b]);var g=E;v.push([1584,0]),c()}({1570:function(e,t,a){},1571:function(e,t,a){},1572:function(e,t,a){},1573:function(e,t,a){},1584:function(e,t,a){"use strict";a.r(t);a(161);var n,r,o=a(0),h=a.n(o),y=a(2),l=a.n(y),i=a(58),v=a.n(i),c=a(10),u=a.n(c),d=a(11),s=a.n(d),p=a(12),f=a.n(p),m=a(13),w=a.n(m),E=a(14),b=a.n(E),g=a(3),k=a(86),x=a.n(k),O=a(4),P=a.n(O),D=a(55),S=a(51),j=a(18),I=a(66),q=a(6),_=a.n(q),F=a(25),N=a(62),T=a.n(N),Y=a(54),C=a(105),M=a(131),H=a(5),L=a(48),A=a.n(L),V=(a(1570),F.a.Item),R=g.Select.Option,B=T.a.YearPicker,G=function(e){function t(e){var l;return u()(this,t),(l=f()(this,w()(t).call(this,e))).search=function(){l.props.form.validateFields(function(e,t){t.year&&(t.year=t.year.format("YYYY"));var a=t.dept;if(a){var n=JSON.parse(a).refpk;t.dept=n}var r=Object(H.f)(l.props.queryParam);r.pageParams.pageIndex=0;var o=l.getSearchPanel(t);r.whereParams=o,y.actions.query.updateState({cacheFilter:o}),y.actions.query.loadList(r),l.props.clearRowFilter()})},l.reset=function(){l.props.form.resetFields(),l.props.form.validateFields(function(e,t){var a=Object(H.f)(l.props.queryParam),n=a.whereParams,r=[];for(var o in t)r.push({key:o});a.whereParams=Object(H.g)(n,r,"key"),y.actions.query.updateState({queryParam:a})})},l.getSearchPanel=function(e){var t=[];for(var a in e)if(e[a]||"number"==typeof e[a]){var n="LIKE";["code","month"].includes(a)&&(n="EQ"),["serviceYearsCompany"].includes(a)&&(n="GTEQ"),t.push({key:a,value:e[a],condition:n})}return t},l.state={},l}return b()(t,e),s()(t,[{key:"render",value:function(){var e=this.props,t=e.form,a=e.onCallback,n=t.getFieldProps;return h.a.createElement(C.a,{reset:this.reset,onCallback:a,search:this.search},h.a.createElement(F.a,{size:"sm"},h.a.createElement(V,{label:"员工编号"},h.a.createElement(g.FormControl,_()({placeholder:"精确查询"},n("code",{initialValue:""})))),h.a.createElement(V,{label:"员工姓名"},h.a.createElement(g.FormControl,_()({placeholder:"模糊查询"},n("name",{initialValue:""})))),h.a.createElement(V,{label:"部门"},h.a.createElement(Y.a,n("dept",{initialValue:""}))),h.a.createElement(V,{label:"司龄"},h.a.createElement(g.InputNumber,_()({min:0,iconStyle:"one"},n("serviceYearsCompany",{initialValue:""})))),h.a.createElement(V,{label:"年份"},h.a.createElement(B,_()({},n("year",{initialValue:null}),{format:"YYYY",locale:A.a,placeholder:"选择年"}))),h.a.createElement(V,{label:"月份"},h.a.createElement(M.a,n("month",{initialValue:""}))),h.a.createElement(V,{label:"是否超标"},h.a.createElement(g.Select,n("exdeeds",{initialValue:""}),h.a.createElement(R,{value:""},"请选择"),h.a.createElement(R,{value:"0"},"未超标"),h.a.createElement(R,{value:"1"},"超标")))))}}]),t}(o.Component),U=F.a.createForm()(G),z=a(267),J=a.n(z),K=(a(1571),g.Menu.Item),Q="YYYY-MM-DD HH:mm:ss",W=function(e){function t(e){var m;return u()(this,t),(m=f()(this,w()(t).call(this,e))).onRelevance=function(e,t){var a=e.name;if("name"===t&&window.open("https://baike.baidu.com/item/"+a,"_blank"),"code"===t&&m.setState({record:e,showModal:!0}),"year"===t){var n=e.code,r=e.name,o=e.sexEnumValue,l=e.levelName;y.actions.routing.push({pathname:"/employee",search:x.a.stringify({code:n,name:r,sexEnumValue:o,levelName:l})})}},m.sortFun=function(e){var t=m.props.queryParam;t.sortMap=Object(H.l)(e),y.actions.query.loadList(t)},m.onFilterChange=function(e,t,a){var n=!0,r=Object(H.f)(m.props.queryParam),o=r.whereParams,l=!(r.pageParams.pageIndex=0),i=!1,c=void 0;try{for(var u,d=o.entries()[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var s=v()(u.value,2),p=s[0];s[1].key===e&&(o[p]=m.handleFilterData(e,t,a),n=!1)}}catch(e){i=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(i)throw c}}if(n){var f=m.handleFilterData(e,t,a);o.push(f)}y.actions.query.loadList(r)},m.handleFilterData=function(e,t,a){var n={key:e,value:t,condition:a};return Array.isArray(t)&&(n.value=m.handleDateFormat(t),n.condition="RANGE"),n},m.onFilterClear=function(e){var t=Object(H.f)(m.props.queryParam),a=t.whereParams,n=t.pageParams,r=!0,o=!1,l=void 0;try{for(var i,c=a.entries()[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var u=v()(i.value,2),d=u[0];if(u[1].key===e){a.splice(d,1),n.pageIndex=0;break}}}catch(e){o=!0,l=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw l}}y.actions.query.loadList(t)},m.handleDateFormat=function(e){return e.map(function(e,t){return 0===t?e.format("YYYY-MM-DD 00:00:00"):e.format("YYYY-MM-DD 23:59:59")})},m.freshData=function(e){m.onPageSelect(e,0)},m.onDataNumSelect=function(e,t){m.onPageSelect(t,1)},m.onPageSelect=function(e,t){var a=Object(H.f)(m.props.queryParam),n=a.pageParams,r=n.pageIndex,o=n.pageSize;r=0===t?e-1:(o=e,0),e&&"all"===e.toString().toLowerCase()&&(o=1),a.pageParams={pageIndex:r,pageSize:o},y.actions.query.loadList(a)},m.afterRowFilter=function(e){if(!e){var t=Object(H.f)(m.props),a=t.queryParam,n=t.cacheFilter;a.whereParams=n,y.actions.query.updateState({queryParam:a})}m.setState({filterable:e})},m.clearRowFilter=function(){m.setState({filterable:!1})},m.close=function(){m.setState({showModal:!1})},m.export=function(){m.grid.exportExcel()},m.resetTableHeight=function(e){var t=0;t=e?Object(H.j)()-470:Object(H.j)()-270,m.setState({tableHeight:t})},m.gridColumn=[{title:"数据",width:80,dataIndex:"k",key:"k",fixed:"left",className:"data-cls ",exportHidden:!0,render:function(e,t,a){var n=h.a.createElement(g.Menu,{onClick:function(e){return m.onRelevance(t,e.key)}},h.a.createElement(K,{key:"code"},"模态弹出"),h.a.createElement(K,{key:"year"},"链接跳转"),h.a.createElement(K,{key:"name"},"打开新页"));return h.a.createElement("div",{className:"table-menu"},h.a.createElement(J.a,{trigger:["click"],overlay:n,animation:"slide-up"},h.a.createElement(g.Icon,{type:"uf-link",style:{color:"#004898"}})))}},{title:"员工编号",dataIndex:"code",key:"code",width:160},{title:"员工姓名",dataIndex:"name",key:"name",width:120,filterType:"text",filterDropdownType:"string",filterDropdown:"show",sorter:!0,render:function(e,t,a){return h.a.createElement(g.Tooltip,{inverse:!0,overlay:e},h.a.createElement("span",null,e))}},{title:"员工性别",dataIndex:"sex",key:"sex",exportKey:"sexEnumValue",width:120,filterType:"dropdown",filterDropdown:"hide",filterDropdownAuto:"manual",filterDropdownData:[{key:"男",value:"1"},{key:"女",value:"0"}],render:function(e,t,a){return h.a.createElement("span",null,t.sexEnumValue)}},{title:"部门",dataIndex:"dept",key:"dept",exportKey:"deptName",width:150,filterType:"dropdown",filterDropdown:"hide",filterDropdownAuto:"manual",filterDropdownData:m.props.colFilterSelectdept,filterDropdownFocus:function(){if(!m.props.colFilterSelectdept){y.actions.query.getListByCol({distinctParams:["dept"]})}},render:function(e,t,a){return h.a.createElement("span",null,t.deptName)}},{title:"职级",dataIndex:"levelName",key:"levelName",width:120},{title:"工龄",dataIndex:"serviceYears",key:"serviceYears",width:180,filterType:"number",filterDropdownType:"number",className:"column-number-right ",filterInputNumberOptions:{max:100,min:0,step:1,precision:0},sorter:!0},{title:"司龄",dataIndex:"serviceYearsCompany",key:"serviceYearsCompany",width:130,className:"column-number-right ",sorter:!0},{title:"年份",dataIndex:"year",key:"year",width:100,render:function(e,t,a){return h.a.createElement("div",null,e?P()(e).format("YYYY"):"")}},{title:"月份",dataIndex:"monthEnumValue",key:"monthEnumValue",width:100,className:"column-number-right ",sorter:!0},{title:"补贴类别",dataIndex:"allowanceTypeEnumValue",key:"allowanceTypeEnumValue",width:120},{title:"补贴标准",dataIndex:"allowanceStandard",key:"allowanceStandard",width:120,className:"column-number-right ",render:function(e,t,a){return h.a.createElement("span",null,"number"==typeof e?e.toFixed(2):"")}},{title:"实际补贴",dataIndex:"allowanceActual",key:"allowanceActual",width:120,className:"column-number-right ",render:function(e,t,a){return h.a.createElement("span",null,"number"==typeof e?e.toFixed(2):"")}},{title:"是否超标",dataIndex:"exdeedsEnumValue",key:"exdeedsEnumValue",width:120},{title:"申请时间",dataIndex:"applyTime",key:"applyTime",width:300,filterDropdown:"hide",filterType:"daterange",filterDropdownType:"daterange",render:function(e,t,a){return h.a.createElement("div",null,e?P()(e).format(Q):"")}},{title:"领取方式",dataIndex:"pickTypeEnumValue",key:"pickTypeEnumValue",width:120},{title:"领取时间",dataIndex:"pickTime",key:"pickTime",width:150,render:function(e,t,a){return h.a.createElement("div",null,e?P()(e).format(Q):"")}},{title:"备注",dataIndex:"remark",key:"remark",width:100}],m.state={tableHeight:0,filterable:!1,showModal:!1,record:{}},m}return b()(t,e),s()(t,[{key:"componentWillMount",value:function(){this.resetTableHeight(!0)}},{key:"componentDidMount",value:function(){y.actions.query.loadList(this.props.queryParam)}},{key:"componentWillReceiveProps",value:function(e){if(!this.props.colFilterSelectdept&&e.colFilterSelectdept)for(var t=0,a=this.gridColumn.length;t<a;t++){var n=this.gridColumn[t];if("dept"===n.key){n.filterDropdownData=e.colFilterSelectdept;break}}}},{key:"render",value:function(){var t=this,e=this,a=e.props,n=a.queryObj,r=a.showLoading,o=a.queryParam,l=n.pageIndex,i=n.total,c=n.totalPages,u=e.state,d=u.filterable,s=u.record,p=u.tableHeight,f={activePage:l,total:i,items:c,freshData:e.freshData,onDataNumSelect:e.onDataNumSelect},m={mode:"multiple",backSource:!0,sortFun:e.sortFun};return h.a.createElement("div",{className:"single-table-query"},h.a.createElement(g.Loading,{showBackDrop:!0,show:r,fullScreen:!0}),h.a.createElement(S.a,{title:"A1单表查询示例"}),h.a.createElement(U,{queryParam:o,clearRowFilter:this.clearRowFilter,onCallback:this.resetTableHeight}),h.a.createElement("div",{className:"table-header"},h.a.createElement(j.a,{className:"ml8",colors:"primary",onClick:e.export},"导出")),h.a.createElement("div",{className:"gird-parent"},h.a.createElement(D.a,{ref:function(e){return t.grid=e},columns:this.gridColumn,data:n.list,rowKey:function(e,t){return t},paginationObj:f,multiSelect:!1,showFilterMenu:!0,filterable:d,onFilterChange:e.onFilterChange,onFilterClear:e.onFilterClear,afterRowFilter:e.afterRowFilter,sort:m,scroll:{y:p},sheetHeader:{height:30,ifshow:!1}})),h.a.createElement(I.a,{show:this.state.showModal,title:"模态弹出",close:this.close,btns:[]},h.a.createElement("div",null,h.a.createElement("span",null,"员工编号："),h.a.createElement("span",null,s.code)),h.a.createElement("div",null,h.a.createElement("span",null,"员工姓名："),h.a.createElement("span",null,s.name)),h.a.createElement("div",null,h.a.createElement("span",null,"员工性别："),h.a.createElement("span",null,s.sexEnumValue)),h.a.createElement("div",null,h.a.createElement("span",null,"职级："),h.a.createElement("span",null,s.levelName))))}}]),t}(o.Component),X=a(26),Z=a.n(X),$=a(8),ee=a.n($),te=a(17),ae=a.n(te),ne=a(29),re=a.n(ne),oe=a(21),le={GET_LIST:"".concat("/iuap-pap-demo-be","/query_allowances/list"),GET_LIST_BY_COL:"".concat("/iuap-pap-demo-be","/query_allowances/distinct")},ie={name:"query",initialState:{showLoading:!1,cacheFilter:[],queryParam:{pageParams:{pageIndex:0,pageSize:25},sortMap:[],whereParams:[]},queryObj:{list:[],pageIndex:0,pageSize:25,totalPages:1,total:0}},reducers:{updateState:function(e,t){return re()({},e,t)}},effects:{loadList:(r=ae()(ee.a.mark(function e(){var r,o,l,i,c,u,d,s,p,f=arguments;return ee.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=0<f.length&&void 0!==f[0]?f[0]:{},o=1<f.length?f[1]:void 0,y.actions.query.updateState({showLoading:!0}),e.t0=H.o,e.next=6,t=r,a=void 0,a=Object.assign({},t),n=Object(H.f)(a.pageParams),delete a.pageParams,Object(oe.a)(le.GET_LIST,{method:"post",data:a,param:n});case 6:e.t1=e.sent,l=(0,e.t0)(e.t1),i=l.result,c=i.data,u={showLoading:!1},c?(d=r.pageParams,s=Object(H.p)(c,d),u.queryObj=s,u.queryParam=r):(p=o().query.queryObj,u.queryObj=Object(H.n)(p)),y.actions.query.updateState(u);case 13:case"end":return e.stop()}var t,a,n},e)})),function(){return r.apply(this,arguments)}),getListByCol:(n=ae()(ee.a.mark(function e(a,t){var n,r,o,l,i,c,u;return ee.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=H.o,e.next=3,t=a,Object(oe.a)(le.GET_LIST_BY_COL,{method:"post",data:t});case 3:e.t1=e.sent,n=(0,e.t0)(e.t1),r=n.result,o=r.data,l=void 0===o?[]:o,i=a.distinctParams,c=i[0],u=l.map(function(e){return{key:e.deptName,value:e.dept}}),y.actions.query.updateState(Z()({},"colFilterSelect"+c,u));case 10:case"end":return e.stop()}var t},e)})),function(e,t){return n.apply(this,arguments)})}};l.a.model(ie);var ce=Object(y.connect)(function(e){return e.query},null)(W),ue=(a(1572),function(e){function o(){var e,t;u()(this,o);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(t=f()(this,(e=w()(o)).call.apply(e,[this].concat(n)))).onBack=function(){y.actions.routing.goBack()},t}return b()(o,e),s()(o,[{key:"render",value:function(){var e=x.a.parse(this.props.location.search),t=e.code,a=e.name,n=e.sexEnumValue,r=e.levelName;return h.a.createElement("div",{className:"employee"},h.a.createElement(S.a,{title:"A1单表查询示例",back:!0}),h.a.createElement("div",{className:"content"},h.a.createElement("div",{className:"item"},h.a.createElement("span",null,"员工编号："),h.a.createElement("span",null,t)),h.a.createElement("div",{className:"item"},h.a.createElement("span",null,"员工姓名："),h.a.createElement("span",null,a)),h.a.createElement("div",{className:"item"},h.a.createElement("span",null,"员工性别："),h.a.createElement("span",null,n)),h.a.createElement("div",{className:"item"},h.a.createElement("span",null,"       职级："),h.a.createElement("span",null,r))))}}]),o}(o.Component)),de=Object(y.connect)(function(e){return e.query},null)(ue);a(1573);l.a.defaults({historyMode:"hash",middlewares:[]}),Object(y.render)(h.a.createElement(y.Router,null,h.a.createElement(function(){return h.a.createElement("div",{className:"route-content"},h.a.createElement(y.Route,{exact:!0,path:"/",component:ce}),h.a.createElement(y.Route,{exact:!0,path:"/employee",component:de}))},null)),document.querySelector("#app"))}});
>>>>>>> 07962f095dd39ac8321bb5cdd1a51d83bf3c6bf4
//# sourceMappingURL=index.js.map