/*! build:ucf hash:0c55fc4e2192f05c9bb4, chunkhash:350c1469d3d2eda88ac1, name:singletable-query/index, filebase:index.js, query:, file:singletable-query/index.js */!function(e){function a(a){for(var n,s,o=a[0],i=a[1],c=a[2],d=0,m=[];d<o.length;d++)s=o[d],r[s]&&m.push(r[s][0]),r[s]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);for(u&&u(a);m.length;)m.shift()();return l.push.apply(l,c||[]),t()}function t(){for(var e,a=0;a<l.length;a++){for(var t=l[a],n=!0,o=1;o<t.length;o++){var i=t[o];0!==r[i]&&(n=!1)}n&&(l.splice(a--,1),e=s(s.s=t[0]))}return e}var n={},r={6:0},l=[];function s(a){if(n[a])return n[a].exports;var t=n[a]={i:a,l:!1,exports:{}};return e[a].call(t.exports,t,t.exports,s),t.l=!0,t.exports}s.m=e,s.c=n,s.d=function(e,a,t){s.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:t})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,a){if(1&a&&(e=s(e)),8&a)return e;if(4&a&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(s.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var n in e)s.d(t,n,function(a){return e[a]}.bind(null,n));return t},s.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(a,"a",a),a},s.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},s.p="";var o=window.webpackJsonp=window.webpackJsonp||[],i=o.push.bind(o);o.push=a,o=o.slice();for(var c=0;c<o.length;c++)a(o[c]);var u=i;l.push([2018,0]),t()}({2005:function(e,a,t){},2006:function(e,a,t){},2007:function(e,a,t){},2008:function(e,a,t){},2018:function(e,a,t){"use strict";t.r(a);t(164);var n=t(0),r=t.n(n),l=t(3),s=t.n(l),o=t(76),i=t.n(o),c=t(12),u=t.n(c),d=t(13),m=t.n(d),p=t(14),f=t.n(p),g=t(15),h=t.n(g),y=t(16),E=t.n(y),v=t(2),M=t(5),b=t(115),w=t.n(b),j=t(4),I=t.n(j),k=t(71),S=t(65),x=t(24),P=t(87),O=t(9),F=t.n(O),q=t(31),D=t(64),N=t.n(D),Y=t(70),T=t(125),C=t(161),L=t(7),V=t(45),_=(t(2005),q.a.Item),R=M.Select.Option,A=N.a.YearPicker,H=function(e){function a(e){var t;return u()(this,a),(t=f()(this,h()(a).call(this,e))).search=function(){t.props.form.validateFields(function(e,a){var n=Object(L.l)(a);n.year&&(n.year=n.year.format("YYYY"));var r=n.dept;if(r){var s=JSON.parse(r).refpk;n.dept=s}var o=Object(L.e)(t.props.queryParam);o.pageParams.pageIndex=0;var i=t.getSearchPanel(n);o.whereParams=i,l.actions.query.updateState({cacheFilter:i}),l.actions.query.loadList(o),t.props.clearRowFilter()})},t.reset=function(){t.props.form.resetFields(),t.props.form.validateFields(function(e,a){var n=Object(L.l)(a),r=Object(L.e)(t.props.queryParam),s=r.whereParams,o=[];for(var i in n)o.push({key:i});r.whereParams=Object(L.f)(s,o,"key"),l.actions.query.updateState({queryParam:r})})},t.getSearchPanel=function(e){var a=[];for(var t in e)if(e[t]||"number"==typeof e[t]){var n="LIKE";["code","month"].includes(t)&&(n="EQ"),["serviceYearsCompany"].includes(t)&&(n="GTEQ"),a.push({key:t,value:e[t],condition:n})}return a},t.state={},t}return E()(a,e),m()(a,[{key:"render",value:function(){var e=this.props,a=e.form,t=e.onCallback,n=a.getFieldProps;return r.a.createElement(T.a,{reset:this.reset,onCallback:t,search:this.search,intl:this.props.intl},r.a.createElement(q.a,{size:"sm"},r.a.createElement(_,{label:r.a.createElement(v.a,{id:"js.com.Sea5.0001",defaultMessage:"员工编号"})},r.a.createElement(M.FormControl,F()({placeholder:this.props.intl.formatMessage({id:"js.com.Sea5.0002",defaultMessage:"精确查询"})},n("code",{initialValue:""})))),r.a.createElement(_,{label:r.a.createElement(v.a,{id:"js.com.Sea5.0003",defaultMessage:"员工姓名"})},r.a.createElement(M.FormControl,F()({placeholder:this.props.intl.formatMessage({id:"js.com.Sea5.0004",defaultMessage:"模糊查询"})},n("name",{initialValue:""})))),r.a.createElement(_,{label:r.a.createElement(v.a,{id:"js.com.Sea5.0005",defaultMessage:"部门"})},r.a.createElement(Y.a,n("dept",{initialValue:""}))),r.a.createElement(_,{label:r.a.createElement(v.a,{id:"js.com.Sea5.0006",defaultMessage:"司龄"})},r.a.createElement(M.FormControl,F()({maxLength:2},n("serviceYearsCompany",{validateTrigger:"onBlur",initialValue:"0",rules:[{required:!0,message:"请输入,长度小于2"},{pattern:/(^[1-9]\d*(\.\d{1,2})?$)|(^0(\.\d{1,2})?$)/,message:"请输入,类型为数字!"}]})))),r.a.createElement(_,{label:r.a.createElement(v.a,{id:"js.com.Sea5.0007",defaultMessage:"年份"})},r.a.createElement(A,F()({},n("year",{initialValue:null}),{format:"YYYY",locale:V.a,placeholder:this.props.intl.formatMessage({id:"js.com.Sea5.0008",defaultMessage:"选择年"})}))),r.a.createElement(_,{label:r.a.createElement(v.a,{id:"js.com.Sea5.0009",defaultMessage:"月份"})},r.a.createElement(C.a,n("month",{initialValue:""}))),r.a.createElement(_,{label:r.a.createElement(v.a,{id:"js.com.Sea5.0010",defaultMessage:"是否超标"})},r.a.createElement(M.Select,n("exdeeds",{initialValue:""}),r.a.createElement(R,{value:""},r.a.createElement(v.a,{id:"js.com.Sea5.0011",defaultMessage:"请选择"})),r.a.createElement(R,{value:"0"},r.a.createElement(v.a,{id:"js.com.Sea5.0012",defaultMessage:"未超标"})),r.a.createElement(R,{value:"1"},r.a.createElement(v.a,{id:"js.com.Sea5.0013",defaultMessage:"超标"}))))))}}]),a}(n.Component),B=q.a.createForm()(Object(v.d)(H)),G=t(331),z=t.n(G),K=(t(2006),M.Menu.Item),J="YYYY-MM-DD HH:mm:ss",Q="YYYY-MM-DD 00:00:00",W="YYYY-MM-DD 23:59:59",$=function(e){function a(e){var t;return u()(this,a),(t=f()(this,h()(a).call(this,e))).onRelevance=function(e,a){var n=e.name;if("name"===a&&window.open(window.location.href+"?a="+n,"_blank"),"code"===a&&t.setState({record:e,showModal:!0}),"year"===a){var r=e.code,s=e.name,o=e.sexEnumValue,i=e.levelName;l.actions.routing.push({pathname:"/employee",search:w.a.stringify({code:r,name:s,sexEnumValue:o,levelName:i})})}},t.sortFun=function(e){var a=t.props.queryParam;a.sortMap=Object(L.k)(e),l.actions.query.loadList(a)},t.onFilterChange=function(e,a,n){var r=!0,s=Object(L.e)(t.props.queryParam),o=s.whereParams;s.pageParams.pageIndex=0;var c=!0,u=!1,d=void 0;try{for(var m,p=o.entries()[Symbol.iterator]();!(c=(m=p.next()).done);c=!0){var f=i()(m.value,2),g=f[0];f[1].key===e&&(o[g]=t.handleFilterData(e,a,n),r=!1)}}catch(e){u=!0,d=e}finally{try{c||null==p.return||p.return()}finally{if(u)throw d}}if(r){var h=t.handleFilterData(e,a,n);o.push(h)}l.actions.query.loadList(s)},t.handleFilterData=function(e,a,n){var r={key:e,value:a,condition:n};return Array.isArray(a)&&(r.value=t.handleDateFormat(a),r.condition="RANGE"),r},t.onFilterClear=function(e){var a=Object(L.e)(t.props.queryParam),n=a.whereParams,r=a.pageParams,s=!0,o=!1,c=void 0;try{for(var u,d=n.entries()[Symbol.iterator]();!(s=(u=d.next()).done);s=!0){var m=i()(u.value,2),p=m[0];if(m[1].key===e){n.splice(p,1),r.pageIndex=0;break}}}catch(e){o=!0,c=e}finally{try{s||null==d.return||d.return()}finally{if(o)throw c}}l.actions.query.loadList(a)},t.handleDateFormat=function(e){return e.map(function(e,a){return 0===a?e.format(Q):e.format(W)})},t.freshData=function(e){t.onPageSelect(e,0)},t.onDataNumSelect=function(e,a){t.onPageSelect(a,1)},t.onPageSelect=function(e,a){var n=Object(L.e)(t.props.queryParam),r=n.pageParams,s=r.pageIndex,o=r.pageSize;0===a?s=e-1:(o=e,s=0),e&&"all"===e.toString().toLowerCase()&&(o=1),n.pageParams={pageIndex:s,pageSize:o},l.actions.query.loadList(n)},t.afterRowFilter=function(e){if(!e){var a=Object(L.e)(t.props),n=a.queryParam,r=a.cacheFilter;n.whereParams=r,l.actions.query.updateState({queryParam:n})}t.setState({filterable:e})},t.clearRowFilter=function(){t.setState({filterable:!1})},t.close=function(){t.setState({showModal:!1})},t.export=function(){t.grid.exportExcel()},t.resetTableHeight=function(e){var a=0;a=e?Object(L.i)()-470:Object(L.i)()-270,t.setState({tableHeight:a})},t.formatMessage=t.props.intl.formatMessage,t.gridColumn=[{title:t.formatMessage({id:"js.com.Ind9.0001",defaultMessage:"数据"}),width:80,dataIndex:"k",key:"k",fixed:"left",className:"data-cls ",exportHidden:!0,render:function(e,a,n){var l=r.a.createElement(M.Menu,{onClick:function(e){return t.onRelevance(a,e.key)}},r.a.createElement(K,{key:"code"},r.a.createElement(v.a,{id:"js.com.Ind9.0002",defaultMessage:"模态弹出"})),r.a.createElement(K,{key:"year"},r.a.createElement(v.a,{id:"js.com.Ind9.0003",defaultMessage:"链接跳转"})),r.a.createElement(K,{key:"name"},r.a.createElement(v.a,{id:"js.com.Ind9.0004",defaultMessage:"打开新页"})));return r.a.createElement("div",{className:"table-menu"},r.a.createElement(z.a,{trigger:["click"],overlay:l,animation:"slide-up"},r.a.createElement(M.Icon,{type:"uf-link",style:{color:"#004898"}})))}},{title:t.formatMessage({id:"js.com.Ind9.0005",defaultMessage:"员工编号"}),dataIndex:"code",key:"code",width:160},{title:t.formatMessage({id:"js.com.Ind9.0006",defaultMessage:"员工姓名"}),dataIndex:"name",key:"name",width:120,filterType:"text",filterDropdownType:"string",filterDropdown:"show",sorter:!0,render:function(e,a,t){return r.a.createElement(M.Tooltip,{inverse:!0,overlay:e},r.a.createElement("span",null,e))}},{title:t.formatMessage({id:"js.com.Ind9.0007",defaultMessage:"员工性别"}),dataIndex:"sex",key:"sex",exportKey:"sexEnumValue",width:120,filterType:"dropdown",filterDropdown:"hide",filterDropdownAuto:"manual",filterDropdownData:[{key:r.a.createElement(v.a,{id:"js.com.Ind9.0008",defaultMessage:"男"}),value:"1"},{key:r.a.createElement(v.a,{id:"js.com.Ind9.0009",defaultMessage:"女"}),value:"0"}],render:function(e,a,t){return r.a.createElement("span",null,a.sexEnumValue)}},{title:t.formatMessage({id:"js.com.Ind9.0010",defaultMessage:"部门"}),dataIndex:"dept",key:"dept",exportKey:"deptName",width:150,filterType:"dropdown",filterDropdown:"hide",filterDropdownAuto:"manual",filterDropdownData:t.props.colFilterSelectdept,filterDropdownFocus:function(){if(!t.props.colFilterSelectdept){l.actions.query.getListByCol({distinctParams:["dept"]})}},render:function(e,a,t){return r.a.createElement("span",null,a.deptName)}},{title:t.formatMessage({id:"js.com.Ind9.0011",defaultMessage:"职级"}),dataIndex:"levelName",key:"levelName",width:120},{title:t.formatMessage({id:"js.com.Ind9.0012",defaultMessage:"工龄"}),dataIndex:"serviceYears",key:"serviceYears",width:180,filterType:"number",filterDropdownType:"number",className:"column-number-right ",filterInputNumberOptions:{max:100,min:0,step:1,precision:0},sorter:!0},{title:t.formatMessage({id:"js.com.Ind9.0013",defaultMessage:"司龄"}),dataIndex:"serviceYearsCompany",key:"serviceYearsCompany",width:130,className:"column-number-right ",sorter:!0},{title:t.formatMessage({id:"js.com.Ind9.0014",defaultMessage:"年份"}),dataIndex:"year",key:"year",width:100,render:function(e,a,t){return r.a.createElement("div",null,e?I()(e).format("YYYY"):"")}},{title:t.formatMessage({id:"js.com.Ind9.0015",defaultMessage:"月份"}),dataIndex:"monthEnumValue",key:"monthEnumValue",width:100,className:"column-number-right ",sorter:!0},{title:t.formatMessage({id:"js.com.Ind9.0016",defaultMessage:"补贴类别"}),dataIndex:"allowanceTypeEnumValue",key:"allowanceTypeEnumValue",width:120},{title:t.formatMessage({id:"js.com.Ind9.0017",defaultMessage:"补贴标准"}),dataIndex:"allowanceStandard",key:"allowanceStandard",width:120,className:"column-number-right ",render:function(e,a,t){return r.a.createElement("span",null,"number"==typeof e?e.toFixed(2):"")}},{title:t.formatMessage({id:"js.com.Ind9.0018",defaultMessage:"实际补贴"}),dataIndex:"allowanceActual",key:"allowanceActual",width:120,className:"column-number-right ",render:function(e,a,t){return r.a.createElement("span",null,"number"==typeof e?e.toFixed(2):"")}},{title:t.formatMessage({id:"js.com.Ind9.0019",defaultMessage:"是否超标"}),dataIndex:"exdeedsEnumValue",key:"exdeedsEnumValue",width:120},{title:t.formatMessage({id:"js.com.Ind9.0020",defaultMessage:"申请时间"}),dataIndex:"applyTime",key:"applyTime",width:300,filterDropdown:"hide",filterType:"daterange",filterDropdownType:"daterange",render:function(e,a,t){return r.a.createElement("div",null,e?I()(e).format(J):"")}},{title:t.formatMessage({id:"js.com.Ind9.0021",defaultMessage:"领取方式"}),dataIndex:"pickTypeEnumValue",key:"pickTypeEnumValue",width:120},{title:t.formatMessage({id:"js.com.Ind9.0022",defaultMessage:"领取时间"}),dataIndex:"pickTime",key:"pickTime",width:150,render:function(e,a,t){return r.a.createElement("div",null,e?I()(e).format(J):"")}},{title:t.formatMessage({id:"js.com.Ind9.0023",defaultMessage:"备注"}),dataIndex:"remark",key:"remark",width:100}],t.state={tableHeight:0,filterable:!1,showModal:!1,record:{}},t}return E()(a,e),m()(a,[{key:"componentWillMount",value:function(){this.resetTableHeight(!0)}},{key:"componentDidMount",value:function(){l.actions.query.loadList(this.props.queryParam)}},{key:"componentWillReceiveProps",value:function(e){if(!this.props.colFilterSelectdept&&e.colFilterSelectdept)for(var a=0,t=this.gridColumn.length;a<t;a++){var n=this.gridColumn[a];if("dept"===n.key){n.filterDropdownData=e.colFilterSelectdept;break}}}},{key:"render",value:function(){var e=this,a=this.props,t=a.queryObj,n=a.showLoading,l=a.queryParam,s=t.pageIndex,o=t.total,i=t.totalPages,c=this.state,u=c.filterable,d=c.record,m=c.tableHeight,p={activePage:s,total:o,items:i,freshData:this.freshData,onDataNumSelect:this.onDataNumSelect},f={mode:"multiple",backSource:!0,sortFun:this.sortFun};return r.a.createElement("div",{className:"single-table-query"},r.a.createElement(M.Loading,{showBackDrop:!0,show:n,fullScreen:!0}),r.a.createElement(S.a,{title:this.props.intl.formatMessage({id:"js.com.Ind9.0024",defaultMessage:"A1单表查询"})}),r.a.createElement(B,{queryParam:l,clearRowFilter:this.clearRowFilter,onCallback:this.resetTableHeight}),r.a.createElement("div",{className:"table-header"},r.a.createElement(x.a,{className:"ml8",colors:"primary",onClick:this.export},r.a.createElement(v.a,{id:"js.com.Ind9.0025",defaultMessage:"导出"}))),r.a.createElement("div",{className:"gird-parent"},r.a.createElement(k.a,{ref:function(a){return e.grid=a},columns:this.gridColumn,data:t.list,rowKey:function(e,a){return a},paginationObj:p,multiSelect:!1,showFilterMenu:!0,filterable:u,onFilterChange:this.onFilterChange,onFilterClear:this.onFilterClear,afterRowFilter:this.afterRowFilter,sort:f,scroll:{y:m},sheetHeader:{height:30,ifshow:!1}})),r.a.createElement(P.a,{show:this.state.showModal,title:this.props.intl.formatMessage({id:"js.com.Ind9.0026",defaultMessage:"模态弹出"}),close:this.close,btns:[]},r.a.createElement("div",null,r.a.createElement("span",null,r.a.createElement(v.a,{id:"js.com.Ind9.0027",defaultMessage:"员工编号："})),r.a.createElement("span",null,d.code)),r.a.createElement("div",null,r.a.createElement("span",null,r.a.createElement(v.a,{id:"js.com.Ind9.0028",defaultMessage:"员工姓名："})),r.a.createElement("span",null,d.name)),r.a.createElement("div",null,r.a.createElement("span",null,r.a.createElement(v.a,{id:"js.com.Ind9.0029",defaultMessage:"员工性别："})),r.a.createElement("span",null,d.sexEnumValue)),r.a.createElement("div",null,r.a.createElement("span",null,r.a.createElement(v.a,{id:"js.com.Ind9.0030",defaultMessage:"职级："})),r.a.createElement("span",null,d.levelName))))}}]),a}(n.Component),U=Object(v.d)($),X=t(32),Z=t.n(X),ee=t(10),ae=t.n(ee),te=t(19),ne=t.n(te),re=t(36),le=t.n(re),se=t(25),oe={GET_LIST:"".concat("/iuap-pap-demo-be","/query_allowances/list"),GET_LIST_BY_COL:"".concat("/iuap-pap-demo-be","/query_allowances/distinct")},ie=function(e){var a=Object.assign({},e),t=Object(L.e)(a.pageParams);return delete a.pageParams,Object(se.a)(oe.GET_LIST,{method:"post",data:a,param:t})},ce=function(e){return Object(se.a)(oe.GET_LIST_BY_COL,{method:"post",data:e})},ue={name:"query",initialState:{showLoading:!1,cacheFilter:[],queryParam:{pageParams:{pageIndex:0,pageSize:25},sortMap:[],whereParams:[]},queryObj:{list:[],pageIndex:0,pageSize:25,totalPages:1,total:0}},reducers:{updateState:function(e,a){return le()({},e,Object(L.e)(a))}},effects:{loadList:function(){var e=ne()(ae.a.mark(function e(){var a,t,n,r,s,o,i,c,u,d=arguments;return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>0&&void 0!==d[0]?d[0]:{},t=d.length>1?d[1]:void 0,l.actions.query.updateState({showLoading:!0}),e.t0=L.o,e.next=6,ie(a);case 6:e.t1=e.sent,n=(0,e.t0)(e.t1),r=n.result,s=r.data,o={showLoading:!1},s?(i=a.pageParams,c=Object(L.p)(s,i),o.queryObj=c,o.queryParam=a):(u=t().query.queryObj,o.queryObj=Object(L.n)(u)),l.actions.query.updateState(o);case 13:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),getListByCol:function(){var e=ne()(ae.a.mark(function e(a,t){var n,r,s,o,i,c,u;return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=L.o,e.next=3,ce(a);case 3:e.t1=e.sent,n=(0,e.t0)(e.t1),r=n.result,s=r.data,o=void 0===s?[]:s,i=a.distinctParams,c=i[0],u=o.map(function(e){return{key:e.deptName,value:e.dept}}),l.actions.query.updateState(Z()({},"colFilterSelect"+c,u));case 10:case"end":return e.stop()}},e)}));return function(a,t){return e.apply(this,arguments)}}()}};s.a.model(ue);var de=Object(l.connect)(function(e){return e.query},null)(U),me=(t(2007),function(e){function a(){var e,t;u()(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=f()(this,(e=h()(a)).call.apply(e,[this].concat(r)))).onBack=function(){l.actions.routing.goBack()},t}return E()(a,e),m()(a,[{key:"render",value:function(){var e=w.a.parse(this.props.location.search),a=e.code,t=e.name,n=e.sexEnumValue,l=e.levelName;return r.a.createElement("div",{className:"employee"},r.a.createElement(S.a,{title:this.props.intl.formatMessage({id:"js.com.Ind10.0001",defaultMessage:"A1单表查询"}),back:!0}),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"item"},r.a.createElement("span",null,r.a.createElement(v.a,{id:"js.com.Ind10.0002",defaultMessage:"员工编号："})),r.a.createElement("span",null,a)),r.a.createElement("div",{className:"item"},r.a.createElement("span",null,r.a.createElement(v.a,{id:"js.com.Ind10.0003",defaultMessage:"员工姓名："})),r.a.createElement("span",null,t)),r.a.createElement("div",{className:"item"},r.a.createElement("span",null,r.a.createElement(v.a,{id:"js.com.Ind10.0004",defaultMessage:"员工性别："})),r.a.createElement("span",null,n)),r.a.createElement("div",{className:"item"},r.a.createElement("span",null,"       ",r.a.createElement(v.a,{id:"js.com.Ind10.0005",defaultMessage:"职级："})),r.a.createElement("span",null,l))))}}]),a}(n.Component)),pe=Object(v.d)(me),fe=Object(l.connect)(function(e){return e.query},null)(pe);t(2008);s.a.defaults({historyMode:"hash",middlewares:[]}),Object(l.render)(r.a.createElement(V.b,null,r.a.createElement(l.Router,null,r.a.createElement(function(){return r.a.createElement("div",{className:"route-content"},r.a.createElement(l.Route,{exact:!0,path:"/",component:de}),r.a.createElement(l.Route,{exact:!0,path:"/employee",component:fe}))},null))),document.querySelector("#app"))}});